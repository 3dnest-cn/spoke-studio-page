(function(t){function e(e){for(var i,o,s=e[0],c=e[1],u=e[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0aa2":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},1227:function(t,e,n){},"2bbc":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"2c55":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"3d04":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"3d1c":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"49a4":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"PI",(function(){return fi})),n.d(i,"ROUND",(function(){return di}));var r={};n.r(r),n.d(r,"Line",(function(){return vi})),n.d(r,"Vector",(function(){return mi})),n.d(r,"Segment",(function(){return bi})),n.d(r,"Point",(function(){return $i}));var a={};n.r(a),n.d(a,"fromBothPoint",(function(){return Oi})),n.d(a,"fromSegment",(function(){return ji})),n.d(a,"from",(function(){return ki})),n.d(a,"dot",(function(){return Ti})),n.d(a,"multiply",(function(){return Ei})),n.d(a,"cross",(function(){return Si})),n.d(a,"length",(function(){return Ci})),n.d(a,"rotate90",(function(){return Li})),n.d(a,"normalize",(function(){return Pi})),n.d(a,"invert",(function(){return Fi})),n.d(a,"rotate",(function(){return Ai})),n.d(a,"project",(function(){return Ni}));var o={};n.r(o),n.d(o,"setTolerance",(function(){return Di})),n.d(o,"EQ_0",(function(){return Ri})),n.d(o,"EQ",(function(){return Wi})),n.d(o,"GT",(function(){return Mi})),n.d(o,"GE",(function(){return Ii})),n.d(o,"LT",(function(){return Hi})),n.d(o,"LE",(function(){return Bi}));var s={};n.r(s),n.d(s,"fromSegment",(function(){return Xi})),n.d(s,"toStandard",(function(){return Zi})),n.d(s,"intersectLine",(function(){return er}));var c={};n.r(c),n.d(c,"translate",(function(){return wi})),n.d(c,"toLeftOfSegment",(function(){return Vi})),n.d(c,"rotate",(function(){return zi})),n.d(c,"project",(function(){return Ui})),n.d(c,"distanceToPoint",(function(){return Yi})),n.d(c,"distanceToLine",(function(){return Gi})),n.d(c,"distanceToSegment",(function(){return nr})),n.d(c,"equal",(function(){return ir}));var u={};n.r(u),n.d(u,"differ",(function(){return rr}));var l={};n.r(l),n.d(l,"intersectSegment",(function(){return or})),n.d(l,"translate",(function(){return sr})),n.d(l,"middle",(function(){return cr}));var h={};n.r(h),n.d(h,"containsPoint",(function(){return ur})),n.d(h,"area",(function(){return lr}));var f={};n.r(f),n.d(f,"Vertex",(function(){return hr})),n.d(f,"HalfEdge",(function(){return fr})),n.d(f,"Face",(function(){return dr}));var d={};n.r(d),n.d(d,"allHalfEdgeOfVertex",(function(){return gr})),n.d(d,"allHalfEdgeOfPath",(function(){return yr}));var p={};n.r(p),n.d(p,"Struct",(function(){return f})),n.d(p,"Iterator",(function(){return d})),n.d(p,"createVertex",(function(){return br})),n.d(p,"getVertexHalfEdgeList",(function(){return xr})),n.d(p,"hasNoHalfEdge",(function(){return $r})),n.d(p,"hasOnlyHalfEdge",(function(){return wr})),n.d(p,"getAngleOfHalfEdge",(function(){return Or})),n.d(p,"isPathContainsHalfEdge",(function(){return jr})),n.d(p,"isPathContainsVertex",(function(){return kr})),n.d(p,"isTwinInSamePath",(function(){return Tr})),n.d(p,"getPathOfHalfEdge",(function(){return Er})),n.d(p,"isOuterPath",(function(){return Cr})),n.d(p,"isInnerPath",(function(){return Lr})),n.d(p,"splitHalfEdgeByVertex",(function(){return Pr})),n.d(p,"getPolygonFromFaceOuter",(function(){return Ar})),n.d(p,"getFaceOfPoint",(function(){return Dr})),n.d(p,"createGlobalFace",(function(){return Rr})),n.d(p,"queryChildFaceList",(function(){return _r}));var v={};n.r(v),n.d(v,"EventType",(function(){return Wr})),n.d(v,"EventListener",(function(){return Mr})),n.d(v,"PointAxis",(function(){return Ir})),n.d(v,"Point",(function(){return Hr}));var g={};n.r(g),n.d(g,"_",(function(){return Vr})),n.d(g,"Element",(function(){return Gr})),n.d(g,"Plugin",(function(){return Xr})),n.d(g,"Emitter",(function(){return zr})),n.d(g,"Tool",(function(){return Kr})),n.d(g,"ToolProvider",(function(){return qr})),n.d(g,"Creator",(function(){return Jr}));var m={};n.r(m),n.d(m,"define",(function(){return ta}));var y={};n.r(y),n.d(y,"Assert",(function(){return v})),n.d(y,"Proxy",(function(){return g})),n.d(y,"Options",(function(){return m}));var b={};n.r(b),n.d(b,"CENTER",(function(){return Eo})),n.d(b,"CURRENT_POINTER",(function(){return So}));var x={};n.r(x),n.d(x,"define",(function(){return Ao}));var $={};n.r($),n.d($,"READY",(function(){return Aa})),n.d($,"define",(function(){return No}));var w={};n.r(w),n.d(w,"Element",(function(){return x})),n.d(w,"Tool",(function(){return $})),n.d(w,"define",(function(){return _o}));var O={};n.r(O),n.d(O,"define",(function(){return Do}));var j={};n.r(j),n.d(j,"register",(function(){return Vo})),n.d(j,"getAllNameList",(function(){return Uo})),n.d(j,"HollowProxy",(function(){return Yo})),n.d(j,"default",(function(){return Ko}));var k={};n.r(k),n.d(k,"register",(function(){return Qo})),n.d(k,"registerUrl",(function(){return Zo})),n.d(k,"StuffProxy",(function(){return is})),n.d(k,"default",(function(){return os}));var T={};n.r(T),n.d(T,"default",(function(){return Yu})),n.d(T,"CornerProxy",(function(){return ls})),n.d(T,"RoomProxy",(function(){return Hu})),n.d(T,"WallProxy",(function(){return fs}));var E={};n.r(E),n.d(E,"PICKUP_FROM",(function(){return el})),n.d(E,"PICKUP_TO",(function(){return nl}));var S={};n.r(S),n.d(S,"queryOrCreateCorner",(function(){return rl})),n.d(S,"smartBuild",(function(){return al})),n.d(S,"pointInSegment",(function(){return ol}));var C={};n.r(C),n.d(C,"Indicator",(function(){return tl})),n.d(C,"Tool",(function(){return ul})),n.d(C,"STATE",(function(){return E}));var L={};n.r(L),n.d(L,"WAITING",(function(){return Pl})),n.d(L,"ACTIVE",(function(){return Fl}));var P={};n.r(P),n.d(P,"Indicator",(function(){return Ll})),n.d(P,"Tool",(function(){return Nl})),n.d(P,"STATE",(function(){return L}));var F={};n.r(F),n.d(F,"WAITING",(function(){return Dl})),n.d(F,"ACTIVE",(function(){return Rl}));var A={};n.r(A),n.d(A,"Indicator",(function(){return _l})),n.d(A,"Tool",(function(){return Bl})),n.d(A,"STATE",(function(){return F}));var N={};n.r(N),n.d(N,"DETECTING",(function(){return Ul})),n.d(N,"DETECTED",(function(){return Yl}));var _={};n.r(_),n.d(_,"Indicator",(function(){return zl})),n.d(_,"Tool",(function(){return Kl})),n.d(_,"STATE",(function(){return N}));var D={};n.r(D),n.d(D,"PICKUP_FROM",(function(){return Jl})),n.d(D,"PICKUP_TO",(function(){return Ql}));var R={};n.r(R),n.d(R,"Indicator",(function(){return ql})),n.d(R,"Tool",(function(){return eh})),n.d(R,"STATE",(function(){return D}));var W={};n.r(W),n.d(W,"Builder",(function(){return E})),n.d(W,"Extender",(function(){return L})),n.d(W,"Mover",(function(){return F})),n.d(W,"Spliter",(function(){return N})),n.d(W,"Chamber",(function(){return D}));var M={};n.r(M),n.d(M,"STATE",(function(){return W})),n.d(M,"default",(function(){return nh}));var I={};n.r(I),n.d(I,"BitmapProxy",(function(){return oh})),n.d(I,"default",(function(){return lh}));var H={};n.r(H),n.d(H,"BaseAdaptor",(function(){return xf})),n.d(H,"is",(function(){return wf}));var B={};n.r(B),n.d(B,"TextLabeler",(function(){return id})),n.d(B,"LineLabeler",(function(){return Qf}));var V={};n.r(V),n.d(V,"STATE",(function(){return B})),n.d(V,"LabelTextProxy",(function(){return zf})),n.d(V,"LabelLineProxy",(function(){return Hf})),n.d(V,"default",(function(){return hd}));var z={};n.r(z),n.d(z,"Windoor",(function(){return j})),n.d(z,"Furniture",(function(){return k})),n.d(z,"Negative",(function(){return I})),n.d(z,"Bricklayer",(function(){return M})),n.d(z,"Label",(function(){return V})),n.d(z,"Structure",(function(){return T}));var U={};n.r(U),n.d(U,"SingleDoor",(function(){return Sd})),n.d(U,"DoubleDoor",(function(){return Cd})),n.d(U,"SlidingDoor",(function(){return Ld})),n.d(U,"ParentDoor",(function(){return Pd})),n.d(U,"Bealock",(function(){return Fd}));var Y={};n.r(Y),n.d(Y,"BasicWindow",(function(){return Ad})),n.d(Y,"BoilerWindow",(function(){return Nd})),n.d(Y,"FloorWindow",(function(){return _d})),n.d(Y,"LWindow",(function(){return Dd})),n.d(Y,"UWindow",(function(){return Rd})),n.d(Y,"LBoilerWindow",(function(){return Wd})),n.d(Y,"UBoilerWindow",(function(){return Md}));var G={};n.r(G),n.d(G,"wallMaterialList",(function(){return Id})),n.d(G,"windoorRegistry",(function(){return Hd})),n.d(G,"getAllWindoorNameList",(function(){return Bd}));var X={};n.r(X),n.d(X,"PreventDefaultContextMenu",(function(){return Vd})),n.d(X,"AdjustViewportByPointerButton",(function(){return zd})),n.d(X,"AdjustZoomByWheel",(function(){return Ud})),n.d(X,"SetDefaultFloor",(function(){return Yd})),n.d(X,"rotateCompassByDrag",(function(){return Gd}));var K={};n.r(K),n.d(K,"TRANSFORMER",(function(){return Kd})),n.d(K,"SELECTOR",(function(){return qd})),n.d(K,"WALL_BUILDER",(function(){return Jd})),n.d(K,"SPLITER",(function(){return Qd})),n.d(K,"CHAMBER",(function(){return Zd})),n.d(K,"VIEWPORT",(function(){return tp})),n.d(K,"LABEL",(function(){return ep}));var q={};n.r(q),n.d(q,"Symbol",(function(){return K})),n.d(q,"Constructor",(function(){return ip}));var J={};n.r(J),n.d(J,"Provider",(function(){return ap}));var Q={};n.r(Q),n.d(Q,"Provider",(function(){return op}));var Z={};n.r(Z),n.d(Z,"MovingByWASD",(function(){return cp}));var tt={};n.r(tt),n.d(tt,"all",(function(){return hp}));var et={};n.r(et),n.d(et,"Surface",(function(){return tt}));var nt={};n.r(nt),n.d(nt,"Provider",(function(){return Ep}));var it={};n.r(it),n.d(it,"Editor",(function(){return Pp}));n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("1227"),n("15de");var rt,at,ot=n("2b0e"),st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column h-100",attrs:{id:"app"}},[n("div",{staticClass:"d-flex",attrs:{id:"app-menu-container"}},[n("div",{staticStyle:{background:"#333",width:"45px"},attrs:{id:"app-icon"}}),n("app-menu",{staticClass:"flex-grow-1",staticStyle:{background:"#444"},attrs:{id:"app-menu"}})],1),n("div",{staticClass:"flex-grow-1 d-flex flex-column",attrs:{id:"app-workbench-container"}},[n("div",{staticClass:"d-flex flex-grow-1"},[n("app-tool-group-bar",{staticClass:"border-right"}),n("sv-container",{staticClass:"flex-grow-1"},[n("sv-view",{attrs:{id:"app-drawing-area"}},[n("sv-container",{staticClass:"flex-grow-1",attrs:{direction:"column"}},[n("sv-view",{attrs:{id:"app-drawing-slot"}},[n("div",{ref:"drawing",staticClass:"w-100 h-100",staticStyle:{"line-height":"0"}}),n("app-tool-group-setting")],1),n("sv-view",{staticClass:"border-top",attrs:{id:"app-console",max:"500",min:"100"},model:{value:t.layout.consoleHeight,callback:function(e){t.$set(t.layout,"consoleHeight",e)},expression:"layout.consoleHeight"}},[t._v(" console ")])],1)],1),n("sv-view",{attrs:{id:"app-feature-area",max:"500",min:"200"}},[n("app-feature-panel")],1)],1)],1)]),n("app-status-bar"),n("app-error")],1)},ct=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},lt=[],ht="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec",ft={mounted:function(){this.$pMenu.Bar.mount(this.$el),this.updateMenu()},computed:{menuBarOptions:function(){return[{title:"文件(&F)",menu:this.menuBarFileMenuOptions},{title:"编辑(&E)",menu:[]},{title:"户型图(&D)",menu:this.menuBarDrawingMenuOptions},{title:"视图(&V)",menu:this.menuBarViewMenuOptions},{title:"帮助(&H)",menu:this.menuBarHelpMenuOptions}]},menuBarFileMenuOptions:function(){return[[{label:"新建(&N)"},{label:"新建窗口(&W)"}],[{label:"打开(&O)"}],[{label:"退出(&X)",click:function(){window.location.reload()}}]]},menuBarDrawingMenuOptions:function(){var t=this,e=new DocumentFragment;return e.appendChild(new Text("Ctrl+=")),[[{label:"放大",accelerator:[e],click:function(){var e=t.$spoke.getEditor("primary"),n=e.drawing;n.setScaleInMode(n.scale-1)}},{label:"缩小"},{label:"重置视野"},{label:"适应"}]]},menuBarViewMenuOptions:function(){var t=this;return[[{label:"添加底图",click:function(){var e=t.$spoke.getEditor("primary"),n=e.drawing;n.negative.createBitmap(ht)}}]]},menuBarHelpMenuOptions:function(){var t=this;return[[{label:"关于",click:function(){t.$bvModal.msgBoxOk("@3dnest/spoke")}}]]}},methods:{updateMenu:function(){this.$pMenu.Bar.set(this.menuBarOptions)}}},dt=ft,pt=n("0c7c"),vt=Object(pt["a"])(dt,ut,lt,!1,null,null,null),gt=vt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button-toolbar",{staticClass:"flex-column p-1",staticStyle:{width:"48px","font-size":"12px"},attrs:{id:"app-toolgroup"}},t._l(t.group,(function(e,i){return n("b-button-group",{key:i,staticClass:"my-1",attrs:{vertical:""}},t._l(e,(function(e){return n("b-button",{key:e,attrs:{pressed:t.current===e,title:t.map[e].title},on:{click:function(n){return t.activeButton(e)}}},[n("b-icon",{attrs:{icon:t.map[e].icon}})],1)})),1)})),1)},yt=[],bt=n("2fe6"),xt=(n("dca8"),"selector"),$t="transformer",wt="builder",Ot="chamber",jt="spliter",kt="labeler",Tt="viewport",Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"})},St=[],Ct={name:"SelectorSetting"},Lt=Ct,Pt=Object(pt["a"])(Lt,Et,St,!1,null,null,null),Ft=Pt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"})},Nt=[],_t={name:"TransformerSetting"},Dt=_t,Rt=Object(pt["a"])(Dt,At,Nt,!1,null,null,null),Wt=Rt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("b-form-radio-group",{staticClass:"d-flex align-items-center pr-1 pl-3",attrs:{options:t.alignOptions},on:{change:t.setWallAlignment},model:{value:t.align,callback:function(e){t.align=e},expression:"align"}}),n("b-form-group",{staticClass:"my-1 px-2 border-left border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[n("b-input-group",{attrs:{append:"mm"}},[n("b-form-input",{attrs:{id:"wall-thinkness",type:"number",min:"10",autocomplete:"off"},on:{update:t.setWallThinkness},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),n("b-form-checkbox-group",{staticClass:"d-flex align-items-center pl-3",attrs:{options:t.positionOptions,switches:""},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)},It=[],Ht={name:"BuilderSetting",data:function(){return{thinkness:200,align:"center",alignOptions:[{value:"left",text:"左边对齐"},{value:"center",text:"中线对齐"},{value:"right",text:"右边对齐"}],position:["adsorption"],positionOptions:[{value:"adsorption",text:"吸附"},{value:"orthogonal",text:"正交"}]}},mounted:function(){this.setWallThinkness(),this.setWallAlignment()},methods:{setWallThinkness:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.bricklayer.Builder.setThickness(this.thinkness)},setWallAlignment:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.bricklayer.Builder.setAlignment(this.align)}}},Bt=Ht,Vt=Object(pt["a"])(Bt,Mt,It,!1,null,null,null),zt=Vt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("b-form-group",{staticClass:"my-1 pr-2 pl-3 border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[n("b-input-group",{attrs:{append:"mm"}},[n("b-form-input",{attrs:{id:"wall-thinkness",type:"number",min:"10",autocomplete:"off"},on:{update:t.setWallThinkness},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),n("b-form-checkbox-group",{staticClass:"d-flex align-items-center pl-3",attrs:{options:t.positionOptions,switches:""},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)},Yt=[],Gt={name:"ChamberSetting",data:function(){return{thinkness:200,position:["adsorption"],positionOptions:[{value:"adsorption",text:"吸附"}]}},mounted:function(){this.setWallThinkness()},methods:{setWallThinkness:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.bricklayer.Chamber.setThickness(this.thinkness)}}},Xt=Gt,Kt=Object(pt["a"])(Xt,Ut,Yt,!1,null,null,null),qt=Kt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"})},Qt=[],Zt={name:"SpliterSetting"},te=Zt,ee=Object(pt["a"])(te,Jt,Qt,!1,null,null,null),ne=ee.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form-radio-group",{staticClass:"p-2 pl-3",attrs:{options:t.options},on:{change:t.changeLabeler},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},re=[],ae={name:"LabelerSetting",data:function(){return{selected:"textLabeler",options:[{value:"textLabeler",text:"文字标注"},{value:"lineLabeler",text:"引线标注"}]}},methods:{changeLabeler:function(t){var e=this.$spoke.getEditor("primary"),n=e.drawing;"textLabeler"===t?n.label.openTextLabeler():n.label.openLineLabeler()}}},oe=ae,se=Object(pt["a"])(oe,ie,re,!1,null,null,null),ce=se.exports,ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button-group",{staticClass:"p-2"},[n("b-button",{staticClass:"app-collapse-button mr-2",on:{click:t.originBackToCenter}},[t._v("原点回中")]),n("b-button",{staticClass:"app-collapse-button",on:{click:t.negativeBackToCenter}},[t._v("底图回中")])],1),n("b-modal",{ref:"viewport-info-modal",attrs:{size:"sm","hide-header":"","hide-footer":""}},[n("div",{staticClass:"d-block text-center"},[t._v("当前楼层没有底图")])])],1)},le=[],he={name:"ViewportSetting",methods:{originBackToCenter:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing,n=e.width,i=e.height;e.setOrigin(n/2,i/2),e.setScale(25)},negativeBackToCenter:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing,n=e.negative.getAllBitmapList();if(n.length){var i=n[0].$bounds,r=i.top,a=i.right,o=i.bottom,s=i.left,c=i.height,u=i.width;this.pointBackToCenter(s+u/2,r+c/2),this.areaZoomToView(s,r,a,o)}else this.$refs["viewport-info-modal"].show()},pointBackToCenter:function(t,e){var n=this.$spoke.getEditor("primary"),i=n.drawing,r=i.width,a=i.height,o=i.origin,s=r/2-t,c=a/2-e;i.setOrigin(o[0]+s,o[1]+c)},areaZoomToView:function(t,e,n,i){var r=this.$spoke.getEditor("primary"),a=r.drawing,o=a.width,s=a.height,c=a.scale,u=Math.abs(t-n),l=Math.abs(e-i),h=c*u/o,f=c*l/s;a.setScale(Math.ceil(Math.max(h,f)))}}},fe=he,de=Object(pt["a"])(fe,ue,le,!1,null,null,null),pe=de.exports,ve=(rt={},Object(bt["a"])(rt,xt,{id:xt,title:xt,icon:"cursor",click:function(t){t.tool.openSelector()},setting:Ft}),Object(bt["a"])(rt,$t,{id:$t,title:$t,icon:"arrows-move",click:function(t){t.tool.openTransformer()},setting:Wt}),Object(bt["a"])(rt,wt,{id:wt,title:wt,icon:"bricks",click:function(t){t.tool.openWallBuilder()},setting:zt}),Object(bt["a"])(rt,Ot,{id:Ot,title:Ot,icon:"grid1x2",click:function(t){t.tool.openChamber()},setting:qt}),Object(bt["a"])(rt,jt,{id:jt,title:jt,icon:"input-cursor",click:function(t){t.tool.openSpliter()},setting:ne}),Object(bt["a"])(rt,kt,{id:kt,title:kt,icon:"tags",click:function(t){t.tool.openLabel()},setting:ce}),Object(bt["a"])(rt,Tt,{id:Tt,title:Tt,icon:"search",click:function(t){t.tool.openViewport()},setting:pe}),rt),ge=Object.freeze([[xt,$t],[wt,Ot,jt],[kt],[Tt]]),me={data:function(){return{current:null,map:ve,group:ge}},mounted:function(){this.activeButton(xt)},methods:{activeButton:function(t){ve[t].click(this.$spoke.getEditor("primary")),this.current=t,this.$root.$emit("toolGroupChange",t)}}},ye=me,be=(n("d607"),Object(pt["a"])(ye,mt,yt,!1,null,null,null)),xe=be.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-absolute d-flex justify-content-center w-100",staticStyle:{top:"0",height:"0"}},[n(t.current,{tag:"component",staticClass:"border mt-1 position-absolute",staticStyle:{"background-color":"#FFF"}})],1)},we=[],Oe={name:"ToolGroupSetting",data:function(){return{current:""}},mounted:function(){var t=this;this.current=ve[xt].setting,this.$root.$on("toolGroupChange",(function(e){t.current=ve[e].setting}))}},je=Oe,ke=Object(pt["a"])(je,$e,we,!1,null,null,null),Te=ke.exports,Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button-toolbar",{staticClass:"text-light",attrs:{id:"app-bottom-container"}},[n("app-status-pointer-bar")],1)},Se=[],Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex align-items-center px-1",staticStyle:{"font-size":"12px"},attrs:{id:"app-status-pointer"}},[n("b-icon-cursor-fill"),n("div",[n("span",{staticClass:"px-1 d-inline-block text-right",staticStyle:{width:"3em"}},[t._v(t._s(t.x))]),t._v(","),n("span",{staticClass:"px-1 d-inline-block text-right",staticStyle:{width:"3em"}},[t._v(t._s(t.y))])])],1)},Le=[],Pe=(n("b65f"),{data:function(){return{x:0,y:0}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;n.on("pointermove",(function(e){t.x=Math.trunc(e.pointerX),t.y=Math.trunc(e.pointerY)}))}}),Fe=Pe,Ae=Object(pt["a"])(Fe,Ce,Le,!1,null,null,null),Ne=Ae.exports,_e={components:{AppStatusPointerBar:Ne}},De=_e,Re=(n("c6f4"),Object(pt["a"])(De,Ee,Se,!1,null,null,null)),We=Re.exports,Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"h-100",attrs:{"no-body":"",id:"app-feature-tabs"}},[n("b-card-header",{attrs:{"header-class":"px-1 py-1 border-bottom"}},[n("b-nav",{attrs:{"card-header":"",small:""}},t._l(t.idList,(function(e){return n("b-nav-item",{key:e,staticClass:"mr-1",attrs:{active:t.current===e,title:t.features[e].title},on:{click:function(n){t.current=e}}},[n("b-icon",{attrs:{icon:t.features[e].icon}})],1)})),1)],1),n("b-card-body",{staticClass:"p-0 flex-grow-1"},[n(t.currentFeature.component,{tag:"component",staticClass:"h-100",attrs:{floor:t.floorState}})],1)],1)},Ie=[],He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column",attrs:{id:"app-feature-overview-panel"}},t._l(t.itemList,(function(e,i){return n("b-card",{key:e,staticClass:"border-0 overflow-hidden",attrs:{"no-body":""}},[n("b-card-header",{attrs:{"header-class":"p-0"}},[n("b-button",{staticClass:"py-0 px-1 text-sm-left font-weight-bold app-collapse-button",attrs:{block:"",variant:"dark"},on:{click:function(e){return t.toggle(i)}}},[n("b-icon",{staticClass:"mr-1",attrs:{icon:t.visibleList[i]?"chevron-down":"chevron-right"}}),t._v(t._s(t.itemMap[e].title))],1)],1),n("b-collapse",{staticClass:"overflow-auto",model:{value:t.visibleList[i],callback:function(e){t.$set(t.visibleList,i,e)},expression:"visibleList[index]"}},[n(t.itemMap[e].component,{tag:"component"})],1)],1)})),1)},Be=[],Ve=(n("d81d"),n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{staticClass:"border-0",staticStyle:{"max-height":"500px"}},[t._l(t.roomList,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"p-1 border-0",attrs:{button:""}},[t._v(t._s(e.name))])})),n("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:0===t.roomList.length,expression:"roomList.length===0"}],staticClass:"p-1 border-0"},[t._v("No room")])],2)}),ze=[],Ue=n("0402"),Ye=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),new WeakMap),Ge=function(){return{name:"Untitled Room"}},Xe={data:function(){return{roomList:[],wallList:[],cornerList:[]}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.structure,r=this._listener=function(e){return t.pushRoom(e)};this.updateRoomList(i),i.on("room-created",r)},methods:{pushRoom:function(t){var e=Ge();Ye.set(e,t),this.roomList.push(e)},updateRoomList:function(t){var e,n=Object(Ue["a"])(t.rooms());try{for(n.s();!(e=n.n()).done;){var i=e.value;this.pushRoom(i)}}catch(r){n.e(r)}finally{n.f()}}},destroyed:function(){this.$spoke.getEditor("primary").drawing.structure.off("room-created",this._listener)}},Ke=Xe,qe=Object(pt["a"])(Ke,Ve,ze,!1,null,null,null),Je=qe.exports,Qe={id:"structure",title:"structure",component:Je},Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{staticClass:"border-0",staticStyle:{"max-height":"500px"}},[t._l(t.hollowList,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"p-1 border-0",attrs:{button:""}},[t._v(t._s(e.name))])})),n("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:0===t.hollowList.length,expression:"hollowList.length===0"}],staticClass:"p-1 border-0"},[t._v("No hollow")])],2)},tn=[],en=new WeakMap,nn=function(){return{name:"Untitled Hollow"}},rn={data:function(){return{hollowList:[]}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.windoor,r=this._listener=function(e){return t.pushHollow(e)};this.updateRoomList(i),i.on("hollow-created",r)},methods:{pushHollow:function(t){var e=nn();en.set(e,t),this.hollowList.push(e)},updateRoomList:function(t){var e,n=Object(Ue["a"])(t.hollows());try{for(n.s();!(e=n.n()).done;){var i=e.value;this.pushHollow(i)}}catch(r){n.e(r)}finally{n.f()}}},destroyed:function(){this.$spoke.getEditor("primary").drawing.structure.off("hollow-created",this._listener)}},an=rn,on=Object(pt["a"])(an,Ze,tn,!1,null,null,null),sn=on.exports,cn={id:"windoor",title:"window & door",component:sn},un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{staticClass:"border-0",staticStyle:{"max-height":"500px"}},[t._l(t.stuffList,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"p-1 border-0",attrs:{button:""}},[t._v(t._s(e.name))])})),n("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:0===t.stuffList.length,expression:"stuffList.length===0"}],staticClass:"p-1 border-0"},[t._v("No stuff")])],2)},ln=[],hn=new WeakMap,fn=function(){return{name:"Untitled stuff"}},dn={data:function(){return{stuffList:[]}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.furniture,r=this._listener=function(e){return t.pushStuff(e)};this.updateStuffList(i),i.on("stuff-created",r)},methods:{pushStuff:function(t){var e=fn();hn.set(e,t),this.stuffList.push(e)},updateStuffList:function(t){var e,n=Object(Ue["a"])(t.stuffs());try{for(n.s();!(e=n.n()).done;){var i=e.value;this.pushStuff(i)}}catch(r){n.e(r)}finally{n.f()}}},destroyed:function(){this.$spoke.getEditor("primary").drawing.structure.off("stuff-created",this._listener)}},pn=dn,vn=Object(pt["a"])(pn,un,ln,!1,null,null,null),gn=vn.exports,mn={id:"furniture",title:"furniture",component:gn},yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.labelListMap,(function(e,i){return n("b-list-group",{key:i,staticClass:"border-0",staticStyle:{"max-height":"500px"}},[t._l(e,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"p-1 border-0",attrs:{button:""}},[t._v(t._s(e.name))])})),n("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:0===e.length,expression:"list.length===0"}],staticClass:"p-1 border-0"},[t._v("No "+t._s(i)+" label")])],2)})),1)},bn=[],xn=new WeakMap,$n=function(t){return{name:"Untitled ".concat(t," label")}},wn={data:function(){return{labelListMap:{text:[],line:[]}}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.label,r={LabelText:"text",LabelLine:"line"},a=this._listener=function(e,n){t.pushLabel(e,r[n])};this.updateLabelList(i),i.on("element-created",a)},methods:{pushLabel:function(t,e){var n=$n(e);xn.set(n,t),this.labelListMap[e].push(n)},updateLabelList:function(t){var e={text:t.textLabels(),line:t.lineLabels()};for(var n in e){var i,r=Object(Ue["a"])(e[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.pushLabel(a,n)}}catch(o){r.e(o)}finally{r.f()}}}},destroyed:function(){this.$spoke.getEditor("primary").drawing.structure.off("element-created",this._listener)}},On=wn,jn=Object(pt["a"])(On,yn,bn,!1,null,null,null),kn=jn.exports,Tn={id:"label",title:"label",component:kn},En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{staticClass:"border-0",staticStyle:{"max-height":"500px"}},[t._l(t.dimensionList,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"p-1 border-0",attrs:{button:""}},[t._v(t._s(e.name))])})),n("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:0===t.dimensionList.length,expression:"dimensionList.length===0"}],staticClass:"p-1 border-0"},[t._v("No dimension")])],2)},Sn=[],Cn=new WeakMap,Ln=function(){return{name:"Untitled dimension"}},Pn={data:function(){return{dimensionList:[]}},mounted:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.measure,r=this._listener=function(e){return t.pushDimension(e)};this.updateDimensionList(i),i.on("dimension-created",r)},methods:{pushDimension:function(t){var e=Ln();Cn.set(e,t),this.dimensionList.push(e)},updateDimensionList:function(t){var e,n=Object(Ue["a"])(t.dimensions());try{for(n.s();!(e=n.n()).done;){var i=e.value;this.pushDimension(i)}}catch(r){n.e(r)}finally{n.f()}}},destroyed:function(){this.$spoke.getEditor("primary").drawing.structure.off("dimension-created",this._listener)}},Fn=Pn,An=Object(pt["a"])(Fn,En,Sn,!1,null,null,null),Nn=An.exports,_n={id:"dimension",title:"dimensions",component:Nn},Dn=(at={},Object(bt["a"])(at,Qe.id,Qe),Object(bt["a"])(at,cn.id,cn),Object(bt["a"])(at,mn.id,mn),Object(bt["a"])(at,Tn.id,Tn),Object(bt["a"])(at,_n.id,_n),at),Rn=[Qe.id,cn.id,mn.id,Tn.id,_n.id],Wn={data:function(){return{visibleList:Rn.map((function(){return!0})),itemList:Rn.slice(0)}},computed:{itemMap:function(){return Dn}},methods:{toggle:function(t){this.$set(this.visibleList,t,!this.visibleList[t])}}},Mn=Wn,In=(n("d1d1"),Object(pt["a"])(Mn,He,Be,!1,null,null,null)),Hn=In.exports,Bn={id:"overview",icon:"list-stars",title:"Element Overview",component:Hn},Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-group",{staticClass:"mb-1"},[n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.addFloor}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"arrow-bar-up"}}),t._v("向上新建")],1),n("b-button",{staticClass:"app-collapse-button",on:{click:t.addBasement}},[n("b-icon",{staticClass:"mr-2",attrs:{icon:"arrow-bar-down"}}),t._v("向下新建")],1)],1),n("b-list-group",t._l(t.floorList,(function(e,i){return n("b-list-group-item",{key:i,staticClass:"pl-2 pr-1 py-0 border-0",attrs:{active:i===t.activeFloor,button:""},on:{click:function(e){return t.changeFloor(i)}}},[n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",{staticClass:"app-text-tiny"},[n("span",{staticClass:"mr-3"},[t._v(t._s(e.name))]),n("span",[t._v(t._s(e.alias))])]),n("div",[n("b-button",{staticClass:"p-1",attrs:{variant:"link"},on:{click:function(e){return e.stopPropagation(),t.openNameModal(i)}}},[n("b-icon-pen",{class:{"text-white":i===t.activeFloor}})],1),e.isFirst?t._e():n("b-button",{staticClass:"p-1",attrs:{variant:"link"},on:{click:function(e){return e.stopPropagation(),t.deleteFloor(i)}}},[n("b-icon-trash",{class:{"text-white":i===t.activeFloor}})],1)],1)])])})),1),n("b-modal",{ref:"floor-name-modal",attrs:{size:"sm","hide-footer":"",title:"楼层名称"}},[n("div",{staticClass:"d-block text-center"},[n("b-form-input",{attrs:{placeholder:"请输入楼层名称"},model:{value:t.floorName,callback:function(e){t.floorName=e},expression:"floorName"}}),n("b-button",{staticClass:"mt-3",attrs:{variant:"info",block:""},on:{click:t.changeFloorName}},[t._v("确定")])],1)])],1)},zn=[],Un=(n("c740"),n("a434"),n("7db0"),{name:"FeatureFloor",props:["floor"],data:function(){return{activeFloor:this.floor.currentFloor,floorName:"",floorNameIndex:0}},computed:{floorList:function(){var t=this.floor.floorList,e=t.findIndex((function(t){return t.isFirst}));return t.map((function(t,n){var i=n>e?"负".concat(n-e,"层"):"".concat(e-n+1,"层");return{name:i,alias:t.floorName,isFirst:t.isFirst}}))}},methods:{addFloor:function(){var t=this.$spoke.getEditor("primary"),e=this.floor.floorList;t.tool.closeAllTool();var n=0===this.activeFloor?t.serializer.execute():e[0],i={floorName:"未命名",isFirst:!1,cornerList:n.cornerList,wallList:n.wallList,hollowList:n.hollowList};e[this.activeFloor]=this.mixinFloorData(t.floor.changeFloor(i)),e.unshift(i),this.changeActiveFloor(0)},addBasement:function(){var t=this.$spoke.getEditor("primary"),e=this.floor.floorList;t.tool.closeAllTool();var n=this.activeFloor===e.length-1?t.serializer.execute():e[e.length-1],i={floorName:"未命名",isFirst:!1,cornerList:n.cornerList,wallList:n.wallList,hollowList:n.hollowList};e[this.activeFloor]=this.mixinFloorData(t.floor.changeFloor(i)),e.push(i),this.changeActiveFloor(e.length-1)},changeFloor:function(t){if(t!==this.activeFloor){var e=this.$spoke.getEditor("primary"),n=this.floor,i=n.floorList,r=n.currentFloor;e.tool.closeAllTool(),i[r]=this.mixinFloorData(e.floor.changeFloor(i[t])),this.changeActiveFloor(t)}},deleteFloor:function(t){var e=this.$spoke.getEditor("primary"),n=this.floor.floorList;if(e.tool.closeAllTool(),n.splice(t,1),t===this.activeFloor){var i=n.find((function(t){return t.isFirst})),r=n.findIndex((function(t){return t.isFirst}));e.floor.changeFloor(i),this.changeActiveFloor(r)}else t<this.activeFloor&&this.changeActiveFloor(this.activeFloor-1)},openNameModal:function(t){var e=this.floor.floorList;this.floorName=e[t].floorName,this.floorNameIndex=t,this.$refs["floor-name-modal"].show()},changeFloorName:function(){var t=this.floor.floorList,e=t[this.floorNameIndex];this.floorName?e.floorName=this.floorName:e.floorName="未命名",this.$set(t,this.floorNameIndex,e),this.$refs["floor-name-modal"].hide()},changeActiveFloor:function(t){this.activeFloor=t,this.floor.currentFloor=t},mixinFloorData:function(t){var e=this.floor,n=e.floorList,i=e.currentFloor,r=n[i];return Object.assign(t,{floorName:r.floorName,isFirst:r.isFirst}),t}}}),Yn=Un,Gn=Object(pt["a"])(Yn,Vn,zn,!1,null,null,null),Xn=Gn.exports,Kn={id:"floor",icon:"ladder",title:"Floor Manager",component:Xn},qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1 app-text-tiny",attrs:{id:"app-feature-property-panel"}},[n("b-form-group",{attrs:{label:"Orientation"}},[n("b-input",{staticClass:"app-text-tiny w-50",attrs:{type:"number",max:"360",min:"-360",autocomplete:"off"},model:{value:t.orientation,callback:function(e){t.orientation=t._n(e)},expression:"orientation"}})],1)],1)},Jn=[],Qn=function(t){return t/Math.PI/2*360},Zn=function(t){return t/360*2*Math.PI},ti={data:function(){return{orientation:0}},watch:{orientation:function(t){var e=this.$spoke.getEditor("primary"),n=e.drawing,i=Zn(t);n.compass.setRotation(i)}},mounted:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;this.orientation=Qn(e.compass.rotation)},destroyed:function(){this.$emit("close")}},ei=ti,ni=Object(pt["a"])(ei,qn,Jn,!1,null,null,null),ii=ni.exports,ri={id:"property",icon:"gear",title:"Drawing Properties",component:ii},ai=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.component,expression:"!component"}],staticClass:"px-1"},[t._v("请选择元素")]),n(t.component,{tag:"component"})],1)},oi=[],si=(n("4ec9"),n("159b"),n("ac84")),ci=n("2d58"),ui=n("0bd7"),li=(n("99af"),n("caad"),n("2532"),n("07ac"),n("3338")),hi=Math,fi=hi.PI,di=2*fi,pi=[0,0,1,0],vi=function(t,e,n,i){return pi[0]=t,pi[1]=e,pi[2]=n,pi[3]=i,pi},gi=[0,0],mi=function(t,e){return gi[0]=t,gi[1]=e,gi},yi=[0,0,0,0],bi=function(t,e,n,i){return yi[0]=t,yi[1]=e,yi[2]=n,yi[3]=i,yi},xi=[0,0],$i=function(t,e){return xi[0]=t,xi[1]=e,xi},wi=function(t,e,n,i){return $i(t+n,e+i)},Oi=function(t,e,n,i){return mi(n-t,i-e)},ji=Oi,ki=Oi,Ti=function(t,e,n,i){return t*n+e*i},Ei=function(t,e,n){return mi(t*n,e*n)},Si=function(t,e,n,i){return t*i-e*n},Ci=function(t,e){return li["c"].sqrt(Ti(t,e,t,e))},Li=function(t,e){return mi(-e,t)},Pi=function(t,e){var n=Ci(t,e);return 0===n&&li["b"].throwError("Zero Vector CAN NOT be normalized."),mi(t/n,e/n)},Fi=function(t,e){return mi(-t,-e)},Ai=function(t,e,n){var i=li["c"].cos(n),r=li["c"].sin(n);return mi(t*i-e*r,t*r+e*i)},Ni=function(t,e,n,i){var r=Pi(n,i);return Ei.apply(void 0,Object(ui["a"])(r).concat([Ti.apply(void 0,[t,e].concat(Object(ui["a"])(r)))]))},_i=1e-6,Di=function(t){_i=t},Ri=function(t){return t<_i&&t>-_i},Wi=function(t,e){var n=t-e;return n<_i&&n>-_i},Mi=function(t,e){return t-e>_i},Ii=function(t,e){return t-e>-_i},Hi=function(t,e){return t-e<-_i},Bi=function(t,e){return t-e<_i},Vi=function(t,e,n,i,r,o){return Mi(Si.apply(a,Object(ui["a"])(Oi(n,i,r,o)).concat(Object(ui["a"])(Oi(r,o,t,e)))),0)},zi=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Oi(i,r,t,e);return wi.apply(void 0,Object(ui["a"])(Ai.apply(a,Object(ui["a"])(o).concat([n]))).concat([i,r]))},Ui=function(t,e,n,i,r,o){if(ir(t,e,n,i))return $i(t,e);var s=Oi(t,e,n,i);return Ri(Si.apply(a,Object(ui["a"])(s).concat([r,o])))?$i(n,i):wi.apply(void 0,[t,e].concat(Object(ui["a"])(Ni.apply(a,Object(ui["a"])(s).concat([r,o])))))},Yi=function(t,e,n,i){return Ci.apply(a,Object(ui["a"])(Oi(t,e,n,i)))},Gi=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Yi.apply(void 0,[t,e].concat(Object(ui["a"])(Ui.apply(void 0,[t,e].concat(i)))))},Xi=function(t,e,n,i){var o=ji(t,e,n,i),s=Li.apply(a,Object(ui["a"])(Pi.apply(a,Object(ui["a"])(o)))),c=Ti.apply(a,Object(ui["a"])(s).concat([t,e])),u=Hi(c,0)?s:Fi.apply(a,Object(ui["a"])(s));return vi.apply(r,[t,e].concat(Object(ui["a"])(u)))},Ki=[0,0,0],qi=0,Ji=1,Qi=2,Zi=function(t,e,n,i){return Ki[qi]=n,Ki[Ji]=i,Ki[Qi]=Ti(n,i,t,e),Ki},tr=n("26a3"),er=function(t,e,n,i,r,a,o,s){var c=Zi(t,e,n,i),u=Object(tr["a"])(c,3),l=u[0],h=u[1],f=u[2],d=Zi(r,a,o,s),p=Object(tr["a"])(d,3),v=p[0],g=p[1],m=p[2],y=l*g-h*v,b=f*g-h*m,x=l*m-f*v;return Ri(y)?null:Ri(h)?$i(f/l,x/y):Ri(g)?$i(m/v,x/y):Ri(l)?$i(b/y,f/h):Ri(v)?$i(b/y,m/g):$i(b/y,x/y)},nr=function(t,e,n,i,r,a){return Gi.apply(void 0,[t,e].concat(Object(ui["a"])(Xi(n,i,r,a))))},ir=function(t,e,n,i){return Wi(t,n)&&Wi(e,i)},rr=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(n?1:-1)*(t-e);return i>=0?i:i+di},ar=function(t,e,n,i,r,a){return(t-r)*(i-a)-(e-a)*(n-r)},or=function(t,e,n,i,r,a,o,s){var c=ar(t,e,n,i,r,a),u=ar(t,e,n,i,o,s);if(Ii(c*u,0))return null;var l=ar(r,a,o,s,t,e),h=l+c-u;if(Ii(l*h,0))return null;var f=l/(u-c);return $i(t+f*(n-t),e+f*(i-e))},sr=function(t,e,n,i,r,a){return bi(t+r,e+a,n+r,i+a)},cr=function(t,e,n,i){return $i((t+n)/2,(e+i)/2)},ur=function(t,e){for(var n=!1,i=t.length,r=0,a=i-1;r<i;a=r++){var o=t[r],s=t[a],c=o.y>e.y!==s.y>e.y&&e.x<(e.y-o.y)/(s.y-o.y)*(s.x-o.x)+o.x;c&&(n=!n)}return n},lr=function(){for(var t=arguments.length/2,e=0,n=0;n<t;n++){var i=(n+1)%t;e+=Si(2*n<0||arguments.length<=2*n?void 0:arguments[2*n],2*n+1<0||arguments.length<=2*n+1?void 0:arguments[2*n+1],2*i<0||arguments.length<=2*i?void 0:arguments[2*i],2*i+1<0||arguments.length<=2*i+1?void 0:arguments[2*i+1])}return e/2},hr=Object(ci["a"])((function t(e,n){Object(si["a"])(this,t),this.x=e,this.y=n,this.incidentEdge=null})),fr=Object(ci["a"])((function t(){Object(si["a"])(this,t),this.origin=null,this.twin=null,this.incidentFace=null,this.next=null,this.previous=null})),dr=Object(ci["a"])((function t(){Object(si["a"])(this,t),this.outerComponent=null,this.innerComponents=[]})),pr=(n("96cf"),9999),vr=regeneratorRuntime.mark(gr);function gr(t){var e,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e=t.incidentEdge,!li["g"].Not.Null(e)){r.next=8;break}n=e,i=0;case 3:return r.next=5,n;case 5:n=n.twin.next,i++;case 7:if(n!==e&&i<pr){r.next=3;break}case 8:case"end":return r.stop()}}),vr)}var mr=regeneratorRuntime.mark(yr);function yr(t){var e,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e=t,n=0;case 1:return i.next=3,e;case 3:e=e.next,n++;case 5:if(e!==t&&n<pr){i.next=1;break}case 6:case"end":return i.stop()}}),mr)}var br=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new hr(t,e)},xr=function(t){var e,n=[],i=Object(Ue["a"])(gr(t));try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n},$r=function(t){return li["g"].isNull(t.incidentEdge)},wr=function(t){return!$r(t)&&t.incidentEdge===t.incidentEdge.twin.next},Or=function(t){var e=t.origin,n=e.x,i=e.y,r=t.twin.origin,a=r.x,o=r.y;return Math.atan2(o-i,a-n)},jr=function(t,e){var n,i=Object(Ue["a"])(yr(t));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r===e)return!0}}catch(a){i.e(a)}finally{i.f()}return!1},kr=function(t,e){var n,i=Object(Ue["a"])(yr(t));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.origin===e)return!0}}catch(a){i.e(a)}finally{i.f()}return!1},Tr=function(t){return jr(t,t.twin)},Er=function(t){var e,n=[],i=Object(Ue["a"])(yr(t));try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n},Sr=(n("aff5"),n("a9e3"),function(t){var e,n,i=null,r=-1/0;e=n=Number.MAX_SAFE_INTEGER;var a,o=Object(Ue["a"])(yr(t));try{for(o.s();!(a=o.n()).done;){var s=a.value,c=s.origin,u=c.x,l=c.y,h=s.next.origin,f=h.x,d=h.y,p=(d-l)/(f-u);(u<e||u===e&&l<n||u===e&&l===n&&p>r)&&(e=u,n=l,r=p,i=s)}}catch(v){o.e(v)}finally{o.f()}return i}),Cr=function(t){var e=Sr(t),n=e.previous.twin;return n!==e&&rr(Or(n),Or(e))<Math.PI},Lr=function(t){return!Cr(t)},Pr=function(t,e){var n=t,i=n.twin,r=new fr,a=new fr;e.incidentEdge=r,r.origin=a.origin=e,r.incidentFace=n.incidentFace,a.incidentFace=i.incidentFace,r.twin=i,i.twin=r,a.twin=n,n.twin=a;var o=n.next,s=i.next;return r.next=o,n.next=r,r.previous=n,o.previous=r,a.next=s,i.next=a,a.previous=i,s.previous=a,r},Fr=function(t){return t.origin},Ar=function(t){var e=t.outerComponent;return li["g"].isNull(e)?[]:Er(e).map(Fr)},Nr=function(t,e,n){var i=t.twin.incidentFace;e.includes(i)||(e.push(i),n.push(i))},_r=function(t){var e,n=[t],i=[],r=Object(Ue["a"])(t.innerComponents);try{for(r.s();!(e=r.n()).done;){var a,o=e.value,s=Object(Ue["a"])(yr(o));try{for(s.s();!(a=s.n()).done;){var c=a.value;Nr(c,n,i)}}catch(v){s.e(v)}finally{s.f()}while(i.length){var u,l=Object(Ue["a"])(i.splice(0));try{for(l.s();!(u=l.n()).done;){var h,f=u.value,d=Object(Ue["a"])(yr(f.outerComponent));try{for(d.s();!(h=d.n()).done;){var p=h.value;Nr(p,n,i)}}catch(v){d.e(v)}finally{d.f()}}}catch(v){l.e(v)}finally{l.f()}}}}catch(v){r.e(v)}finally{r.f()}return n.shift(),n},Dr=function t(e,n){var i=!!li["g"].isNull(e.outerComponent)||ur(Ar(e),n);if(i){var r,a=Object(Ue["a"])(_r(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=t(o,n);if(li["g"].Not.Null(s))return s}}catch(c){a.e(c)}finally{a.f()}return e}return null},Rr=function(){return new dr},Wr=function(t){li["g"].Not.String(t)&&li["b"].Throw.TypeError("Invalid event `type`, a string expected.")},Mr=function(t){li["g"].Not.Function(t)&&li["b"].Throw.TypeError("In valid event `listener`, a function expected.")},Ir=function(t,e){li["g"].Not.Number(t)&&li["b"].Throw.TypeError("Invalid `".concat(e,"`, a number excepted."))},Hr=function(t,e){Ir(t),Ir(e)},Br=new WeakMap,Vr=function(t){return Br.get(t)},zr=function(){function t(e){Object(si["a"])(this,t),Br.set(this,e)}return Object(ci["a"])(t,[{key:"on",value:function(t,e){return Wr(t),Mr(e),Vr(this).$on(t,e),this}},{key:"off",value:function(t,e){return Wr(t),Mr(e),Vr(this).$off(t,e),this}}]),t}(),Ur=n("a007"),Yr=n("e3fc"),Gr=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){return Object(si["a"])(this,n),e.call(this,t)}return Object(ci["a"])(n,[{key:"$bounds",get:function(){return Vr(this).$getBounds()}}]),n}(zr),Xr=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"options",get:function(){return Vr(this).$options}},{key:"setOptions",value:function(){}}]),n}(zr),Kr=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"$reset",value:function(){Vr(this).$reset()}},{key:"$state",get:function(){return Vr(this).$state}}]),n}(zr),qr=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(Kr),i=Object(Ue["a"])(e);try{var r=function(){var e=t.value;n.prototype[e]=function(){return Vr(this)[e](),this}};for(i.s();!(t=i.n()).done;)r()}catch(a){i.e(a)}finally{i.f()}return n},Jr=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=new t(this);return e?Object.freeze(n):n}},Qr=n("a34f");function Zr(){this.forceUpdateAll()}var ta=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qr["a"](t,e,Zr)},ea=n("c20e"),na=n("4743"),ia=n("dcb4"),ra=(n("b0c0"),n("4e82"),n("3a02")),aa=n("493b"),oa=(n("6062"),n("af93"),m.define()),sa=m.define({capture:!0,autoResizing:!0},{snap:m.define({enable:!0,interval:20}),scale:m.define({max:100,min:1}),style:m.define({backgroundColor:{value:15790320,set:function(t){this.application.renderer.backgroundColor=t}},backgroundOpacity:{value:1,set:function(t){this.application.renderer.backgroundAlpha=t}},fontSize:12}),plugin:oa}),ca=function(t,e){var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n].call(this)}})};for(var i in e)n(i)},ua=function(t,e){var n=function(n){var i=e[n];t[n]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.call.apply(i,[this].concat(e))}};for(var i in e)n(i)},la=new WeakMap,ha=function(t){return la.get(t)},fa=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;return Object(si["a"])(this,n),i=e.call(this),i.context=null,i.drawing=t,i.elementCollectionMap={},i}return Object(ci["a"])(n,[{key:"forceUpdate",value:function(){for(var t in this.elementCollectionMap){var e,n=Object(Ue["a"])(this.elementCollectionMap[t]);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.setDirty()}}catch(r){n.e(r)}finally{n.f()}}}}]),n}(ia["a"].Emitter),da=fa,pa=(n("a630"),function(t){li["g"].Not.String(t)&&li["b"].Throw.TypeError("Invalid `className`, a string excepted.")}),va=function(){function t(e,n){Object(si["a"])(this,t),this.$id=e,this.$version=n,this.$proxy=this,this.$data=li["e"].freeze({})}return Object(ci["a"])(t,[{key:"$drawing",get:function(){return ha(this).drawing.proxy}},{key:"$elements",value:regeneratorRuntime.mark((function t(e){var n,i,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:pa(e),n=ha(this).elementCollectionMap[e],li["g"].isUndefined(n)&&li["b"].throwError("The Element named `".concat(e,"` is NOT existed in this Plugin.")),i=Object(Ue["a"])(n.values()),t.prev=4,i.s();case 6:if((r=i.n()).done){t.next=12;break}return a=r.value,t.next=10,a.context;case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](4),i.e(t.t0);case 17:return t.prev=17,i.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[4,14,17,20]])}))},{key:"$getElementList",value:function(t){return Array.from(this.$elements(t))}},{key:"$hideElement",value:function(t){var e,n=Object(Ue["a"])(this.$elements(t));try{for(n.s();!(e=n.n()).done;){var i=e.value;i.hide()}}catch(r){n.e(r)}finally{n.f()}}},{key:"$showElement",value:function(t){var e,n=Object(Ue["a"])(this.$elements(t));try{for(n.s();!(e=n.n()).done;){var i=e.value;i.show()}}catch(r){n.e(r)}finally{n.f()}}},{key:"$hideAll",value:function(){for(var t in ha(this).elementCollectionMap)this.$hideElement(t)}},{key:"$showAll",value:function(){for(var t in ha(this).elementCollectionMap)this.$showElement(t)}},{key:"$forceUpdate",value:function(){ha(this).forceUpdate()}},{key:"$toCanvas",value:function(t,e){return v.Point(t,e),ha(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return v.Point(t,e),ha(this).drawing.coordinate.toGeometry(t,e)}},{key:"$on",value:function(t,e){return v.EventType(t),v.EventListener(e),ha(this).on(t,e),this}},{key:"$off",value:function(t,e){return v.EventType(t),v.EventListener(e),ha(this).off(t,e),this}},{key:"$emit",value:function(t){var e;v.EventType(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=ha(this)).emit.apply(e,[t].concat(i)),this}}]),t}(),ga=function(t,e,n,i,r){oa.appendChild(t,n.options);var a=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var r;for(var a in Object(si["a"])(this,n),r=e.call(this,t),i)r.elementCollectionMap[a]=new Set;return la.set(r.context=new o,Object(ea["a"])(r)),r}return Object(ci["a"])(n)}(da),o=function(a){Object(Ur["a"])(s,a);var o=Object(Yr["a"])(s);function s(){var i;return Object(si["a"])(this,s),i=o.call(this,t,e),i.$proxy=n.proxy.call(Object(ea["a"])(i)),i.$data=li["e"].seal(n.data()),li["e"].freeze(Object(ea["a"])(i)),i}return Object(ci["a"])(s,[{key:"$options",get:function(){return this.$drawing.options.plugin[t]}},{key:"$createElement",value:function(t){pa(t);var e=i[t].Element;li["g"].isUndefined(e)&&li["b"].throwError("The Element named `".concat(t,"` is NOT existed."));for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=Object(aa["a"])(e,[ha(this)].concat(r)).context;return this.$emit("element-created",o.$proxy,t),o}},{key:"$createTool",value:function(t){var e=r[t];li["g"].isUndefined(e)&&li["b"].throwError("The Element named `".concat(t,"` is NOT existed."));var n=new e(this),i=n.context;return i.$proxy}}]),s}(va);return ua(o.prototype,n.methods),ca(o.prototype,n.getters),a},ma=n("e5cd"),ya=n("0384"),ba=new Set,xa=new ra["Container"],$a=new WeakMap,wa=function(t){return $a.get(t)},Oa=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;return Object(si["a"])(this,n),i=e.call(this),i.plugin=t,i.context=null,i.graphics=null,i.isDirty=!1,i._update=li["d"],i.destroyed=!1,i.collection.add(Object(ea["a"])(i)),i}return Object(ci["a"])(n,[{key:"renderable",get:function(){return!1}},{key:"interactive",get:function(){return!1}},{key:"hoverable",get:function(){return!1}},{key:"focusable",get:function(){return!1}},{key:"selectable",get:function(){return!1}},{key:"draggable",get:function(){return!1}},{key:"drawing",get:function(){return this.plugin.drawing}},{key:"selecting",get:function(){return this.drawing.state.selecting===this}},{key:"hovering",get:function(){return this.drawing.state.hovering===this}},{key:"holding",get:function(){return this.drawing.state.holding===this}},{key:"focusing",get:function(){return this.drawing.state.focusing===this}},{key:"hover",value:function(){li["g"].isNull(this.drawing.state.holding)&&(this.drawing.setHovering(this),this.setDirty())}},{key:"cancelHover",value:function(){this.drawing.setHovering(),this.setDirty()}},{key:"focus",value:function(){var t=this.drawing.state.focusing;t!==this&&(this.drawing.setFocusing(this),ja(this,"focus"),this.setDirty())}},{key:"emitBlur",value:function(){ja(this,"blur"),this.setDirty()}},{key:"hold",value:function(){this.drawing.setHolding(this),this.setDirty()}},{key:"release",value:function(){this.drawing.setHolding(),this.setDirty()}},{key:"group",get:function(){return xa}},{key:"application",get:function(){return this.drawing.application}},{key:"collection",get:function(){return ba}},{key:"show",value:function(){this.graphics.visible=!0,this.setDirty()}},{key:"hide",value:function(){this.graphics.visible=!1,this.setDirty()}},{key:"setDirty",value:function(){this.destroyed||this.isDirty||(this.drawing.observer.setDirty(),this.isDirty=!0,ja(this,"dirty"))}},{key:"getBounds",value:function(){return this.graphics.getBounds()}},{key:"update",value:function(){this.isDirty&&(this.isDirty=!1,this.graphics.clear(),this.graphics.visible&&(this._update(this.graphics),ja(this,"render")))}},{key:"destroy",value:function(){li["g"].Not.Null(this.graphics)&&(this.hovering&&this.drawing.setHovering(),this.focusing&&this.drawing.setFocusing(),this.holding&&this.drawing.setHolding(),this.graphics.destroy(),this.drawing.observer.cancel(this.observer)),this.collection.delete(this),this.destroyed=!0,ja(this,"destroy"),ia["a"].destroy(this)}}]),n}(ia["a"].Emitter),ja=function(t,e){t.emit(e,t.drawing.globalEvent.accessor)},ka=Oa,Ta=li["e"].freeze({}),Ea=function(){function t(){Object(si["a"])(this,t),this.$proxy=this,this.$state=Ta}return Object(ci["a"])(t,[{key:"$graphics",get:function(){return wa(this).graphics}},{key:"$data",get:function(){return wa(this).plugin.context.$data}},{key:"$drawing",get:function(){return wa(this).drawing.proxy}},{key:"$selecting",get:function(){return wa(this).selecting}},{key:"$focusing",get:function(){return wa(this).focusing}},{key:"$hovering",get:function(){return wa(this).hovering}},{key:"$holding",get:function(){return wa(this).holding}},{key:"$visible",get:function(){return wa(this).graphics.visible}},{key:"$isDirty",get:function(){return wa(this).isDirty}},{key:"$getBounds",value:function(){return wa(this).getBounds()}},{key:"$show",value:function(){wa(this).show()}},{key:"$hide",value:function(){wa(this).hide()}},{key:"$setDirty",value:function(){wa(this).setDirty()}},{key:"$destroy",value:function(){wa(this).destroy()}},{key:"$on",value:function(t,e){return v.EventType(t),v.EventListener(e),wa(this).on(t,e),this}},{key:"$off",value:function(t,e){return v.EventType(t),v.EventListener(e),wa(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=wa(this)).emit.apply(e,[t].concat(i)),this}},{key:"$focus",value:function(){var t=wa(this);t.focusable&&t.focus()}},{key:"$toCanvas",value:function(t,e){return v.Point(t,e),wa(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return v.Point(t,e),wa(this).drawing.coordinate.toGeometry(t,e)}}]),t}(),Sa=Ea,Ca=["pointermove","pointerdown","pointerup","pointerover","pointerout"],La=function(t,e){var n=li["g"].Not.Null(e.render),i=function(i){Object(Ur["a"])(o,i);var a=Object(Yr["a"])(o);function o(i){var s,c;Object(si["a"])(this,o),c=a.call(this,i);var u=new r;if(n){var l=new ra["Graphics"];c.observer=function(){return c.update()},c.drawing.observer.add(c.observer),c.group.addChild(l),c.graphics=l,c.graphics.name=t,c.graphics.interactive=e.interative,e.interative&&(Ca.forEach((function(t){l.on("".concat(t),(function(t){c.drawing.globalEvent.current=t}))})),l.on("pointermove",(function(){return ja(Object(ea["a"])(c),"pointermove")})).on("pointerover",(function(){return ja(Object(ea["a"])(c),"pointerover")})).on("pointerout",(function(){return ja(Object(ea["a"])(c),"pointerout")})).on("pointerdown",(function(){return ja(Object(ea["a"])(c),"pointerdown")})).on("pointerup",(function(){return ja(Object(ea["a"])(c),"pointerup")})),e.hoverable&&l.on("pointerover",(function(){return c.hover()})).on("pointerout",(function(){return c.cancelHover()})),e.draggable&&l.on("pointerdown",(function(){return c.hold()})).on("pointerup",(function(){return c.release()})),e.focusable&&l.on("pointerdown",(function(){return c.focus()}))),c._update=e.render.bind(u)}c.context=u,$a.set(u,Object(ea["a"])(c));for(var h=arguments.length,f=new Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];return(s=e.created).call.apply(s,[u].concat(f)),c.setDirty(),c}return Object(ci["a"])(o,[{key:"renderable",get:function(){return n}},{key:"interactive",get:function(){return this.renderable&&e.interative}},{key:"hoverable",get:function(){return this.interactive&&e.hoverable}},{key:"focusable",get:function(){return this.interactive&&e.focusable}},{key:"selectable",get:function(){return this.interactive&&e.selectable}},{key:"draggable",get:function(){return this.interactive&&e.draggable}},{key:"group",get:function(){return this.plugin.drawing.groupMap.get(o)}},{key:"collection",get:function(){return this.plugin.elementCollectionMap[t]}}]),o}(ka),r=function(n){Object(Ur["a"])(r,n);var i=Object(Yr["a"])(r);function r(){var t;return Object(si["a"])(this,r),t=i.call(this),t.$proxy=e.proxy.call(Object(ea["a"])(t)),t.$state=li["e"].seal(e.state.call(Object(ea["a"])(t))),li["e"].freeze(Object(ea["a"])(t)),t}return Object(ci["a"])(r,[{key:"$name",get:function(){return t}},{key:"$data",get:function(){return this.$plugin.$data}},{key:"$plugin",get:function(){return wa(this).plugin.context}},{key:"$destroy",value:function(){Object(ma["a"])(Object(ya["a"])(r.prototype),"$destroy",this).call(this),e.destroy.call(this)}}]),r}(Sa);return ca(r.prototype,e.getters),ua(r.prototype,e.methods),i},Pa=(n("a4d3"),n("e01a"),new WeakMap),Fa=function(t){return Pa.get(t)},Aa=Symbol("TOOL_READY"),Na=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){var t;return Object(si["a"])(this,n),t=e.call(this),t.plugin=null,t.context=null,t.busy=!1,t.state=Aa,t.eventQueue=[],t}return Object(ci["a"])(n,[{key:"reset",value:function(){this.context.$reset(),this.emit("reset"),this.setIdle(Aa)}},{key:"setBusy",value:function(){this.busy=!0}},{key:"setIdle",value:function(t){this.busy=!1,this.state=t;var e=this.eventQueue;while(e.length){var i;(i=Object(ma["a"])(Object(ya["a"])(n.prototype),"emit",this)).call.apply(i,[this].concat(Object(ui["a"])(e.pop())))}}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r;this.busy?this.eventQueue.push(e):(r=Object(ma["a"])(Object(ya["a"])(n.prototype),"emit",this)).call.apply(r,[this].concat(e));return this}}]),n}(ia["a"].Emitter),_a=Na,Da=function(){function t(){Object(si["a"])(this,t)}return Object(ci["a"])(t,[{key:"$state",get:function(){return Fa(this).state}},{key:"$plugin",get:function(){return Fa(this).plugin}},{key:"$on",value:function(t,e){return v.EventType(t),v.EventListener(e),Fa(this).on(t,e),this}},{key:"$off",value:function(t,e){return v.EventType(t),v.EventListener(e),Fa(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=Fa(this)).emit.apply(e,[t].concat(i)),this}}]),t}(),Ra=function(t,e){var n=e.data,i=e.actions,r=e.states,a=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;return Object(si["a"])(this,n),i=e.call(this,t),i.plugin=t,i.context=new o(Object(ea["a"])(i)),t.$drawing.appendTool(Object(ea["a"])(i)),i}return Object(ci["a"])(n)}(_a),o=function(i){Object(Ur["a"])(a,i);var r=Object(Yr["a"])(a);function a(t){var i;return Object(si["a"])(this,a),i=r.call(this),Pa.set(Object(ea["a"])(i),t),i.$proxy=e.proxy.call(Object(ea["a"])(i)),i.$data=li["e"].seal(n.call(Object(ea["a"])(i),t.plugin)),li["e"].freeze(Object(ea["a"])(i)),i}return Object(ci["a"])(a,[{key:"$name",get:function(){return t}},{key:"$reset",value:function(){e.reset.call(this),Fa(this).state=Aa}}]),a}(Da),s=function(t){var e,n=i[t],a={},s=Object(Ue["a"])(n);try{for(s.s();!(e=s.n()).done;){var c=Object(tr["a"])(e.value,3),u=c[0],l=c[1],h=c[2];a[u]={handler:l,target:h,source:u}}}catch(f){s.e(f)}finally{s.f()}o.prototype[t]=function(){var e=Fa(this);e.busy&&li["b"].throwError("It could NOT call an action during another action.");var n=a[this.$state];li["g"].isUndefined(n)&&li["b"].throwError(".".concat(t," can NOT be called from state(=").concat(String(this.$state),")."));var i=n.handler,o=n.target,s=n.source;return r[s].leave.call(this),e.setBusy(),i.call(this),r[o].entry.call(this),e.setIdle(o),this}};for(var c in i)s(c);var u=function(t){var n=e.methods[t];o.prototype[t]=function(){for(var t=this.$state,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var a=n.call.apply(n,[this].concat(i));return this.$state!==t&&li["b"].throwError("A normal method could NOT be used to transit state."),a}};for(var l in e.methods)u(l);return a},Wa=function(){return{}},Ma=function(t){var e={data:Wa,created:li["d"],methods:{},getters:{},proxy:function(){return this},options:m.define()},n=t.data,i=void 0===n?e.data:n,r=t.created,a=void 0===r?e.created:r,o=t.methods,s=void 0===o?e.methods:o,c=t.getters,u=void 0===c?e.getters:c,l=t.proxy,h=void 0===l?e.proxy:l,f=t.options,d=void 0===f?e.options:f;for(var p in li["g"].Not.Function(i)&&li["b"].Throw.TypeError("Invalid `.data`, a function as constructor expected."),li["g"].Not.Function(a)&&li["b"].Throw.TypeError("Invalid `.created`, a function expected."),li["g"].Not.Object(s)&&li["b"].Throw.TypeError("Invalid `.methods`, an object expected."),s)li["g"].Not.Function(s[p])&&li["b"].Throw.TypeError("Invalid `.methods.".concat(p,"`, a function expected."));for(var v in li["g"].Not.Object(u)&&li["b"].Throw.TypeError("Invalid `.getters`, an object expected."),u)li["g"].Not.Function(u[v])&&li["b"].Throw.TypeError("Invalid `.getters.".concat(v,"`, a function expected."));return li["g"].Not.Function(h)&&li["b"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.data=i,e.created=a,e.methods=s,e.getters=u,e.proxy=h,e.options=d,e},Ia=function(){return{}},Ha=function(t){var e={groupIndex:0,interative:!1,hoverable:!1,focusable:!1,selectable:!1,draggable:!1,state:Ia,render:null,created:li["d"],destroy:li["d"],methods:{},getters:{},proxy:function(){return this}},n=t.groupIndex,i=void 0===n?e.groupIndex:n,r=t.interative,a=void 0===r?e.interative:r,o=t.hoverable,s=void 0===o?e.hoverable:o,c=t.focusable,u=void 0===c?e.focusable:c,l=t.selectable,h=void 0===l?e.selectable:l,f=t.draggable,d=void 0===f?e.draggable:f,p=t.state,v=void 0===p?e.state:p,g=t.render,m=void 0===g?e.render:g,y=t.created,b=void 0===y?e.created:y,x=t.destroy,$=void 0===x?e.destroy:x,w=t.methods,O=void 0===w?e.methods:w,j=t.getters,k=void 0===j?e.getters:j,T=t.proxy,E=void 0===T?e.proxy:T;for(var S in li["g"].Not.Number(i)&&li["b"].Throw.TypeError("Invalid `.elements[].groupIndex`, a number expected."),li["g"].Not.Boolean(a)&&li["b"].Throw.TypeError("Invalid `.elements[].interative`, a boolean expected."),li["g"].Not.Boolean(s)&&li["b"].Throw.TypeError("Invalid `.elements[].hoverable`, a boolean expected."),li["g"].Not.Boolean(u)&&li["b"].Throw.TypeError("Invalid `.elements[].focusable`, a boolean expected."),li["g"].Not.Boolean(h)&&li["b"].Throw.TypeError("Invalid `.elements[].selectable`, a boolean expected."),li["g"].Not.Boolean(d)&&li["b"].Throw.TypeError("Invalid `.elements[].draggable`, a boolean expected."),li["g"].Not.Function(v)&&li["b"].Throw.TypeError("Invalid `.elements[].state`, a function expected."),li["g"].Not.Function(m)&&li["g"].Not.Null(m)&&li["b"].Throw.TypeError("Invalid `.elements[].render`, a function or null expected."),li["g"].Not.Function(b)&&li["b"].Throw.TypeError("Invalid `.elements[].created`, a function expected."),li["g"].Not.Function($)&&li["b"].Throw.TypeError("Invalid `.elements[].destroy`, a function expected."),li["g"].Not.Object(O)&&li["b"].Throw.TypeError("Invalid `.elements[].methods`, an object as function map expected"),O)li["g"].Not.Function(O[S])&&li["b"].Throw.TypeError("Invalid `.elements[].methods.".concat(S,"`, a function expected."));for(var C in li["g"].Not.Object(k)&&li["b"].Throw.TypeError("Invalid `.elements[].getters`, an object as function map expected"),k)li["g"].Not.Function(k[C])&&li["b"].Throw.TypeError("Invalid `.elements[].getters.".concat(C,"`, a function expected."));return li["g"].Not.Function(E)&&li["b"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.groupIndex=i,e.interative=a,e.hoverable=s,e.focusable=u,e.selectable=h,e.draggable=d,e.state=v,e.render=m,e.created=b,e.destroy=$,e.methods=O,e.getters=k,e.proxy=E,e},Ba=(n("1bf2"),function(){return{}}),Va=[0,function(){return li["b"].throwError("Not implemented.")},0],za=function(t){li["g"].isArray(t)&&3===t.length&&li["g"].isFunction(t[1])||li["b"].Throw.TypeError("Invalid transition, a [source, function, target] expected.")},Ua=function(t){if(li["g"].Not.Array(t)&&li["b"].Throw.TypeError("Invalid action transition, an array expected."),0===t.length)return[Va];if(li["g"].Not.Array(t[0]))return za(t),[t];var e,n=[],i=Object(Ue["a"])(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;za(r),n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n},Ya=function(t){var e={};for(var n in li["g"].Not.Object(t)&&li["b"].Throw.TypeError("Invalid tool actions, a plain object expected."),t)e[n]=Ua(t[n]);return e},Ga=Object.freeze({entry:li["d"],leave:li["d"]}),Xa=function(t){var e={entry:li["d"],leave:li["d"]},n=t.entry,i=void 0===n?e.entry:n,r=t.leave,a=void 0===r?e.leave:r;return li["g"].Not.Function(i)&&li["b"].Throw.TypeError("Invalid operation.entry, a function expected."),li["g"].Not.Function(a)&&li["b"].Throw.TypeError("Invalid operation.leave, a function expected."),e.entry=i,e.leave=a,e},Ka=function(t,e){var n={};for(var i in e){var r=e[i];if(li["g"].isArray(r[0])){var a,o=Object(Ue["a"])(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s[0]]=n[s[2]]=Ga}}catch(f){o.e(f)}finally{o.f()}}else n[r[0]]=n[r[2]]=Ga}var c,u=Object(Ue["a"])(li["f"].ownKeys(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,h=t[l];if(li["g"].isUndefined(h))return;li["g"].isObject(h)?n[l]=Xa(h):li["g"].isFunction(h)?n[l]=Xa({entry:h}):li["b"].Throw.TypeError("Invalid state operation, a function or expected.")}}catch(f){u.e(f)}finally{u.f()}return n},qa=function(t){var e={states:{},actions:{},data:Ba,reset:li["d"],methods:{},proxy:function(){return this}},n=t.states,i=void 0===n?e.states:n,r=t.actions,a=void 0===r?e.actions:r,o=t.data,s=void 0===o?e.data:o,c=t.reset,u=void 0===c?e.reset:c,l=t.methods,h=void 0===l?e.methods:l,f=t.proxy,d=void 0===f?e.proxy:f;for(var p in li["g"].Not.Function(s)&&li["b"].Throw.TypeError("Invalid `.tools[].data`, a function expected."),li["g"].Not.Function(u)&&li["b"].Throw.TypeError("Invalid `.tools[].reset`, a function expected."),li["g"].Not.Function(d)&&li["b"].Throw.TypeError("Invalid `.tools[].proxy`, a function expected."),h)li["g"].Not.Function(h[p])&&li["b"].Throw.TypeError("Invalid `.tools[].methods.".concat(p,"`, a function expected."));return e.actions=Ya(a),e.states=Ka(i,a),e.data=s,e.reset=u,e.methods=h,e.proxy=d,e},Ja=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={namespace:null,version:null,dependencies:[],plugin:{},elements:{},tools:{}},n=t.id,i=t.version,r=t.namespace,a=void 0===r?e.namespace:r,o=t.dependencies,s=void 0===o?e.dependencies:o,c=t.plugin,u=void 0===c?e.plugin:c,l=t.elements,h=void 0===l?e.elements:l,f=t.tools,d=void 0===f?e.tools:f;if(li["g"].Not.String(n)&&li["b"].Throw.TypeError("Invalid `.id`, a string expected."),li["g"].Not.String(i)&&li["b"].Throw.TypeError("Invalid `.version`, string expected."),li["g"].Not.String(a)&&li["g"].Not.Null(a)&&li["b"].Throw.TypeError("Invalid `.namespace`, a string or null expected."),li["g"].Not.Array(s))li["b"].Throw.TypeError("Invalid `.dependencies`, an array expected.");else{var p,v=Object(Ue["a"])(s);try{for(v.s();!(p=v.n()).done;){var g=Object(tr["a"])(p.value,2),m=g[0],y=g[1];li["g"].Not.String(m)&&li["b"].Throw.TypeError("Invalid `.dependencies[".concat(y,"]`, a string expected."))}}catch($){v.e($)}finally{v.f()}}for(var b in li["g"].Not.Object(h)&&li["b"].Throw.TypeError("Invalid `.elements`, an object as map expected."),e.id=n,e.version=i,e.namespace=a,e.dependencies=s,e.plugin=Ma(u),h)e.elements[b]=Ha(h[b]);for(var x in d)e.tools[x]=qa(d[x]);return e},Qa=new Map,Za=[],to=function(t){var e=Ja(t),n=e.id,i=e.namespace,r=e.version,a=e.plugin,o=e.elements,s=e.tools;Za.some((function(t){return t.id===n}))&&li["b"].throwError("A Plugin id=".concat(n," is used."));var c={},u={};for(var l in o)c[l]={index:o[l].groupIndex,Element:La(l,o[l])};for(var h in s)u[h]=Ra(h,s[h]);var f=ga(n,r,a,c,u);Qa.set(f,a.created),Za.push({id:n,namespace:i,Plugin:f,Elements:Object.freeze(c)})},eo=function(t){var e,n=[],i=Object(Ue["a"])(Za);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=r.id,o=r.namespace,s=r.Plugin,c=r.Elements,u=new s(t),l=t.Plugin.Proxy[a]=u.context.$proxy;for(var h in t.Plugin.Context[a]=u.context,li["g"].isString(o)&&(li["g"].isUndefined(t.proxy[o])?t.proxy[o]=l:li["a"].warn('Registering namespace "'.concat(o,'" is duplicated.'))),c){var f=new ra["Container"],d=c[h];f.name="".concat(h,"-group"),t.groupMap.set(d.Element,f),n.push({container:f,index:d.index})}n.sort((function(t,e){return t.index-e.index}));var p,v=Object(Ue["a"])(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;t.application.stage.addChild(g.container)}}catch(m){v.e(m)}finally{v.f()}Qa.get(s).call(u.context)}}catch(m){i.e(m)}finally{i.f()}Object.freeze(t.Plugin.Proxy)},no={button:0,buttons:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},io=function(t){return li["g"].isNull(t)?null:t.context.$proxy};function ro(t,e){var n=null,i=li["e"].freeze({get drawing(){return t.proxy},get button(){return no.button},get buttons(){return no.buttons},get ctrlKey(){return no.ctrlKey},get shiftKey(){return no.shiftKey},get altKey(){return no.altKey},get metaKey(){return no.metaKey},get pointerX(){return e.pointer.x},get pointerY(){return e.pointer.y},get virtualX(){return e.virtual.x},get virtualY(){return e.virtual.y},get hovering(){return io(e.hovering)},get focusing(){return io(e.focusing)},get selecting(){return io(e.selecting)},get holding(){return io(e.holding)},stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.data.originalEvent.preventDefault()}});return{get current(){return n},set current(t){n=t},accessor:i}}["mousedown","mouseup","pointerdown","pointerup"].forEach((function(t){na["a"].DOCUMENT.addEventListener(t,(function(t){no.button=t.button,no.buttons=t.buttons}),{capture:!0})})),["keydown","keyup"].forEach((function(t){na["a"].addEventListener(na["c"].WINDOW,t,(function(t){no.ctrlKey=t.ctrlKey,no.shiftKey=t.shiftKey,no.altKey=t.altKey,no.metaKey=t.metaKey}))}));var ao=25,oo=100,so=100,co=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:so;Object(si["a"])(this,t),this.scale=ao,this.originX=e,this.originY=n}return Object(ci["a"])(t,[{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao;this.scale=t}},{key:"move",value:function(t,e){this.originX=li["c"].round(t),this.originY=li["c"].round(e)}},{key:"toGeometry",value:function(t,e){var n=this.scale,i=this.originX,r=this.originY;return[(t-i)*n,(r-e)*n]}},{key:"toCanvas",value:function(t,e){var n=this.scale,i=this.originX,r=this.originY;return[i+t/n,r-e/n]}}]),t}(),uo=function(){return{x:0,y:0}},lo=function(){return{capturedAt:null,pointer:uo(),virtual:uo(),hovering:null,focusing:null,selecting:null,holding:null}},ho=["pointermove","pointerdown","pointerup"];function fo(t,e,n){var i=new ra["Application"]({antialias:!0,backgroundColor:n.style.backgroundColor,backgroundAlpha:n.style.backgroundOpacity}),r=i.stage,a=i.ticker;return r.interactive=!0,r.hitArea=new ra["Rectangle"],a.add((function(){return t.observer.update()})).add((function(){return t.watchSnap()})).add((function(){return t.watchSize()})),ho.forEach((function(e){r.on("".concat(e),(function(e){t.globalEvent.current=e}))})),r.on("pointerdown",(function(n){po(t,"pointerdown");var i=n.target,r=e.focusing;li["g"].Not.Null(r)&&i!==r.graphics&&t.setFocusing()})).on("pointerup",(function(){po(t,"pointerup"),t.setHolding()})).on("pointermove",(function(i){if(n.capture){var r=i.data.global,a=r.x,o=r.y,s=e.pointer;s.x===a&&s.y===o||t.setPointer(a,o)}})),i}var po=function(t,e){t.emit(e,t.globalEvent.accessor)},vo=(n("4de4"),function(){function t(){Object(si["a"])(this,t),this.store=new Set}return Object(ci["a"])(t,[{key:"register",value:function(t){this.store.add(t)}},{key:"remove",value:function(t){this.store.has(t)&&this.store.delete(t)}},{key:"from",value:function(t,e){var n=!1,i=[t,e],r=Array.from(this.store).filter(mo).sort(go),a=function(t,e){v.Point(t,e),i[0]=t,i[1]=e,n=!0};while(!n&&r.length>0)r.pop().handle(t,e,a);return i}}]),t}()),go=function(t,e){return t.priority-e.priority},mo=function(t){return t.active},yo=function(){function t(){Object(si["a"])(this,t),this.registry=new Set}return Object(ci["a"])(t,[{key:"append",value:function(t){this.registry.add(t)}},{key:"reset",value:function(){var t,e=Object(Ue["a"])(this.registry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.reset()}}catch(i){e.e(i)}finally{e.f()}}}]),t}(),bo=function(){function t(){Object(si["a"])(this,t),this.dirty=!1,this.set=new Set}return Object(ci["a"])(t,[{key:"add",value:function(t){this.set.add(t)}},{key:"cancel",value:function(t){this.set.delete(t)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"update",value:function(){if(this.dirty){var t,e=Object(Ue["a"])(this.set);try{for(e.s();!(t=e.n()).done;){var n=t.value;n()}}catch(i){e.e(i)}finally{e.f()}this.dirty=!1}}}]),t}(),xo=new WeakMap,$o=function(t){return xo.get(t)},wo=["keydown","keyup"];function Oo(t){na["a"].addEventListener(na["c"].WINDOW,t,this.keyboardEventListener)}function jo(t){na["a"].removeEventListener(na["c"].WINDOW,t,this.keyboardEventListener)}for(var ko,To=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;Object(si["a"])(this,n),i=e.call(this,t),xo.set(t,Object(ea["a"])(i));var r=i.state=lo(),a=i.options=new sa(Object(ea["a"])(i));return i.destroyed=!1,i.proxy=t,i.containerElement=null,i.observer=new bo,i.keyboardEventListener=function(t){return po(Object(ea["a"])(i),t.type)},i.application=fo(Object(ea["a"])(i),r,a),i.globalEvent=ro(Object(ea["a"])(i),r),i.coordinate=new co,i.snapManager=new vo,i.toolManager=new yo,i.groupMap=new Map,i.Plugin={Proxy:{},Context:{}},eo(Object(ea["a"])(i)),wo.forEach(Oo,Object(ea["a"])(i)),i}return Object(ci["a"])(n,[{key:"canvasElement",get:function(){return this.application.view}},{key:"watchSize",value:function(){if(this.options.autoResizing){var t=this.application.view,e=t.parentElement,n=e.offsetHeight,i=e.offsetWidth;t.height===n&&t.width===i||this.resize()}}},{key:"watchSnap",value:function(){if(this.options.snap.enable){var t=this.state,e=t.capturedAt,n=t.virtual,i=t.pointer;if(!li["g"].isNull(e)){var r=Date.now();if(r-e>this.options.snap.interval){var a=this.snapManager.from(i.x,i.y),o=Object(tr["a"])(a,2);n.x=o[0],n.y=o[1],po(this,"pointermove"),po(this,"snap"),this.state.capturedAt=null}}}}},{key:"mount",value:function(t){na["a"].appendChild(t,this.canvasElement),this.containerElement=t,po(this,"mount"),this.resize()}},{key:"destroy",value:function(){wo.forEach(jo,this),this.keyboardEventListener=null,na["a"].removeFromParent(this.canvasElement),ia["a"].destroy(this),this.destroyed=!0}},{key:"resize",value:function(){var t=this.application,e=t.stage,n=t.view,i=this.containerElement,r=i.offsetWidth,a=i.offsetHeight;e.hitArea.width=n.width=r,e.hitArea.height=n.height=a,this.application.renderer.resize(r,a),this.forceUpdateAll(),po(this,"resize")}},{key:"setPointer",value:function(t,e){this.state.pointer.x=this.state.virtual.x=t,this.state.pointer.y=this.state.virtual.y=e,this.state.capturedAt=Date.now(),po(this,"pointermove")}},{key:"setHovering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.hovering=t}},{key:"setFocusing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.state.focusing;this.state.focusing=t,li["g"].Not.Null(e)&&(e.emitBlur(),this.emit("element-blur",e.context.$proxy)),li["g"].Not.Null(t)&&this.emit("element-focus",t.context.$proxy)}},{key:"setHolding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.holding=t}},{key:"forceUpdateAll",value:function(){for(var t in this.Plugin.Context)this.Plugin.Context[t].$forceUpdate()}}]),n}(ia["a"].Emitter),Eo=0,So=1,Co=function(t){return li["g"].isNull(t)?null:t.context.$proxy},Lo=function(t){return[t.x,t.y]},Po=(ko={},Object(bt["a"])(ko,Eo,(function(t,e){t.setScale(e)})),Object(bt["a"])(ko,So,(function(t,e){t.setScaleByReference.apply(t,[e].concat(Object(ui["a"])(t.pointer)))})),ko),Fo=function(){function t(){Object(si["a"])(this,t),new To(this),li["e"].freeze(this)}return Object(ci["a"])(t,[{key:"options",get:function(){return $o(this).options}},{key:"canvasElement",get:function(){return $o(this).canvasElement}},{key:"hovering",get:function(){return Co($o(this).state.hovering)}},{key:"selecting",get:function(){return Co($o(this).state.selecting)}},{key:"focusing",get:function(){return Co($o(this).state.focusing)}},{key:"holding",get:function(){return Co($o(this).state.holding)}},{key:"plugins",get:function(){return $o(this).Plugin.Proxy}},{key:"pointer",get:function(){return Lo($o(this).state.pointer)}},{key:"virtual",get:function(){return Lo($o(this).state.virtual)}},{key:"origin",get:function(){var t=$o(this).coordinate,e=t.originX,n=t.originY;return[e,n]}},{key:"scale",get:function(){return $o(this).coordinate.scale}},{key:"width",get:function(){return $o(this).application.view.width}},{key:"height",get:function(){return $o(this).application.view.height}},{key:"mount",value:function(t){li["b"].instanceOf(t,HTMLElement)||li["b"].Throw.TypeError("Invalid `element`, a HTMLElement expected."),$o(this).mount(t)}},{key:"resize",value:function(){$o(this).resize()}},{key:"destroy",value:function(){$o(this).destroy()}},{key:"setOrigin",value:function(t,e){v.Point(t,e);var n=$o(this);n.coordinate.move(t,e),n.forceUpdateAll()}},{key:"setScale",value:function(t){li["g"].Not.Number(t)&&li["b"].Throw.TypeError("Invalid scale, a number expected.");var e=$o(this),n=this.options.scale,i=n.min,r=n.max,a=li["c"].max(i,li["c"].min(r,t));e.coordinate.setScale(a),e.forceUpdateAll()}},{key:"setScaleByReference",value:function(t,e,n){var i,r;v.Point(e,n);var o=$o(this),s=this.origin,u=o.coordinate.toGeometry(e,n);this.setScale(t);var l=(i=o.coordinate).toCanvas.apply(i,Object(ui["a"])(u)),h=a.fromBothPoint.apply(a,Object(ui["a"])(l).concat([e,n]));(r=o.coordinate).move.apply(r,Object(ui["a"])(c.translate.apply(c,Object(ui["a"])(s).concat(Object(ui["a"])(h))))),o.forceUpdateAll()}},{key:"setScaleInMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eo;li["e"].values(b).includes(e)?Po[e](this,t):li["b"].Throw.TypeError("Invalid `mode`, a value of SCALE_MODE expected.")}},{key:"on",value:function(t,e){return $o(this).on(t,e),this}},{key:"off",value:function(t,e){return $o(this).off(t,e),this}},{key:"registerSnap",value:function(t){$o(this).snapManager.register(t)}},{key:"appendTool",value:function(t){$o(this).toolManager.append(t)}},{key:"resetAllTool",value:function(){$o(this).toolManager.reset()}}]),t}(),Ao=function(t){return Ha(t)},No=function(t,e,n){return qa(li["e"].assign(n,{states:t,actions:e}))},_o=function(t){return Ma(t)},Do=function(t){return Ja(t)},Ro=g._,Wo=n("49a4"),Mo=function(t){return t.$proxy},Io=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"hollows",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).hollows()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"createHollow",value:function(t,e,n){return Ro(this).createHollow(t,e,n)}},{key:"createMovingHollow",value:function(t,e){return Ro(this).createMovingHollow(t,e)}},{key:"getAllHollowList",value:function(){return Ro(this).$getElementList("Hollow").map(Mo)}}]),n}(y.Proxy.Plugin),Ho=w.define({proxy:y.Proxy.Creator(Io),created:function(){var t=this;this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}))},methods:{createHollow:function(t,e,n){return this.$createElement("Hollow",t,e,n)},createMovingHollow:function(t,e){var n=this.$createElement("Hollow",t);return e&&n.setWidth(e),this.$drawing.hammer.adjuster.moveElement(n),n},hollows:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$elements("Hollow")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}}),Bo=(n("b64b"),{}),Vo=function(t,e){li["g"].Not.String(t)&&li["b"].Throw.TypeError("Invalid `name`, a string expected."),li["g"].Not.Function(e.render)&&li["b"].Throw.TypeError("Invalid `material`, a function expected."),t in Bo&&li["a"].warn('Duplicated material name="'.concat(t,'". The original is replaced.')),Bo[t]=e},zo=function(t){return Bo[t]},Uo=function(){return Object.keys(Bo)},Yo=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"surface",get:function(){return Ro(this).surface}},{key:"virtualSurface",get:function(){return Ro(this).virtualSurface}},{key:"width",get:function(){return Ro(this).width}},{key:"defaultWidth",get:function(){return Ro(this).defaultWidth}},{key:"offset",get:function(){return Ro(this).offset}},{key:"materialName",get:function(){return Ro(this).materialName}},{key:"fliped",get:function(){return Ro(this).fliped}},{key:"flip",value:function(){Ro(this).flip()}},{key:"toggleSurface",value:function(){Ro(this).toggleSurface()}},{key:"setSurface",value:function(t){Ro(this).setSurface(t)}},{key:"setMaterial",value:function(t){Ro(this).setMaterial(t)}},{key:"setOffset",value:function(t){Ro(this).setOffset(t)}},{key:"setWidth",value:function(t){Ro(this).setWidth(t)}},{key:"remove",value:function(){Ro(this).remove()}}]),n}(y.Proxy.Element),Go=function(){function t(e,n,i){Object(si["a"])(this,t),this.name="virtual",this.corner={x:e,y:n},this.back={corner:{x:e+10,y:n}},this.wall={thickness:i}}return Object(ci["a"])(t,[{key:"setCorner",value:function(t,e){this.corner.x=t,this.corner.y=e}},{key:"setBackCorner",value:function(t,e){this.back.corner.x=t,this.back.corner.y=e}},{key:"setThinkness",value:function(t){this.wall.thickness=t}}]),t}(),Xo=w.Element.define({groupIndex:1100,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,virtualSurface:null,offset:0,materialName:"",fliped:!1,width:0,defaultWidth:0,rendering:!1,changeListener:li["d"],destroyListener:li["d"]}},getters:{surface:function(){return this.$state.surface},virtualSurface:function(){return this.$state.virtualSurface},width:function(){return this.$state.width},defaultWidth:function(){return this.$state.defaultWidth},offset:function(){return this.$state.offset},materialName:function(){return this.$state.materialName},fliped:function(){return this.$state.fliped}},created:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.$state.virtualSurface=new Go(1e4,10001,200),this.$state.changeListener=function(){n.updateVirtualSurface(),n.$setDirty()},this.$state.destroyListener=function(){n.setSurface(n.$state.virtualSurface)},this.$state.defaultWidth=zo(t).width,this.setMaterial(t),this.setSurface(e||this.$state.virtualSurface),this.setOffset(i),this.setWidth(this.$state.defaultWidth)},destroy:function(){var t=this.$state.surface;t.off&&(t.off("change",this.$state.changeListener),t.off("destroy",this.$state.destroyListener))},render:function(t){var e=this.$state,n=e.surface,i=e.virtualSurface,r=e.width,o=e.fliped,s=e.offset,u=e.materialName,l=e.rendering,h=n.corner?n:i,f=this.$drawing.scale,d=h.corner,p=h.back.corner,v={width:r/f,height:h.wall.thickness/f,fliped:o,scale:f,hover:this.$hovering,focus:this.$focusing,hold:this.$holding};zo(u).render(t,v);var g=this.$toCanvas(d.x,d.y),m=this.$toCanvas(p.x,p.y),y=a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,Object(ui["a"])(g).concat(Object(ui["a"])(m))))),b=Object(tr["a"])(y,2),x=b[0],$=b[1],w=c.translate.apply(c,Object(ui["a"])(g).concat(Object(ui["a"])(a.multiply(x,$,s/f)))),O=Object(tr["a"])(w,2);t.x=O[0],t.y=O[1],t.rotation=li["c"].atan2($,x),l&&(this.$emit("change",this.$proxy),this.setRendering(!1))},methods:{flip:function(){this.$state.fliped=!this.$state.fliped,this.$setDirty(),this.setRendering(!0)},toggleSurface:function(){var t=this.$state.surface.corner,e=this.$state.surface.back.corner,n=a.length.apply(a,Object(ui["a"])(a.fromBothPoint(t.x,t.y,e.x,e.y)));this.setOffset(n-this.$state.offset),this.setSurface(this.$state.surface.back)},setSurface:function(t){var e=this.$state.surface;this.$state.surface=t,e&&e.off&&(e.off("change",this.$state.changeListener),e.off("destroy",this.$state.destroyListener)),t&&t.on&&(t.on("change",this.$state.changeListener),t.on("destroy",this.$state.destroyListener)),"virtual"!==t.name&&this.updateVirtualSurface(),this.$setDirty()},setMaterial:function(t){this.$state.materialName=t,this.$setDirty(),this.setRendering(!0)},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty(),this.setRendering(!0)},remove:function(){this.$destroy()},updateVirtualSurface:function(){var t=this.$state,e=t.surface,n=t.virtualSurface;n.setCorner(e.corner.x,e.corner.y),n.setBackCorner(e.back.corner.x,e.back.corner.y),n.setThinkness(e.wall.thickness)},setRendering:function(t){this.$state.rendering=t}},proxy:function(){return new Yo(this)}},Ho),Ko=O.define({id:"com.3dnest.spoke.windoor",namespace:"windoor",version:Wo["a"],plugin:Ho,elements:{Hollow:Xo}}),qo=n("7580"),Jo={},Qo=function(t,e){li["g"].Not.String(t)&&li["b"].Throw.TypeError("Invalid `name`, a string expected."),li["g"].Not.Function(e.render)&&li["b"].Throw.TypeError("Invalid `material`, a function expected."),t in Jo&&li["a"].warn('Duplicated material name="'.concat(t,'". The original is replaced.')),Jo[t]=e},Zo=function(){var t=Object(qo["a"])(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ra.Texture.fromURL(n);case 2:i=t.sent,r={texture:i,render:function(t,e){var n=e.width,r=e.height,a=n>0?n:i.width,o=r>0?r:i.height;t.beginTextureFill({texture:i,matrix:new ra.Matrix(a/i.width,0,0,o/i.height,0,0)}).drawRect(0,0,a,o)}},Qo(e,r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ts=function(t){return t in Jo||li["a"].warn('material name="'.concat(t,'" is not exist.')),Jo[t]},es=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"createStuff",value:function(t,e,n,i,r){return Ro(this).createStuff(t,e,n,i,r)}},{key:"createMovingStuff",value:function(t,e,n,i){return Ro(this).createMovingStuff(t,e,n,i)}},{key:"getAllStuffList",value:function(){return Array.from(this.stuffs())}},{key:"stuffs",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).stuffs()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}]),n}(y.Proxy.Plugin),ns=w.define({proxy:y.Proxy.Creator(es),created:function(){var t=this;this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}))},methods:{createStuff:function(t,e,n,i,r){var a=ts(t).texture,o=this.$drawing.scale;return this.$createElement("Stuff",t,e,n,i||a.width*o,r||a.height*o).$proxy},createMovingStuff:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.createStuff(t,1e4,1e4,e,n);return r.setRotation(i),this.$drawing.common.transformer.moveElement(r),r},stuffs:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$elements("Stuff")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}}),is=(n("cb29"),function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"fill",get:function(){return Ro(this).fill}},{key:"width",get:function(){return Ro(this).width}},{key:"height",get:function(){return Ro(this).height}},{key:"rotation",get:function(){return Ro(this).rotation}},{key:"x",get:function(){return Ro(this).x}},{key:"y",get:function(){return Ro(this).y}},{key:"room",get:function(){return Ro(this).room}},{key:"setFill",value:function(t){Ro(this).setFill(t)}},{key:"setRoom",value:function(t){Ro(this).setRoom(t)}},{key:"setWidth",value:function(t){Ro(this).setWidth(t)}},{key:"setHeight",value:function(t){Ro(this).setHeight(t)}},{key:"setOffset",value:function(t,e){Ro(this).setOffet(t,e)}},{key:"setRotation",value:function(t){Ro(this).setRotation(t)}},{key:"setPosition",value:function(t,e){Ro(this).setPosition(t,e)}},{key:"remove",value:function(){Ro(this).remove()}}]),n}(y.Proxy.Element)),rs=w.Element.define({proxy:y.Proxy.Creator(is),groupIndex:1200,interative:!0,focusable:!0,draggable:!0,state:function(){return{fill:"",width:0,height:0,room:null,offsetX:0,offsetY:0,x:0,y:0,rotation:0,rendering:!1,listener:li["d"]}},getters:{fill:function(){return this.$state.fill},width:function(){return this.$state.width},height:function(){return this.$state.height},rotation:function(){return this.$state.rotation},x:function(){return this.$state.x},y:function(){return this.$state.y},room:function(){return this.$state.room}},created:function(t,e,n,i,r){this.setWidth(i),this.setHeight(r),this.setFill(t),this.setPosition(e,n)},destroy:function(){var t=this.$state.room;t&&t.off&&t.off("dirty",this.$state.listener)},render:function(t){var e=this.$state,n=e.width,i=e.height,r=e.rotation,a=e.fill,o=e.rendering,s=e.x,c=e.y,u=this.$drawing.scale,l={width:n/u,height:i/u};t.drawRect(0,0,l.width,l.height),t.pivot.x=l.width/2,t.pivot.y=l.height/2;var h=ts(a);h&&h.render(t,l);var f=this.$toCanvas(Number(s),Number(c)),d=Object(tr["a"])(f,2);t.x=d[0],t.y=d[1],t.rotation=r,o&&(this.$emit("change",this.$proxy),this.setRendering(!1))},methods:{setFill:function(t){this.$state.fill=t,this.$setDirty()},setRoom:function(t){var e=this;t!==this.$state.room&&(t?(this.$state.room=t,t.on("dirty",this.$state.listener=function(){return e.$setDirty()}),this.$setDirty()):this.$state.room=null)},setWidth:function(t){this.$state.width=t,this.$setDirty(),this.setRendering(!0)},setHeight:function(t){this.$state.height=t,this.$setDirty(),this.setRendering(!0)},setRotation:function(t){this.$state.rotation=t,this.$setDirty(),this.setRendering(!0)},setPosition:function(t,e){var n=this.$state.room,i=n?this.$toGeometry(n.$bounds.left,n.$bounds.bottom):[0,0],r=Object(tr["a"])(i,2),a=r[0],o=r[1];this.$state.x=t,this.$state.y=e,this.$state.offsetX=t-a,this.$state.offsetY=e-o,this.$setDirty(),this.setRendering(!0)},setOffset:function(t,e){var n=this.$state.room,i=n?this.$toGeometry(n.$bounds.left,n.$bounds.bottom):[0,0],r=Object(tr["a"])(i,2),a=r[0],o=r[1];this.$state.offsetX=t,this.$state.offsetY=e;var s=[a+t,o+e];this.$state.x=s[0],this.$state.y=s[1],this.$setDirty()},setRendering:function(t){this.$state.rendering=t},remove:function(){this.$destroy()}}},ns),as=n("e07e"),os=O.define({id:"com.3dnest.spoke.furniture",namespace:"furniture",version:as["a"],plugin:ns,elements:{Stuff:rs}}),ss=n("3d04"),cs=n("5d77"),us=(n("9911"),n("ac1f"),n("1276"),[0,0]),ls=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"x",get:function(){return Ro(this).x}},{key:"y",get:function(){return Ro(this).y}},{key:"size",get:function(){return Ro(this).size}},{key:"point",get:function(){var t=Ro(this),e=t.x,n=t.y;return us[0]=e,us[1]=n,us}},{key:"move",value:function(t,e){return y.Assert.Point(t,e),Ro(this).move(t,e),this}},{key:"remove",value:function(){return Ro(this).remove(),this}},{key:"getAdjacentCornerList",value:function(){return Ro(this).getAdjacentCornerList().map(hs)}},{key:"surfaces",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).surfaces()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"getWallByToCorner",value:function(t){li["b"].instanceOf(t,n)||li["b"].Throw.TypeError("Invalid corner, a CornerProxy expected.");var e=Ro(this).getWallByToCorner(Ro(t));return li["g"].isNull(e)?null:e.$proxy}}]),n}(y.Proxy.Element),hs=function(t){return t.$proxy},fs=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"thisSurface",get:function(){return Ro(this).thisSurface.$proxy}},{key:"thatSurface",get:function(){return Ro(this).thatSurface.$proxy}},{key:"thickness",get:function(){return Ro(this).$state.thickness},set:function(t){(li["g"].Not.Number(t)||t<=0)&&li["b"].Throw.TypeError("Invalid `thickness`, a number >0 expected."),Ro(this).setThickness(t)}},{key:"segment",get:function(){return Ro(this).segment}},{key:"remove",value:function(){Ro(this).remove()}},{key:"drawPolygon",value:function(t){li["b"].instanceOf(t,ra.Graphics)||li["b"].Throw.TypeError("Invalid `graphics`, a `PIXI.Graphics` expected."),Ro(this).drawPolygon(t)}}]),n}(y.Proxy.Element),ds=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"getOptions",value:function(){return Ro(this).$data.optionsGetter}},{key:"createCorner",value:function(t,e){return y.Assert.Point(t,e),Ro(this).createCorner(t,e).$proxy}},{key:"removeCorner",value:function(t){return li["b"].instanceOf(t,ls)||li["b"].Throw.TypeError("Invalid `corner`, a CornerProxy expected."),Ro(this).removeCorner(Ro(t))}},{key:"createWall",value:function(t,e){return vs(t,e),li["g"].Not.Null(t.getWallByToCorner(e))&&li["b"].throwError("Duplicated wall"),Ro(this).createWall(Ro(t),Ro(e)).$proxy}},{key:"removeWall",value:function(t){return li["b"].instanceOf(t,fs)||li["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),Ro(this).removeWall(Ro(t))}},{key:"removeWallSimple",value:function(t){return li["b"].instanceOf(t,fs)||li["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),Ro(this).removeWallSimple(Ro(t))}},{key:"split",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:li["d"];return y.Assert.Point(e,n),li["b"].instanceOf(t,fs)||li["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),Ro(this).split(Ro(t),e,n,(function(t,e,n){i(t.$proxy,e.$proxy,n.$proxy)})).$proxy}},{key:"merge",value:function(t){return li["b"].instanceOf(t,ls)||li["b"].Throw.TypeError("Invalid `corner`, a CornerProxy expected."),2!==t.size&&li["b"].throwError("The Wall number of this Corner is NOT 2."),Ro(this).merge(Ro(t)).$proxy}},{key:"combine",value:function(t){li["b"].instanceOf(t,fs)||li["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected.");var e=Ro(t);return Ro(this).combine(e).$proxy}},{key:"removeRoom",value:function(){}},{key:"getAllCornerList",value:function(){return Array.from(this.corners())}},{key:"getAllWallList",value:function(){return Array.from(this.walls())}},{key:"getAllRoomList",value:function(){return Array.from(this.rooms())}},{key:"getRoomByPoint",value:function(t,e){y.Assert.Point(t,e);var n=Ro(this).getRoomOfPoint(t,e);return n?n.$proxy:null}},{key:"queryCorner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;y.Assert.Point(t,e),(li["g"].Not.Number(n)||n<=0)&&li["b"].Throw.TypeError("Invalid `range`, a number >0 expected.");var i=Ro(this).queryCorner(t,e,n);return li["g"].isNull(i)?null:i.$proxy}},{key:"mergeAll",value:function(){}},{key:"clearEmplyCorner",value:function(){}},{key:"corners",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).$elements("Corner")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"walls",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).$elements("Wall")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"rooms",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).$elements("Room")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"surfaces",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).$elements("Surface")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}]),n}(y.Proxy.Plugin),ps=["from","to"],vs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i in ps)li["b"].instanceOf(e[i],ls)||li["b"].Throw.TypeError("Invalid `".concat(ps[i],"`, a CornerProxy excepted."))},gs=y.Options.define,ms=gs({show:!0},{snap:gs({},{corner:gs({active:!0,priority:0,maxDistance:15})}),corner:gs({show:!0,render:null},{style:gs({color:16777215,opacity:.75,radius:5},{hover:gs({color:0,opacity:.75,radius:5})})}),wall:gs({show:!0},{style:gs({opacity:1,color:10066329,hoverColor:13421772}),midline:gs({show:!0,color:16711680,width:1})}),room:gs({show:!0,defaultTexture:null}),surface:gs({opacity:1,borderColor:0,borderWidth:2})}),ys=function(t,e){var n,r=null,a=i.ROUND,o=Object(Ue["a"])(p.Iterator.allHalfEdgeOfVertex(t));try{for(o.s();!(n=o.n()).done;){var s=n.value,c=u.differ(e,p.getAngleOfHalfEdge(s),!1);c<a&&(a=c,r=s)}}catch(l){o.e(l)}finally{o.f()}return r},bs=function(t,e,n){if(li["g"].Not.Null(t.incidentEdge)){var i=t.x,r=t.y,a=n.x,o=n.y,s=Math.atan2(o-r,a-i),c=ys(t,s),u=c.twin;e.previous=u,e.twin.next=u.next,u.next.previous=e.twin,u.next=e}e.origin=t,t.incidentEdge=e},xs=function(t,e){var n,i=Object(Ue["a"])(p.Iterator.allHalfEdgeOfPath(t));try{for(i.s();!(n=i.n()).done;){var r=n.value;r.incidentFace=e}}catch(a){i.e(a)}finally{i.f()}},$s=function(t,e){t.twin=e,e.twin=t,t.next=e,e.next=t,t.previous=e,e.previous=t},ws=function(t,e,n){var i=li["g"].isNull(t.incidentEdge)&&li["g"].isNull(e.incidentEdge),r=new p.Struct.HalfEdge,a=new p.Struct.HalfEdge;$s(r,a),bs(t,r,e),bs(e,a,t);var o=i?p.getFaceOfPoint(n,t):r.previous.incidentFace||r.next.incidentFace,s=o.outerComponent,c=o.innerComponents;if(p.isTwinInSamePath(r)){r.incidentFace=a.incidentFace=o;var u=c.splice(0);p.isPathContainsHalfEdge(r,s)?o.outerComponent=r:c.push(r);var l,h=Object(Ue["a"])(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;p.isPathContainsHalfEdge(r,f)||c.push(f)}}catch(k){h.e(k)}finally{h.f()}}else{var d=new p.Struct.Face,v=p.isOuterPath(a),g=p.isOuterPath(r),m=v?r:a,y=m.twin;xs(y,d),m.incidentFace=o,d.outerComponent=y;var b=o.innerComponents.splice(0);g===v?o.outerComponent=m:o.innerComponents.push(m);var x,$=Object(Ue["a"])(b);try{for($.s();!(x=$.n()).done;){var w=x.value,O=w.origin;if(!p.isPathContainsVertex(m,O)&&!p.isPathContainsHalfEdge(y,w)){var j=p.getFaceOfPoint(d,O)?d:o;w.incidentFace!==j&&xs(w,j),j.innerComponents.push(w)}}}catch(k){$.e(k)}finally{$.f()}}return r},Os=function(t){t.origin=null,t.twin=null,t.previous=null,t.next=null,t.incidentFace=null},js=function(t){return t.outerComponent=null,t.innerComponents.length=0,t},ks=function(t){var e=t.twin,n=t.previous,i=t.origin,r=null;return e===n?i.incidentEdge=null:(n.next=i.incidentEdge=e.next,r=e.next.previous=n),r},Ts=function(t){var e=t.incidentFace,n=t.twin,i=p.isTwinInSamePath(t),r=p.isOuterPath(t),a=ks(t),o=ks(n);if(i){var s,c=e.innerComponents,u=c.splice(0),l=[a,o].filter(li["g"].Not.Null).filter((function(t){var n=p.isOuterPath(t);return n?e.outerComponent=t:c.push(t),!n})),h=Object(Ue["a"])(u);try{var f=function(){var e=s.value;e!==t&&e!==n&&l.every((function(t){return!p.isPathContainsHalfEdge(t,e)}))&&c.push(e)};for(h.s();!(s=h.n()).done;)f()}catch(O){h.e(O)}finally{h.f()}}else{var d,v,g=a.incidentFace,m=o.incidentFace;if(r?(d=m,v=g):(d=g,v=m),p.isOuterPath(a))d.outerComponent=a;else{var y=d.innerComponents,b=d.innerComponents.splice(0).concat(v.innerComponents);y.push(a);var x,$=Object(Ue["a"])(b);try{for($.s();!(x=$.n()).done;){var w=x.value;w===t||w===n||p.isPathContainsHalfEdge(a,w)||y.push(w)}}catch(O){$.e(O)}finally{$.f()}}xs(a,d),js(v)}Os(t),Os(n)},Es=function(t){return p.getVertexHalfEdgeList(t).forEach(Ts),t.incidentEdge=null,t},Ss=function(t){t.incidentEdge=null,t.x=0,t.y=0},Cs=function(t){var e=t.incidentEdge.twin,n=e.next.twin,i=e.next.next,r=n.next.next;return Os(e.twin),Os(n.twin),Ss(t),e.twin=n,n.twin=e,e.next=i,n.next=r,i.previous=e,r.previous=n,e},Ls=function(t){var e=t.incidentFace;if(e.outerComponent===t)e.outerComponent=t.next;else{var n=e.innerComponents,i=n.indexOf(t);-1!==i&&(n[i]=t.next)}},Ps=function(t){var e=t.twin,n=t.origin,i=e.origin,r=p.hasOnlyHalfEdge(n),a=p.hasOnlyHalfEdge(i);Ls(t),Ls(e);var o=n;if(r)if(a)Ts(t);else{var s=[n.x,n.y];i.x=s[0],i.y=s[1],Es(n),o=i}else if(a)Es(i);else{var c,u=Object(Ue["a"])(p.Iterator.allHalfEdgeOfVertex(i));try{for(u.s();!(c=u.n()).done;){var l=c.value;l.origin=n}}catch(f){u.e(f)}finally{u.f()}n.incidentEdge=t.next,t.previous.next=t.next,t.next.previous=t.previous;var h=t.twin;h.previous.next=h.next,h.next.previous=h.previous,Os(t),Os(h),Ss(i)}return o},Fs="c",As="d",Ns="D",_s="Rg",Ds="_D",Rs="_Rg",Ws=new WeakMap,Ms=function(t){return Ws.get(t)},Is=function(t,e,n,i,r){function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(si["a"])(this,a),Ws.set(t,this),this[Fs]=e}return Object(ci["a"])(a,[{key:t,get:function(){return li["g"].isNull(this[Fs])}},{key:e,value:function(){this[Fs]=null,this[Ds]()}},{key:n,value:function(){this[Rs]()}},{key:i,value:function(){}},{key:r,value:function(){}}]),a}(As,Ns,_s,Ds,Rs),Hs=function(){function t(){Object(si["a"])(this,t)}return Object(ci["a"])(t,[{key:"mesh",get:function(){var t=Ms(this);return t[As]?null:t[Fs].$}},{key:"destroyed",get:function(){return Ms(this)[As]}}]),t}(),Bs="v",Vs="s",zs="Hs",Us="F",Ys="H",Gs="E",Xs="M",Ks="e",qs="v",Js="f",Qs="g",Zs="mv",tc="mf",ec="mh",nc="CV",ic="M",rc="L",ac="S",oc="G",sc="C",cc="LV",uc="RV",lc="RE",hc="HV",fc="HE",dc="HF",pc="TV",vc="TH",gc="TF",mc="PF",yc="AE",bc="AV",xc="AF",$c="FV",wc="FE",Oc="FF",jc="l",kc="VC",Tc="VD",Ec="EC",Sc="ED",Cc="FC",Lc="FD",Pc="HC",Fc="HD",Ac="t",Nc="he",_c="v",Dc="e",Rc="f",Wc="n",Mc="p",Ic="b",Hc="P",Bc=new WeakMap,Vc=function(t){return Bc.get(t)},zc=function(t){return t[Dc]},Uc=function(t,e,n,i,r,a,o,s,c){Object(Ur["a"])(l,t);var u=Object(Yr["a"])(l);function l(t,e,n,i){var r;return Object(si["a"])(this,l),r=u.call(this,t,e),Bc.set(t,Object(ea["a"])(r)),r.$=t,r[Bs]=p.createVertex(n,i),r[_s](),r}return Object(ci["a"])(l,[{key:e,get:function(){var t,e=0,n=Object(Ue["a"])(p.Iterator.allHalfEdgeOfVertex(this[Bs]));try{for(n.s();!(t=n.n()).done;){t.value;e++}}catch(i){n.e(i)}finally{n.f()}return e}},{key:n,value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(p.Iterator.allHalfEdgeOfVertex(this[Bs])),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,this[Fs][vc](i);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:i,value:function(){var t=this[Fs];t[qs].add(this),t[Zs].set(this[Bs],this)}},{key:r,value:function(){this[Bs]=null}},{key:a,value:function(){return p.getVertexHalfEdgeList(this[Bs]).map(this[Fs][vc])}},{key:o,value:function(){return this[Ys]().map(zc)}},{key:s,value:function(){var t,e=new Set,n=Object(Ue["a"])(p.Iterator.allHalfEdgeOfVertex(this[Bs]));try{for(n.s();!(t=n.n()).done;){var i=t.value;e.add(i.incidentFace)}}catch(r){n.e(r)}finally{n.f()}return Array.from(e).map(this[Fs][gc])}},{key:c,value:function(t,e){this[Bs].x=t,this[Bs].y=e}}]),l}(Is,Vs,zs,Rs,Ds,Ys,Gs,Us,Xs),Yc=function(t){return t.$},Gc=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t,i,r){var a;return Object(si["a"])(this,n),a=e.call(this),new Uc(Object(ea["a"])(a),t,i,r),Object.seal(Object(ea["a"])(a)),a}return Object(ci["a"])(n,[{key:"x",get:function(){return Vc(this)[Bs].x}},{key:"y",get:function(){return Vc(this)[Bs].y}},{key:"size",get:function(){return Vc(this)[Vs]}},{key:"halfEdges",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Vc(this)[zs]()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"move",value:function(t,e){return li["g"].Not.Number(t)&&li["b"].Throw.TypeError("Vertex.x MUST be a number."),li["g"].Not.Number(e)&&li["b"].Throw.TypeError("Vertex.y MUST be a number."),Vc(this)[Xs](t,e),this}},{key:"getFaceList",value:function(){return Vc(this)[Us]().map(Yc)}},{key:"getHalfEdgeList",value:function(){return Vc(this)[Ys]().map(Yc)}},{key:"getEdgeList",value:function(){return Vc(this)[Gs]().map(Yc)}}]),n}(Hs),Xc="if",Kc="af",qc="iv",Jc="av",Qc="ih",Zc="ah",tu=new WeakMap,eu=function(t){return tu.get(t)},nu=function(t,e,n,i,r,a,o,s){Object(Ur["a"])(u,t);var c=Object(Yr["a"])(u);function u(t,e,n){var i;return Object(si["a"])(this,u),i=c.call(this,t,e),tu.set(t,Object(ea["a"])(i)),i.$=t,i[Qc]=n,n[Dc]=n[Ic][Dc]=Object(ea["a"])(i),i[_s](),i}return Object(ci["a"])(u,[{key:e,value:function(){this[Fs][Ks].add(this)}},{key:n,value:function(){this[Qc]=null}},{key:i,get:function(){return this[Qc][Rc]}},{key:r,get:function(){return this[Zc][Rc]}},{key:a,get:function(){return this[Qc][_c]}},{key:o,get:function(){return this[Zc][_c]}},{key:s,get:function(){return this[Qc][Ic]}}]),u}(Is,Rs,Ds,Xc,Kc,qc,Jc,Zc),iu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t,i){var r;return Object(si["a"])(this,n),r=e.call(this),new nu(Object(ea["a"])(r),t,i),Object.freeze(Object(ea["a"])(r)),r}return Object(ci["a"])(n,[{key:"thisFace",get:function(){return eu(this)[Xc].$}},{key:"thatFace",get:function(){return eu(this)[Kc].$}},{key:"thisVertex",get:function(){return eu(this)[qc].$}},{key:"thatVertex",get:function(){return eu(this)[Jc].$}},{key:"thisHalfEdge",get:function(){return eu(this)[Qc].$}},{key:"thatHalfEdge",get:function(){return eu(this)[Zc].$}}]),n}(Hs),ru="f",au="o",ou="i",su="H",cu="C",uu="O",lu="P",hu=new WeakMap,fu=function(t){return hu.get(t)},du=function(t,e,n,i,r,a,o,s,c){Object(Ur["a"])(l,t);var u=Object(Yr["a"])(l);function l(t,e,n){var i;return Object(si["a"])(this,l),i=u.call(this,t,e),hu.set(t,Object(ea["a"])(i)),i.$=t,i[ru]=n,i}return Object(ci["a"])(l,[{key:e,get:function(){return this[Fs][vc](this[ru].outerComponent)}},{key:n,get:function(){return this[ru].innerComponents.map(this[Fs][vc])}},{key:i,value:function(){var t=this[Fs];t[Js].add(this),t[tc].set(this[ru],this)}},{key:r,value:function(){this[ru]=null}},{key:a,value:function(){return p.getPathOfHalfEdge(this[ru].outerComponent)}},{key:o,value:function(){return this[su]().map(this[Fs][vc])}},{key:s,value:function(){return p.queryChildFaceList(this[ru]).map(this[Fs][gc])}},{key:c,value:function(t,e){var n=p.getPolygonFromFaceOuter(this[ru]);return h.containsPoint(n,{x:t,y:e})}}]),l}(Is,au,ou,Rs,Ds,su,uu,cu,lu),pu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t,i){var r;return Object(si["a"])(this,n),r=e.call(this),new du(Object(ea["a"])(r),t,i),Object.freeze(Object(ea["a"])(r)),r}return Object(ci["a"])(n,[{key:"outerHalfEdge",get:function(){return fu(this)[au].$}},{key:"innerHalfEdgeList",get:function(){return fu(this)[ou].map(Yc)}},{key:"getChildFaceList",value:function(){return fu(this)[cu]().map(Yc)}},{key:"getOuterHalfEdgeList",value:function(){return fu(this)[uu]().map(Yc)}},{key:"containsPoint",value:function(t,e){return fu(this)[lu](t,e)}}]),n}(Hs),vu=function(t){return new pu(t,p.createGlobalFace())},gu=new WeakMap,mu=function(t){return gu.get(t)},yu=function(t,e,n,i,r,a,o,s,c,u){Object(Ur["a"])(h,t);var l=Object(Yr["a"])(h);function h(t,e,n){var i;return Object(si["a"])(this,h),i=l.call(this,t,e),gu.set(t,Object(ea["a"])(i)),i.$=t,i[Nc]=n,i[Dc]=null,i[Rs](),i}return Object(ci["a"])(h,[{key:e,value:function(){this[Fs][ec].set(this[Nc],this)}},{key:n,value:function(){this[Nc]=null,this[Dc]=null}},{key:i,get:function(){return this[Nc].twin}},{key:r,get:function(){return this[Fs][pc](this[Nc].origin)}},{key:a,get:function(){return this[Fs][gc](this[Nc].incidentFace)}},{key:o,get:function(){return this[Fs][vc](this[Nc].next)}},{key:s,get:function(){return this[Fs][vc](this[Nc].previous)}},{key:c,get:function(){return this[Fs][vc](this[Ac])}},{key:u,value:regeneratorRuntime.mark((function t(){var e,n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this[Fs][vc],n=Object(Ue["a"])(p.Iterator.allHalfEdgeOfPath(this[Nc])),t.prev=2,n.s();case 4:if((i=n.n()).done){t.next=10;break}return r=i.value,t.next=8,e(r);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))}]),h}(Is,Rs,Ds,Ac,_c,Rc,Wc,Mc,Ic,Hc),bu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t,i){var r;return Object(si["a"])(this,n),r=e.call(this),new yu(Object(ea["a"])(r),t,i),Object.freeze(Object(ea["a"])(r)),r}return Object(ci["a"])(n,[{key:"vertex",get:function(){return mu(this)[_c].$}},{key:"edge",get:function(){return mu(this)[Dc].$}},{key:"face",get:function(){return mu(this)[Rc].$}},{key:"next",get:function(){return mu(this)[Wc].$}},{key:"previous",get:function(){return mu(this)[Mc].$}},{key:"back",get:function(){return mu(this)[Ic].$}},{key:"path",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(mu(this)[Hc]()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}]),n}(Hs),xu=new WeakMap,$u=function(t){return xu.get(t)},wu=function(t,e,n,i,r,a,o,s,c,u,l,h,f,d,v,g,m,y,b){function x(t){var e;Object(si["a"])(this,x),xu.set(t,this),this.$=t,this[Ks]=new Set,this[qs]=new Set;var n=this[Zs]=new Map,i=this[Qs]=fu(vu(this));this[Js]=new Set;var r=this[tc]=new Map,a=this[ec]=new Map;this[vc]=function(t){return a.get(t)};var o=i[ru];this[gc]=function(t){return o===t?i:r.get(t)},this[pc]=function(t){return n.get(t)},this[jc]=(e={},Object(bt["a"])(e,kc,li["d"]),Object(bt["a"])(e,Tc,li["d"]),Object(bt["a"])(e,Ec,li["d"]),Object(bt["a"])(e,Sc,li["d"]),Object(bt["a"])(e,Cc,li["d"]),Object(bt["a"])(e,Lc,li["d"]),Object(bt["a"])(e,Pc,li["d"]),Object(bt["a"])(e,Fc,li["d"]),e)}return Object(ci["a"])(x,[{key:t,value:function(t,e){var n=new Gc(this,t,e);return this[jc][kc](n),n}},{key:e,value:function(t,e,n){t[Xs](e,n)}},{key:n,value:function(t,e){var n=this[Qs][ru],i=t[Bs],r=e[Bs],a=ws(i,r,n),o=a.twin,s=a.incidentFace,c=o.incidentFace;if(s!==c){var u=this[gc](s)?c:s,l=new pu(this,u);fu(l)[_s](),this[jc][Cc](l)}var h=new bu(this,a),f=new bu(this,o),d=new iu(this,mu(h));return this[jc][Pc](h),this[jc][Pc](f),this[jc][Ec](d),d}},{key:i,value:function(t,e){var n=p.splitHalfEdgeByVertex(t[Qc][Nc],e[Bs]),i=t[Qc][Ac],r=new bu(this,n),a=new bu(this,i),o=new iu(this,mu(r));return t[Zc][Dc]=t,this[jc][Pc](r),this[jc][Pc](a),this[jc][Ec](o),o}},{key:r,value:function(t){var e=t[Bs],n=p.getVertexHalfEdgeList(e);2!==n.length&&li["b"].throwError("The MeshHalfEdge number of this MeshVertex is NOT 2.");var i=this[vc](e.incidentEdge.twin.next)[Dc],r=this[vc](e.incidentEdge)[Dc],a=this[vc](Cs(e));a[Ic][Dc]=r,r[Qc]=a,i[Qc]=n[0];var o,s=Object(Ue["a"])(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;this[vc](c)[Dc]=i}}catch(u){s.e(u)}finally{s.f()}return this[wc](),this[Zs].delete(t[Bs]),this[qs].delete(t),this[jc][Tc](t.$),r}},{key:a,value:function(t){var e=t[Qc],n=e[Nc],i=Ps(n);return this[$c](),this[wc](),this[Oc](),this[pc](i)}},{key:o,value:function(t){Es(t[Bs]),this[wc](),this[Oc]()}},{key:s,value:function(t){this[cc](t),t[Ns](),this[Zs].delete(t[Bs]),this[qs].delete(t),this[jc][Tc](t.$)}},{key:c,value:function(t){Ts(t[Qc][Nc]),this[wc](),this[Oc]()}},{key:u,value:function(t){return this[qs].has(t)}},{key:l,value:function(t){return this[Ks].has(t)}},{key:h,value:function(t){return this[Js].has(t)}},{key:f,value:function(){return Array.from(this[Ks])}},{key:d,value:function(){return Array.from(this[Js])}},{key:v,value:function(){return Array.from(this[qs])}},{key:g,value:function(t,e){var n=this[Qs],i=n[ru],r=p.getFaceOfPoint(i,{x:t,y:e});return r===i?n:this[gc](r)}},{key:m,value:function(){var t,e=this[Zs],n=this[qs],i=[],r=Object(Ue["a"])(e);try{for(r.s();!(t=r.n()).done;){var a=Object(tr["a"])(t.value,2),o=a[0],s=a[1];li["g"].isNull(o.incidentEdge)&&(n.delete(s),s[Ns](),i.push(o),this[jc][Tc](s.$))}}catch(h){r.e(h)}finally{r.f()}for(var c=0,u=i;c<u.length;c++){var l=u[c];e.delete(l)}}},{key:y,value:function(){var t,e=this[ec],n=this[Ks],i=[],r=new Set,a=Object(Ue["a"])(e);try{for(a.s();!(t=a.n()).done;){var o=Object(tr["a"])(t.value,2),s=o[0],c=o[1];if(li["g"].isNull(s.twin)){var u=c[Dc];n.delete(u),u[Ns](),c[Ns](),i.push(s),r.add(u),this[jc][Fc](c.$)}}}catch(g){a.e(g)}finally{a.f()}for(var l=0,h=i;l<h.length;l++){var f=h[l];e.delete(f)}var d,p=Object(Ue["a"])(r);try{for(p.s();!(d=p.n()).done;){var v=d.value;this[jc][Sc](v.$)}}catch(g){p.e(g)}finally{p.f()}}},{key:b,value:function(){var t,e=this[tc],n=this[Js],i=[],r=Object(Ue["a"])(e);try{for(r.s();!(t=r.n()).done;){var a=Object(tr["a"])(t.value,2),o=a[0],s=a[1];li["g"].isNull(o.outerComponent)&&(n.delete(s),s[Ns](),i.push(o),this[jc][Lc](s.$))}}catch(h){r.e(h)}finally{r.f()}for(var c=0,u=i;c<u.length;c++){var l=u[c];e.delete(l)}}}]),x}(nc,ic,rc,ac,oc,sc,cc,uc,lc,hc,fc,dc,yc,xc,bc,mc,$c,wc,Oc),Ou=function(){function t(){Object(si["a"])(this,t),new wu(this),li["e"].seal(this)}return Object(ci["a"])(t,[{key:"globalFace",get:function(){return $u(this)[Qs].$}},{key:"createVertex",value:function(t,e){return li["g"].Not.Number(t)&&li["b"].throwError("The `x` MUST be a number."),li["g"].Not.Number(e)&&li["b"].throwError("The `y` MUST be a number."),$u(this)[nc](t,e)}},{key:"moveVertex",value:function(t,e,n){li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),li["g"].Not.Number(e)&&li["b"].Throw.TypeError("Vertex.x MUST be a number."),li["g"].Not.Number(n)&&li["b"].Throw.TypeError("Vertex.y MUST be a number.");var i=$u(this),r=Vc(t);return i[hc](r)||li["b"].throwError("The `vertex` does NOT belong to this mesh."),i[ic](r,e,n)}},{key:"link",value:function(t,e){li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `thisVertex` MUST be a MeshVertex."),li["b"].instanceOf(e,Gc)||li["b"].Throw.TypeError("The `thatVertex` MUST be a MeshVertex.");var n=$u(this),i=Vc(t),r=Vc(e);return n[hc](i)||li["b"].throwError("The `thisVertex` does NOT belong to this mesh."),n[hc](r)||li["b"].throwError("The `thatVertex` does NOT belong to this mesh."),n[rc](i,r)}},{key:"split",value:function(t,e){li["b"].instanceOf(t,iu)||li["b"].Throw.TypeError("The `edge` MUST be a MeshEdge."),li["b"].instanceOf(e,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var n=$u(this),i=eu(t),r=Vc(e);return n[fc](i)||li["b"].throwError("The `edge` does NOT belong to this mesh."),n[hc](r)||li["b"].throwError("The `vertex` does NOT belong to this mesh."),n[ac](i,r)}},{key:"merge",value:function(t){li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=$u(this)[oc](Vc(t));return li["g"].isNull(e)?null:e.$}},{key:"combine",value:function(t){li["b"].instanceOf(t,iu)||li["b"].Throw.TypeError("The `edge` MUST be a MeshEdge.");var e=$u(this)[sc](eu(t));return li["g"].isUndefined(e)?null:e.$}},{key:"clearVertex",value:function(t){li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=$u(this),n=Vc(t);e[hc](n)||li["b"].throwError("The `vertex` does NOT belong to this mesh."),e[cc](n)}},{key:"removeVertex",value:function(t){li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=$u(this),n=Vc(t);e[hc](n)||li["b"].throwError("The `vertex` does NOT belong to this mesh."),e[uc](n)}},{key:"removeEdge",value:function(t){li["b"].instanceOf(t,iu)||li["b"].Throw.TypeError("The `edge` MUST be a MeshEdge.");var e=$u(this),n=eu(t);e[fc](n)||li["b"].throwError("The `edge` does NOT belong to this mesh."),e[lc](n)}},{key:"getAllVertexList",value:function(){return $u(this)[bc]().map(Yc)}},{key:"getAllEdgeList",value:function(){return $u(this)[yc]().map(Yc)}},{key:"getAllFaceList",value:function(){return $u(this)[xc]().map(Yc)}},{key:"hasVertex",value:function(t){return li["b"].instanceOf(t,Gc)||li["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),$u(this)[hc](Vc(t))}},{key:"hasEdge",value:function(t){return li["b"].instanceOf(t,iu)||li["b"].Throw.TypeError("The `edge` MUST be a MeshEdge."),$u(this)[fc](eu(t))}},{key:"hasFace",value:function(t){return li["b"].instanceOf(t,pu)||li["b"].Throw.TypeError("The `face` MUST be a MeshFace."),$u(this)[dc](fu(t))}},{key:"getFaceOfPoint",value:function(t,e){return li["g"].Not.Number(t)&&li["b"].Throw.TypeError("The `x` MUST be a number."),li["g"].Not.Number(e)&&li["b"].Throw.TypeError("The `y` MUST be a number."),$u(this)[mc](t,e).$}},{key:"flush",value:function(){var t=$u(this);t[$c](),t[wc](),t[Oc]()}},{key:"flushVertex",value:function(){$u(this)[$c]()}}]),t}(),ju=function(){var t=Object(tr["a"])(Tu[ku],2),e=t[0],n=t[1];li["e"].defineProperty(Ou.prototype,e,{get:function(){return $u(this)[jc][n]},set:function(t){li["g"].Not.Function(t)&&li["b"].Throw.TypeError("listener MUST be a function."),$u(this)[jc][n]=t}})},ku=0,Tu=[["onVertexCreate",kc],["onVertexDestroy",Tc],["onEdgeCreate",Ec],["onEdgeDestroy",Sc],["onFaceCreate",Cc],["onFaceDestroy",Lc],["onHalfEdgeCreate",Pc],["onHalfEdgeDestroy",Fc]];ku<Tu.length;ku++)ju();function Eu(){return{mesh:new Ou,vertexToCorner:new Map,edgeToWall:new Map,faceToRoom:new Map,halfEdgeToSurface:new Map}}var Su=w.define({options:ms,data:Eu,proxy:y.Proxy.Creator(ds),created:function(){var t=this,e=this.$data,n=e.mesh,i=e.vertexToCorner,r=e.edgeToWall,a=e.halfEdgeToSurface,o=e.faceToRoom;n.onFaceCreate=function(e){return t.$createElement("Room",e)},n.onEdgeCreate=function(e){return t.$createElement("Wall",e)},n.onVertexCreate=function(e){return t.$createElement("Corner",e)},n.onHalfEdgeCreate=function(e){return t.$createElement("Surface",e)},n.onFaceDestroy=function(t){o.get(t).$destroy(),o.delete(t)},n.onVertexDestroy=function(t){i.get(t).$destroy(),i.delete(t)},n.onEdgeDestroy=function(t){r.get(t).$destroy(),r.delete(t)},n.onHalfEdgeDestroy=function(t){a.get(t).$destroy(),a.delete(t)},this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}));var s=this.$options.snap;this.$drawing.registerSnap({name:"structure-corner",get priority(){return s.corner.priority},get active(){return s.corner.active},handle:function(e,n,r){var a,o=Object(Ue["a"])(i);try{for(o.s();!(a=o.n()).done;){var u=Object(tr["a"])(a.value,1),l=u[0],h=t.$toCanvas(l.x,l.y),f=c.distanceToPoint.apply(c,[e,n].concat(Object(ui["a"])(h)));if(f<s.corner.maxDistance)return r.apply(void 0,Object(ui["a"])(h))}}catch(d){o.e(d)}finally{o.f()}}})},methods:{assertNoCornerAt:function(t,e){this.queryCorner(t,e)&&li["b"].throwError("It could NOT create a new `Corner` in same place")},createCorner:function(t,e){this.assertNoCornerAt(t,e);var n=this.$data,i=n.mesh,r=n.vertexToCorner;return r.get(i.createVertex(t,e))},removeCorner:function(t){return t.remove()},createWall:function(t,e){var n=this.$data,i=n.mesh,r=n.edgeToWall;return r.get(i.link(t.vertex,e.vertex))},removeWall:function(t){return t.remove()},removeWallSimple:function(t){return t.removeSimple()},split:function(t,e,n,i){this.assertNoCornerAt(e,n);var r=t.thisSurface.corner,a=t.thatSurface.corner,o=this.createCorner(e,n),s=this.$data.mesh.split(t.$state.edge,o.vertex),c=this.$data.edgeToWall.get(s);return i(c,t,o),r.updateSurfaces(),a.updateSurfaces(),o.updateSurfaces(),o},merge:function(t){var e=this.$data,n=e.mesh,i=e.edgeToWall,r=n.merge(t.$state.vertex),a=i.get(r);return a.thisSurface.corner.updateSurfaces(),a.thatSurface.corner.updateSurfaces(),a},combine:function(t){var e=this.$data,n=e.mesh,i=e.vertexToCorner,r=n.combine(t.$state.edge),a=i.get(r);return a.updateAllSiblingSurface(),a},queryCorner:function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Object(Ue["a"])(this.$data.vertexToCorner);try{for(r.s();!(n=r.n()).done;){var o=Object(tr["a"])(n.value,2),s=o[0],c=o[1],u=a.fromBothPoint(s.x,s.y,t,e);if(a.length.apply(a,Object(ui["a"])(u))<i)return c}}catch(l){r.e(l)}finally{r.f()}return null},queryWallByFromTo:function(t,e){return t.getWallByToCorner(e)},getRoomOfPoint:function(t,e){var n=this.$data,i=n.mesh,r=n.faceToRoom;return r.get(i.getFaceOfPoint(t,e))}}}),Cu=function(t){return t.back.vertex},Lu=function(t){return t.updateSurfaces()};function Pu(t){return this.get(t)}var Fu,Au,Nu,_u,Du=w.Element.define({proxy:y.Proxy.Creator(ls),groupIndex:1e3,interative:!0,focusable:!0,hoverable:!0,render:function(t){var e=this.$plugin.$options.corner.style,n=e.color,i=e.opacity,r=e.radius,a=e.hover,o=this.$state.vertex,s=o.x,c=o.y,u=this.$toCanvas(s,c),l=Object(tr["a"])(u,2),h=l[0],f=l[1];this.$hovering?t.beginFill(a.color,a.opacity):t.beginFill(n,i),t.drawCircle(0,0,r).endFill(),t.x=h,t.y=f,this.$state.rendering&&(this.$emit("change",this.$proxy),this.setRendering(!1))},created:function(t){this.$data.vertexToCorner.set(this.$state.vertex=t,this)},state:function(){return{vertex:null,point:[0,0],rendering:!1}},getters:{x:function(){return this.vertex.x},y:function(){return this.vertex.y},point:function(){var t=this.vertex,e=t.x,n=t.y,i=this.$state.point;return i[0]=e,i[1]=n,i},vertex:function(){return this.$state.vertex},size:function(){return this.$state.vertex.size},destroyed:function(){return this.$state.vertex.destroyed}},methods:{move:function(t,e){var n=this.$plugin.queryCorner(t,e);li["g"].Not.Null(n)&&n!==this&&li["b"].throwError("It could NOT move the Corner to the same <".concat(t,", ").concat(e,"> place.")),this.$state.vertex.move(t,e),this.updateAllSiblingSurface(),this.$setDirty(),this.setRendering(!0)},remove:function(){var t=this.$state.vertex,e=this.$data,n=e.mesh,i=e.vertexToCorner,r=t.getHalfEdgeList().map(Cu).map(Pu,i);n.removeVertex(t);var a,o=Object(Ue["a"])(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.updateSurfaces()}}catch(c){o.e(c)}finally{o.f()}return this},surfaces:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$state.vertex.halfEdges()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,this.$data.halfEdgeToSurface.get(i);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})),getWallByToCorner:function(t){var e,n=Object(Ue["a"])(this.surfaces());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.back.corner===t)return i.wall}}catch(r){n.e(r)}finally{n.f()}return null},getAdjacentCornerList:function(){return this.$state.vertex.getHalfEdgeList().map(Cu).map(Pu,this.$data.vertexToCorner)},updateAllSiblingSurface:function(){this.getAdjacentCornerList().concat([this]).forEach(Lu)},updateSurfaces:function(){var t,e=Object(Ue["a"])(this.surfaces());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.update()}}catch(i){e.e(i)}finally{e.f()}},setRendering:function(t){this.$state.rendering=t}}},Su),Ru=w.Element.define({proxy:y.Proxy.Creator(fs),groupIndex:900,interative:!0,focusable:!0,hoverable:!0,render:function(t){var e,n,i=this.$plugin.$options.wall,r=i.midline,a=i.style,o=a.color,s=a.hoverColor,c=this.$state.edge,u=c.thisVertex,l=c.thatVertex,h=[u.x,u.y],f=[l.x,l.y];(t.beginFill(this.$hovering?s:o),this.drawPolygon(t),t.endFill(),r.show)&&(e=(n=t.lineStyle(r.width,r.color)).moveTo.apply(n,Object(ui["a"])(this.$toCanvas.apply(this,h)))).lineTo.apply(e,Object(ui["a"])(this.$toCanvas.apply(this,f)));this.$state.rendering&&(this.$emit("change",this.$proxy),this.setRendering(!1))},created:function(t){var e=this,n=t.thisVertex,i=t.thatVertex,r=this.$data,a=r.edgeToWall,o=r.vertexToCorner;a.set(this.$state.edge=t,this),o.get(n).updateSurfaces(),o.get(i).updateSurfaces(),this.$on("dirty",(function(){if(!t.destroyed){var n=e.thisSurface,i=e.thatSurface,r=n.room,a=i.room;li["g"].Not.Null(r)&&r.$setDirty(),li["g"].Not.Null(a)&&a.$setDirty(),n.emitChange(),i.emitChange()}}))},state:function(){return{type:0,thickness:200,edge:null,rendering:!1}},getters:{thisSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thisHalfEdge)},thatSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thatHalfEdge)},segment:function(){var t=this.$state.edge,e=t.thisVertex,n=t.thatVertex;return r.Segment(e.x,e.y,n.x,n.y)}},methods:{drawPolygon:function(t){var e=this.$state.edge,n=e.thisVertex,i=e.thatVertex,r=[n.x,n.y],a=[i.x,i.y],o=this.thisSurface,s=this.thatSurface;t.drawPolygon.apply(t,Object(ui["a"])(this.$toCanvas.apply(this,r)).concat(Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(o.origin))),Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(o.target))),Object(ui["a"])(this.$toCanvas.apply(this,a)),Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(s.origin))),Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(s.target)))))},setThickness:function(t){this.$state.thickness=t,this.thisSurface.corner.updateSurfaces(),this.thatSurface.corner.updateSurfaces(),this.$setDirty(),this.setRendering(!0)},remove:function(){var t=this.thisSurface.corner,e=this.thatSurface.corner;this.removeSimple();for(var n=0,i=[t,e];n<i.length;n++){var r=i[n];0===r.size?r.remove():r.updateSurfaces()}return this.$proxy},removeSimple:function(){return this.$data.mesh.removeEdge(this.$state.edge),this.$proxy},setRendering:function(t){this.$state.rendering=t}}},Su),Wu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"back",get:function(){return Ro(this).back.$proxy}},{key:"previous",get:function(){return Ro(this).previous.$proxy}},{key:"next",get:function(){return Ro(this).next.$proxy}},{key:"corner",get:function(){return Ro(this).corner.$proxy}},{key:"wall",get:function(){return Ro(this).wall.$proxy}},{key:"room",get:function(){var t=Ro(this).room;return t?t.$proxy:null}},{key:"origin",get:function(){return Ro(this).origin}},{key:"target",get:function(){return Ro(this).target}},{key:"originSafe",get:function(){return this.origin.slice(0)}},{key:"targetSafe",get:function(){return this.target.slice(0)}}]),n}(y.Proxy.Element),Mu=function(t,e,n){n[0]=t,n[1]=e},Iu=w.Element.define({proxy:y.Proxy.Creator(Wu),groupIndex:920,state:function(){return{halfEdge:null,origin:[0,0],target:[0,0],normal:Object(ui["a"])(r.Vector(0,0)),translation:Object(ui["a"])(r.Vector(0,0)),line:Object(ui["a"])(r.Line(0,0,0,0))}},render:function(t){var e,n,i,r=this.$state,a=r.origin,o=r.target;(e=(n=(i=t.lineStyle(1.5,2236962)).moveTo.apply(i,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(a))))).lineTo.apply(n,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(o))))).lineTo.apply(e,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(this.next.origin))))},created:function(t){this.$data.halfEdgeToSurface.set(this.$state.halfEdge=t,this)},getters:{next:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.next)},previous:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.previous)},back:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.back)},corner:function(){return this.$data.vertexToCorner.get(this.$state.halfEdge.vertex)},wall:function(){return this.$data.edgeToWall.get(this.$state.halfEdge.edge)},room:function(){var t=this.$state.halfEdge.face,e=this.$data.faceToRoom.get(t);return li["g"].isUndefined(e)?null:e},origin:function(){return this.$state.origin},target:function(){return this.$state.target}},methods:{setOrigin:function(t,e){return Mu(t,e,this.$state.origin),this.$setDirty(),this},setTarget:function(t,e){return Mu(t,e,this.$state.target),this.$setDirty(),this},path:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$state.halfEdge.path()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,this.$data.halfEdgeToSurface.get(i);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})),getLine:function(){var t=this.$state,e=t.normal,n=t.line,i=t.translation,o=this.wall.$state.thickness/2,s=this.corner.point,u=this.next.corner.point;return li["e"].assign(e,a.rotate90.apply(a,Object(ui["a"])(a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,Object(ui["a"])(s).concat(Object(ui["a"])(u)))))))),li["e"].assign(i,a.multiply.apply(a,Object(ui["a"])(e).concat([o]))),li["e"].assign(n,r.Line.apply(r,Object(ui["a"])(c.translate.apply(c,Object(ui["a"])(s).concat(Object(ui["a"])(i)))).concat(Object(ui["a"])(e))))},update:function(){this.updateSelf(),this.back.updateSelf(),this.wall.$setDirty()},updateSelf:function(){var t=this.$state,e=t.origin,n=t.target,i=t.translation,r=this.getLine(),a=s.intersectLine.apply(s,Object(ui["a"])(r).concat(Object(ui["a"])(this.previous.getLine())));li["e"].assign(e,li["g"].isNull(a)?c.translate.apply(c,Object(ui["a"])(this.corner.point).concat(Object(ui["a"])(i))):a);var o=s.intersectLine.apply(s,Object(ui["a"])(r).concat(Object(ui["a"])(this.next.getLine())));li["e"].assign(n,li["g"].isNull(o)?c.translate.apply(c,Object(ui["a"])(this.next.corner.point).concat(Object(ui["a"])(i))):o),this.$setDirty()},emitChange:function(){this.$emit("change")}}},Su),Hu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"area",get:function(){return Ro(this).area}},{key:"bounds",get:function(){return Ro(this).$getBounds()}},{key:"setFloor",value:function(t){return Ro(this).setFloor(t)}},{key:"getOuterSurfaceList",value:function(){return Ro(this).getOuterSurfaceList()}}]),n}(y.Proxy.Element),Bu=ra,Vu=w.Element.define({proxy:y.Proxy.Creator(Hu),groupIndex:800,interative:!0,focusable:!0,hoverable:!0,render:function(t){if(this.$plugin.$options.room.show){var e,n,i=this.$state.textureOptions,r=this.$drawing,a=r.origin,o=r.scale,s=[],c=Object(Ue["a"])(this.outerSurface.path());try{for(c.s();!(e=c.n()).done;){var u=e.value;s.push.apply(s,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(u.origin))).concat(Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(u.target)))))}}catch(b){c.e(b)}finally{c.f()}if(li["g"].Not.Null(i.texture))(n=i.matrix).set.apply(n,[5/o,0,0,5/o].concat(Object(ui["a"])(a))),t.beginTextureFill(i);else t.beginFill(16777215,.01);t.drawPolygon(s).beginHole();var l,h=Object(Ue["a"])(this.innerSurfaceList);try{for(h.s();!(l=h.n()).done;){var f,d=l.value,p=[],v=Object(Ue["a"])(d.path());try{for(v.s();!(f=v.n()).done;){var g=f.value,m=g.origin,y=g.target;p.push.apply(p,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(m))).concat(Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(y)))))}}catch(b){v.e(b)}finally{v.f()}t.drawPolygon.apply(t,p)}}catch(b){h.e(b)}finally{h.f()}}},state:function(){return{face:null,textureOptions:{texture:null,matrix:new Bu.Matrix}}},created:function(t){this.$data.faceToRoom.set(this.$state.face=t,this)},getters:{outerSurface:function(){return this.toSurface(this.$state.face.outerHalfEdge)},innerSurfaceList:function(){return this.$state.face.innerHalfEdgeList.map(this.toSurface,this)},area:function(){var t,e=this.areaOfSurface(this.outerSurface),n=Object(Ue["a"])(this.innerSurfaceList);try{for(n.s();!(t=n.n()).done;){var i=t.value;e-=this.areaOfSurface(i)}}catch(r){n.e(r)}finally{n.f()}return e}},methods:{areaOfSurface:function(t){var e,n=[],i=Object(Ue["a"])(t.path());try{for(i.s();!(e=i.n()).done;){var r=e.value,a=r.origin,o=r.target;n.push.apply(n,Object(ui["a"])(a).concat(Object(ui["a"])(o)))}}catch(s){i.e(s)}finally{i.f()}return li["c"].abs(h.area.apply(h,n))},toSurface:function(t){return this.$data.halfEdgeToSurface.get(t)},setFloor:function(){var t=arguments,e=this;return Object(qo["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:null,!i){n.next=7;break}return n.next=4,Bu.Texture.fromURL(i);case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0=i;case 8:e.$state.textureOptions.texture=n.t0,e.$setDirty();case 10:case"end":return n.stop()}}),n)})))()},getOuterSurfaceList:function(){var t=this.$data.halfEdgeToSurface,e=this.$state.face;return e.getOuterHalfEdgeList().map((function(e){return t.get(e).$proxy}))}}},Su),zu="com.3dnest.spoke.structure",Uu="structure",Yu=O.define({id:zu,namespace:Uu,version:cs["a"],plugin:Su,elements:{Corner:Du,Wall:Ru,Surface:Iu,Room:Vu}}),Gu=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"Builder",get:function(){return Ro(this).$data.builder}},{key:"Mover",get:function(){return Ro(this).$data.mover}},{key:"Spliter",get:function(){return Ro(this).$data.spliter}},{key:"Extender",get:function(){return Ro(this).$data.extender}},{key:"Chamber",get:function(){return Ro(this).$data.chamber}}]),n}(y.Proxy.Plugin),Xu=y.Options.define,Ku=Xu({},{spliter:Xu({},{interaction:Xu({distance:50})})}),qu=w.define({options:Ku,proxy:y.Proxy.Creator(Gu),data:function(){return{builder:null,mover:null,spliter:null,extender:null,chamber:null}},created:function(){li["e"].assign(this.$data,{builder:this.$createTool("Builder"),mover:this.$createTool("Mover"),spliter:this.$createTool("Spliter"),extender:this.$createTool("Extender"),chamber:this.$createTool("Chamber")})}}),Ju=5,Qu=65280,Zu={left:0,center:.5,right:1},tl=w.Element.define({groupIndex:1200,interative:!0,state:function(){return{from:[0,0],to:[0,0],thickness:200,alignment:"center"}},render:function(t){var e=this.$drawing.scale,n=this.$state,i=n.from,r=n.to,a=n.thickness,o=n.alignment,s=this.$toCanvas.apply(this,Object(ui["a"])(i)),c=Object(tr["a"])(s,2),u=c[0],l=c[1],h=this.$toCanvas.apply(this,Object(ui["a"])(r)),f=Object(tr["a"])(h,2),d=f[0],p=f[1];t.lineStyle(a/e,10066329,1,Zu[o]).moveTo(u,l).lineTo(d,p).beginFill(Qu).lineStyle(0).drawCircle(d,p,Ju).drawCircle(u,l,Ju)},created:function(){this.$hide()},methods:{setFrom:function(t,e){var n=this.$state,i=n.from,r=n.to;i[0]=r[0]=t,i[1]=r[1]=e,this.$setDirty()},setTo:function(t,e){this.$state.to[0]=t,this.$state.to[1]=e,this.$setDirty()},setThickness:function(t){this.$state.thickness=t,this.$setDirty()},setAlignment:function(t){this.$state.alignment=t,this.$setDirty()}}},qu),el=Symbol("PickupFrom"),nl=Symbol("PickupTo"),il=10,rl=function(t,e,n){var i=t.queryCorner(e,n,il);return i||t.createCorner(e,n)},al=function(t,e,n,i){var r,a=[],o=Object(Ue["a"])(t.getAllWallList());try{var s=function(){var i=r.value,o=l.intersectSegment.apply(l,Object(ui["a"])(i.segment).concat(Object(ui["a"])(e),Object(ui["a"])(n)));li["g"].Not.Null(o)&&a.push({distance:c.distanceToPoint.apply(c,Object(ui["a"])(o).concat(Object(ui["a"])(e))),corner:t.split.apply(t,[i].concat(Object(ui["a"])(o),[function(t){t.thickness=i.thickness}]))})};for(o.s();!(r=o.n()).done;)s()}catch(u){o.e(u)}finally{o.f()}a.sort((function(t,e){return t.distance-e.distance})).map((function(t){return t.corner})).concat([rl.apply(void 0,[t].concat(Object(ui["a"])(n)))]).reduce((function(e,n){var r=t.createWall(e,n);return r.thickness=i,n}),rl.apply(void 0,[t].concat(Object(ui["a"])(e))))},ol=function(t,e,n,i,r,a){return t>n===t<r&&e>i===e<a},sl=w.Tool.READY,cl=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"from",get:function(){var t=Ro(this);return t.getCorner.apply(t,Object(ui["a"])(t.$data.from))}},{key:"to",get:function(){var t=Ro(this);return t.getCorner.apply(t,Object(ui["a"])(t.$data.to))}},{key:"setThickness",value:function(t){Ro(this).setThickness(t)}},{key:"setAlignment",value:function(t){Ro(this).setAlignment(t)}}]),n}(y.Proxy.ToolProvider(["build","pick","drop"])),ul=w.Tool.define((Fu={},Object(bt["a"])(Fu,sl,{entry:function(){this.$data.indicator.$hide()},leave:function(){this.$data.indicator.$show()}}),Object(bt["a"])(Fu,el,(function(){this.setFromByTo()})),Fu),{build:[nl,function(){var t=this.$data,e=t.from,n=t.to,i=t.thickness,r=this.$plugin.$drawing.structure;this.handleEndpoint(e,n),al(r,e,n,i),this.setFromByTo(),this.$emit("end"),this.$emit("build")},sl],pick:[[sl,li["d"],el],[el,li["d"],nl]],drop:[[nl,li["d"],el],[el,li["d"],sl],[sl,li["d"],sl]]},{proxy:y.Proxy.Creator(cl),data:function(t){var e,n=this,i=t.$createElement("Builder"),r=[0,0],a=[0,0],o=(e={},Object(bt["a"])(e,el,(function(t){li["e"].assign(r,t),i.setFrom.apply(i,Object(ui["a"])(t))})),Object(bt["a"])(e,nl,(function(t){li["e"].assign(a,t),i.setTo.apply(i,Object(ui["a"])(t))})),e);return t.$drawing.on("pointermove",(function(e){if(n.$state!==sl){var i=e.virtualX,r=e.virtualY;o[n.$state](t.$toGeometry(i,r))}})),{indicator:i,thickness:200,alignment:"center",from:r,to:a}},reset:function(){this.$data.indicator.$hide(),this.$emit("end")},methods:{setFromByTo:function(){var t=this.$data,e=t.from,n=t.to,i=t.indicator;li["e"].assign(e,n),i.setFrom.apply(i,Object(ui["a"])(e))},setThickness:function(t){this.$data.thickness=t,this.$data.indicator.setThickness(t)},setAlignment:function(t){this.$data.alignment=t,this.$data.indicator.setAlignment(t)},getCorner:function(t,e){return this.$plugin.$drawing.structure.queryCorner(t,e)},handleEndpoint:function(t,e){var n,i=this.$plugin.$drawing.structure,r=Object(ui["a"])(s.fromSegment.apply(s,Object(ui["a"])(t).concat(Object(ui["a"])(e)))),a=[{point:t,distance:1/0,wall:null,name:"from"},{point:e,distance:1/0,wall:null,name:"to"}],o=Object(Ue["a"])(i.getAllWallList());try{for(o.s();!(n=o.n()).done;){var u=n.value,l=s.fromSegment.apply(s,Object(ui["a"])(u.segment)),h=s.intersectLine.apply(s,Object(ui["a"])(l).concat(Object(ui["a"])(r))),f=u.thickness/2;if(li["g"].Not.Null(h)&&ol.apply(S,Object(ui["a"])(h).concat(Object(ui["a"])(u.segment)))){var d,p=Object(Ue["a"])(a);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=c.distanceToPoint.apply(c,Object(ui["a"])(v.point).concat(Object(ui["a"])(h)));g<f&&(v.point=Object(ui["a"])(h),v.distance=g,v.wall=u)}}catch(j){p.e(j)}finally{p.f()}}}}catch(j){o.e(j)}finally{o.f()}for(var m=0,y=a;m<y.length;m++){var b=y[m],x=b.point,$=b.distance,w=b.wall,O=b.name;isFinite($)&&(i.queryCorner.apply(i,Object(ui["a"])(x).concat([20]))||i.split.apply(i,[w].concat(Object(ui["a"])(x))),li["e"].assign(this.$data[O],x))}}}}),ll=0,hl=1,fl=function(t){return t.corner},dl=function(t){return t.back.corner},pl=(Au={},Object(bt["a"])(Au,ll,li["e"].freeze({name:ll,isBare:function(t){return t.previous===t.back},getSibling:function(t){return t.previous},getSourceCorner:dl,getTargetCorner:fl,compare:o.LT})),Object(bt["a"])(Au,hl,li["e"].freeze({name:hl,isBare:function(t){return t.next===t.back},getSibling:function(t){return t.next},getSourceCorner:fl,getTargetCorner:dl,compare:o.GT})),Au),vl=(n("00b4"),function(t){return a.fromBothPoint.apply(a,Object(ui["a"])(t.corner.point).concat(Object(ui["a"])(t.next.corner.point)))}),gl=function(t,e){return a.cross.apply(a,Object(ui["a"])(vl(t)).concat(Object(ui["a"])(vl(e))))},ml=function(t,e){return a.dot.apply(a,Object(ui["a"])(vl(t)).concat(Object(ui["a"])(vl(e))))},yl=function(t){return s.fromSegment.apply(s,Object(ui["a"])(t.corner.point).concat(Object(ui["a"])(t.next.corner.point)))},bl=function(t){return yl(t.current)},xl=function(t){var e=t.plan.structure,n=e.createCorner.apply(e,Object(ui["a"])(t.intersection));return e.createWall(t.accessor.getSourceCorner(t.current),n),n},$l=[{name:"⊥",test:function(t){return o.EQ_0(gl(t.current,t.base))},execute:xl,Line:function(t,e){return[].concat(Object(ui["a"])(e.getSourceCorner(t.current).point),Object(ui["a"])(a.fromSegment.apply(a,Object(ui["a"])(t.target))))}},{name:"<",test:function(t,e){return e.compare(gl(t.current,t.base),0)},execute:xl,Line:bl},{name:"x",test:function(t){var e=t.current.corner,n=t.current.next.corner;return c.toLeftOfSegment.apply(c,Object(ui["a"])(e.point).concat(Object(ui["a"])(t.target)))!==c.toLeftOfSegment.apply(c,Object(ui["a"])(n.point).concat(Object(ui["a"])(t.target)))},execute:function(t){var e=t.plan.structure,n=t.accessor.getSourceCorner(t.current),i=e.split.apply(e,[t.current.wall].concat(Object(ui["a"])(t.intersection)));return t.weak&&setTimeout((function(){i.getWallByToCorner(n).remove()}),5),i},Line:bl},{name:"bare",test:function(t,e){return e.isBare(t.current)},execute:function(t){var e=t.accessor.getTargetCorner(t.current);return e.move.apply(e,Object(ui["a"])(t.intersection)),e},Line:function(t,e){return t.currentSide.weak?[].concat(Object(ui["a"])(e.getTargetCorner(t.current).point),Object(ui["a"])(a.fromSegment.apply(a,Object(ui["a"])(t.target)))):bl(t)}},{test:function(t,e){e.getSibling(t.current)===t.base&&li["b"].throwError("Undefined target surface rule.")}}],wl={name:"null",execute:function(t){var e;return(e=t.plan.structure).createCorner.apply(e,Object(ui["a"])(t.intersection))}},Ol=function(t,e){var n,i=Object(Ue["a"])($l);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.test(t,e))return r}}catch(a){i.e(a)}finally{i.f()}return wl},jl=[0,0,1,1],kl=[0,0],Tl=jl,El=[0,0],Sl=function(){function t(e,n){Object(si["a"])(this,t),this.plan=e,this.accessor=n,this.rule=wl,this.path=[],this.weak=!1,this.intersection=li["e"].assign([],El),this.current=null,this.line=li["e"].assign([],Tl)}return Object(ci["a"])(t,[{key:"merging",get:function(){var t=this.plan.base;if(li["g"].isNull(t))return!1;var e=this.accessor.getTargetCorner(t);return 2===e.size&&this.rule===$l[1]?o.EQ_0(ml(t,this.accessor.getSibling(t))):3===e.size&&o.EQ_0(gl(t.next,t.back.previous))}},{key:"executeRule",value:function(){return this.rule.execute(this)}},{key:"reset",value:function(){this.rule=wl,this.current=null,this.weak=!1,this.path.length=0,li["e"].assign(this.line,Tl),li["e"].assign(this.intersection,El)}}]),t}(),Cl=function(){function t(e){var n;Object(si["a"])(this,t),this.sideName=ll,this.structure=e,this.base=null,this.current=null,this.target=[].concat(jl),this.translation=[].concat(kl),this.removing=new Set,this.side=(n={},Object(bt["a"])(n,ll,new Sl(this,pl[ll])),Object(bt["a"])(n,hl,new Sl(this,pl[hl])),n)}return Object(ci["a"])(t,[{key:"currentSide",get:function(){return this.side[this.sideName]}},{key:"resolve",value:function(t,e){this.reset(),this.base=t,this.removing.add(t);var n=a.normalize.apply(a,Object(ui["a"])(vl(t))),i=a.rotate90.apply(a,Object(ui["a"])(n)),r=a.multiply.apply(a,Object(ui["a"])(i).concat([e]));li["e"].assign(this.translation,r);var o=l.translate.apply(l,Object(ui["a"])(t.corner.point).concat(Object(ui["a"])(t.next.corner.point),Object(ui["a"])(r)));for(var c in li["e"].assign(this.target,o),pl){this.sideName=c;var u=pl[c],h=this.currentSide;if(u.isBare(t))this.setSideLine(c,[].concat(Object(ui["a"])(u.getTargetCorner(t).point),Object(ui["a"])(vl(t))));else{var f=t,d=null,p=!0;do{f=this.current=u.getSibling(f),h.path.push(f),d=Ol(this,u),p&&(p=h.weak=u.getSourceCorner(f).size<3,p&&this.removing.add(f))}while(d===wl);this.setSideLine(c,d.Line(this,u)),h.current=f,h.rule=d}var v=s.intersectLine.apply(s,Object(ui["a"])(h.line).concat(Object(ui["a"])(s.fromSegment.apply(s,Object(ui["a"])(o)))));li["e"].assign(h.intersection,v)}}},{key:"execute",value:function(){var t=[];for(var e in this.side){var n=this.side[e];console.log(n.rule.name),n.merging&&t.push(n.accessor.getTargetCorner(this.base))}var i=this.side[ll].executeRule(),r=this.side[hl].executeRule();for(var a in this.structure.createWall(i,r),this.base.wall.remove(),this.removing)a.wall.remove();console.log(t);for(var o=0,s=t;o<s.length;o++){var c=s[o];this.structure.merge(c)}}},{key:"reset",value:function(){this.base=null,this.current=null,this.sideName=ll,li["e"].assign(this.target,jl),li["e"].assign(this.translation,kl),this.removing.clear(),this.side[ll].reset(),this.side[hl].reset()}},{key:"setSideLine",value:function(t,e){return li["e"].assign(this.side[t].line,e)}}]),t}(),Ll=w.Element.define({groupIndex:1220,interative:!0,state:function(){var t=this;return{wall:null,pointer:[0,0],plan:null,updatePointer:function(e){t.setPointer([e.pointerX,e.pointerY])},finish:function(){t.unbind(),t.$emit("finish")},cancel:function(e){2===e.button&&(t.unbind(),t.$emit("cancel"))}}},render:function(t){var e,n,i,r,a,o=this.$state,s=o.wall,u=o.pointer,l=o.plan,h=this.$toGeometry.apply(this,Object(ui["a"])(u)),f=s.thisSurface,d=s.thatSurface,p=c.toLeftOfSegment.apply(c,Object(ui["a"])(h).concat(Object(ui["a"])(f.corner.point),Object(ui["a"])(d.corner.point)))?f:d,v=c.distanceToSegment.apply(c,Object(ui["a"])(h).concat(Object(ui["a"])(p.corner.point),Object(ui["a"])(p.back.corner.point)));for(var g in l.resolve(p,v),(e=(n=t.lineStyle(10,255)).moveTo.apply(n,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(p.origin))))).lineTo.apply(e,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(p.target)))),l.side){var m,y,b=l.side[g],x=b.path,$=b.intersection,w=Object(Ue["a"])(x);try{for(w.s();!(y=w.n()).done;){var O,j,k=y.value;(O=(j=t.lineStyle(10,l.removing.has(k)?16711680:65280)).moveTo.apply(j,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(k.origin))))).lineTo.apply(O,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(k.target))))}}catch(P){w.e(P)}finally{w.f()}(m=t.lineStyle(5,65280)).drawCircle.apply(m,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])($))).concat([5]))}var T=Object(tr["a"])(l.target,4),E=T[0],S=T[1],C=T[2],L=T[3];(i=(r=t.lineStyle(3)).moveTo.apply(r,Object(ui["a"])(this.$toCanvas(E,S)))).lineTo.apply(i,Object(ui["a"])(this.$toCanvas(C,L))),(a=t.beginFill(0)).drawCircle.apply(a,Object(ui["a"])(this.$state.pointer).concat([5]))},created:function(){this.$hide(),this.$state.plan=new Cl(this.$drawing.structure)},methods:{bind:function(){var t=this.$state,e=t.updatePointer,n=t.finish,i=t.cancel;this.$drawing.on("pointermove",e),na["a"].addEventListener(na["c"].WINDOW,"mouseup",n),na["a"].addEventListener(na["c"].WINDOW,"mousedown",i),this.$show()},unbind:function(){var t=this.$state,e=t.updatePointer,n=t.finish,i=t.cancel;this.$drawing.off("pointermove",e),na["a"].removeEventListener(na["c"].WINDOW,"mouseup",n),na["a"].removeEventListener(na["c"].WINDOW,"mousedown",i),this.$hide()},setPointer:function(t){li["e"].assign(this.$state.pointer,t),this.$setDirty()},setWall:function(t){this.$state.wall=t,this.$setDirty()},reset:function(){this.$state.wall=null,this.$hide()}}}),Pl=Symbol("ExtenderWaiting"),Fl=Symbol("ExtenderActive"),Al=w.Tool.READY,Nl=w.Tool.define((Nu={},Object(bt["a"])(Nu,Fl,(function(){this.$data.indicator.bind()})),Object(bt["a"])(Nu,Pl,(function(){this.$data.indicator.unbind(),this.$data.wall=null})),Nu),{open:[[Pl,li["d"],Pl],[Al,li["d"],Pl]],close:[[Al,li["d"],Al],[Pl,li["d"],Al]],capture:[Pl,function(){var t=this.$data,e=t.indicator,n=t.wall;e.setWall(n)},Fl],release:[Fl,li["d"],Pl],extend:[Fl,function(){this.$data.indicator.$state.plan.execute()},Pl]},{data:function(t){var e=this,n=t.$createElement("Extender"),i={indicator:n,wall:null};return n.$on("cancel",(function(){return e.release()})).$on("finish",(function(){return e.extend()})),t.$drawing.structure.on("wall-created",(function(t){t.on("pointerdown",(function(i){e.$state===Pl&&(i.stopPropagation(),n.setPointer([i.pointerX,i.pointerY]),e.setWall(t),e.capture())}))})),i},methods:{setWall:function(t){this.$data.wall=t,this.$data.indicator.setWall(t)},execute:function(){}}}),_l=w.Element.define({groupIndex:1150,interative:!0,state:function(){var t=this;return{origin:[0,0],current:[0,0],adjacentList:[],updateCurrent:function(e){t.setCurrent([e.virtualX,e.virtualY])},finish:function(){t.unbind(),t.$emit("finish")},cancel:function(e){2===e.button&&(t.unbind(),t.$emit("cancel"))}}},getters:{active:function(){return this.$visible}},created:function(){this.$hide()},render:function(t){var e,n=this.$state,i=n.adjacentList,r=n.current,a=this.$drawing.structure.options.corner.style.radius;(e=t.beginFill(0)).drawCircle.apply(e,Object(ui["a"])(r).concat([a])).lineStyle(2,0);var o,s=Object(Ue["a"])(i);try{for(s.s();!(o=s.n()).done;){var c,u,l,h=o.value,f=this.$toCanvas.apply(this,Object(ui["a"])(h));(c=(u=(l=t.beginFill(16777215)).drawCircle.apply(l,Object(ui["a"])(f).concat([a]))).moveTo.apply(u,Object(ui["a"])(f))).lineTo.apply(c,Object(ui["a"])(r))}}catch(d){s.e(d)}finally{s.f()}},methods:{bind:function(){var t=this.$state,e=t.updateCurrent,n=t.cancel,i=t.finish;this.$drawing.on("pointermove",e),na["a"].addEventListener(na["c"].WINDOW,"mouseup",i),na["a"].addEventListener(na["c"].WINDOW,"mousedown",n),this.$show()},unbind:function(){var t=this.$state,e=t.updateCurrent,n=t.cancel,i=t.finish;this.$drawing.off("pointermove",e),na["a"].removeEventListener(na["c"].WINDOW,"mouseup",i),na["a"].removeEventListener(na["c"].WINDOW,"mousedown",n),this.$hide()},setCurrent:function(t){li["e"].assign(this.$state.current,t),this.$setDirty()},setOrigin:function(t){li["e"].assign(this.$state.origin,t),this.setCurrent(this.$toCanvas.apply(this,Object(ui["a"])(t)))},setSiblingList:function(t){this.$state.adjacentList=t,this.$setDirty()}}},qu),Dl=Symbol("MoverWaiting"),Rl=Symbol("MoverActive"),Wl=w.Tool.READY,Ml=["open","close"],Il=function(t){return li["b"].instanceOf(t,ls)},Hl=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"setCorner",value:function(t){Il(t)&&li["b"].Throw.TypeError("Invalid corner, a Strucure.CornerProxy expected."),Ro(this).setCorner(t)}}]),n}(y.Proxy.ToolProvider(Ml)),Bl=w.Tool.define((_u={},Object(bt["a"])(_u,Rl,(function(){this.$data.indicator.bind()})),Object(bt["a"])(_u,Dl,(function(){this.$data.indicator.unbind(),this.$data.corner=null})),_u),{open:[[Wl,li["d"],Dl],[Dl,li["d"],Dl]],close:[[Dl,li["d"],Wl],[Wl,li["d"],Wl]],capture:[Dl,function(){this.setCorner(this.$data.corner)},Rl],release:[Rl,li["d"],Dl],move:[Rl,function(){var t,e=this.$plugin.$drawing.structure,n=this.$data,i=n.indicator,r=n.corner,a=(t=this.$plugin).$toGeometry.apply(t,Object(ui["a"])(i.$state.current)),o=e.queryCorner.apply(e,Object(ui["a"])(a)),s=li["g"].isNull(o)?r:e.combine(e.createWall(o,r));s.move.apply(s,Object(ui["a"])(a))},Dl]},{proxy:y.Proxy.Creator(Hl),data:function(t){var e=this,n=t.$createElement("Mover"),i={corner:null,indicator:n};return n.$on("cancel",(function(){return e.release()})).$on("finish",(function(){return e.move()})),t.$drawing.structure.on("corner-created",(function(t){t.on("pointerdown",(function(n){e.$state===Dl&&(n.stopPropagation(),e.setCorner(t),e.capture())}))})),i},reset:function(){this.$data.indicator.$hide(),this.$data.corner=null},methods:{setCorner:function(t){var e=this.$data.indicator,n=t.getAdjacentCornerList().map(Vl);this.$data.corner=t,e.setOrigin(Vl(t)),e.setSiblingList(n)}}}),Vl=function(t){return[t.x,t.y]},zl=w.Element.define({groupIndex:1210,state:function(){return{breakpoint:[0,0],segment:[0,0,0,0]}},render:function(t){var e,n,i,r=this.$state,o=r.segment,s=r.breakpoint,u=Object(tr["a"])(o,4),l=u[0],h=u[1],f=u[2],d=u[3],p=a.rotate90.apply(a,Object(ui["a"])(a.normalize.apply(a,Object(ui["a"])(a.fromSegment.apply(a,Object(ui["a"])(o)))))),v=a.multiply.apply(a,Object(ui["a"])(p).concat([30]));(e=(n=(i=t.lineStyle(1,0)).moveTo.apply(i,Object(ui["a"])(c.translate.apply(c,Object(ui["a"])(s).concat(Object(ui["a"])(v)))))).lineTo.apply(n,Object(ui["a"])(c.translate.apply(c,Object(ui["a"])(s).concat(Object(ui["a"])(a.invert.apply(a,Object(ui["a"])(v))))))).moveTo(l,h).lineTo(f,d).beginFill(65280)).drawCircle.apply(e,Object(ui["a"])(s).concat([5]))},created:function(){this.$hide()},methods:{setBreakpoint:function(t){li["e"].assign(this.$state.breakpoint,t),this.$setDirty()},setSegment:function(t){li["e"].assign(this.$state.segment,t),this.$setDirty()}}},qu),Ul=Symbol("SpliterDetecting"),Yl=Symbol("SpliterDetected"),Gl=w.Tool.READY,Xl=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.ToolProvider(["open","close"])),Kl=w.Tool.define(Object(bt["a"])({},Yl,{entry:function(){this.$data.indicator.$show()},leave:function(){this.$data.indicator.$hide()}}),{open:[Gl,li["d"],Ul],found:[[Ul,li["d"],Yl],[Yl,li["d"],Yl]],lost:[[Yl,li["d"],Ul],[Ul,li["d"],Ul]],close:[[Gl,li["d"],Gl],[Ul,li["d"],Gl],[Yl,li["d"],Gl]]},{proxy:y.Proxy.Creator(Xl),data:function(t){var e=this,n=t.$createElement("Spliter"),i={indicator:n,target:null,breakpoint:[0,0]},r=t.$drawing,a=r.structure;return r.on("pointermove",(function(t){e.$state!==Gl&&(e.findWall(t.pointerX,t.pointerY)?e.found():e.lost())})).on("pointerup",(function(t){0===t.button&&e.$state===Yl&&a.split.apply(a,[i.target].concat(Object(ui["a"])(i.breakpoint),[function(t){t.thickness=i.target.thickness}]))})),i},methods:{findWall:function(t,e){var n,i=this.$data,a=i.indicator,o=i.breakpoint,u=this.$plugin,l=u.$drawing.structure,h=u.$options.spliter.interaction.distance,f=Object(Ue["a"])(l.getAllWallList());try{for(f.s();!(n=f.n()).done;){var d=n.value,p=r.Segment.apply(r,Object(ui["a"])(u.$toCanvas.apply(u,Object(ui["a"])(d.thisSurface.corner.point))).concat(Object(ui["a"])(u.$toCanvas.apply(u,Object(ui["a"])(d.thatSurface.corner.point))))),v=c.distanceToSegment.apply(c,[t,e].concat(Object(ui["a"])(p)));if(v<h){var g=c.project.apply(c,[t,e].concat(Object(ui["a"])(s.fromSegment.apply(s,Object(ui["a"])(p)))));if(ol.apply(S,Object(ui["a"])(g).concat(Object(ui["a"])(p)))){var m=u.$toGeometry.apply(u,Object(ui["a"])(g));return li["e"].assign(o,m),a.setBreakpoint(g),a.setSegment(p),this.$data.target=d,!0}}}}catch(y){f.e(y)}finally{f.f()}return!1}},reset:function(){this.close()}}),ql=w.Element.define({groupIndex:1160,interative:!0,state:function(){return{from:[0,0],to:[0,0]}},created:function(){this.$hide()},render:function(t){var e=this.$state,n=e.from,i=e.to,r=this.$toCanvas.apply(this,Object(ui["a"])(n)),a=Object(tr["a"])(r,2),o=a[0],s=a[1],c=this.$toCanvas.apply(this,Object(ui["a"])(i)),u=Object(tr["a"])(c,2),l=u[0],h=u[1];t.lineStyle(2,0).moveTo(o,s).lineTo(o,h).lineTo(l,h).lineTo(l,s).closePath().beginFill(16711680).drawCircle(l,h,5).beginFill(65280).drawCircle(o,s,5)},methods:{setFrom:function(t,e){var n=this.$state,i=n.from,r=n.to;i[0]=r[0]=t,i[1]=r[1]=e,this.$setDirty()},setTo:function(t,e){this.$state.to[0]=t,this.$state.to[1]=e,this.$setDirty()}}},qu),Jl=Symbol("PickupFrom"),Ql=Symbol("PickupTo"),Zl=w.Tool.READY,th=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"setThickness",value:function(t){Ro(this).setThickness(t)}},{key:"setAlignment",value:function(){}}]),n}(y.Proxy.ToolProvider(["build","pick","drop"])),eh=w.Tool.define(Object(bt["a"])({},Zl,{entry:function(){this.$data.indicator.$hide()},leave:function(){this.$data.indicator.$show()}}),{pick:[[Zl,li["d"],Jl],[Jl,li["d"],Ql]],drop:[[Ql,li["d"],Jl],[Jl,li["d"],Zl],[Zl,li["d"],Zl]],build:[[Ql,function(){var t=this.$data,e=t.indicator,n=t.thickness,i=Object(tr["a"])(t.from,2),r=i[0],a=i[1],o=Object(tr["a"])(t.to,2),s=o[0],c=o[1],u=this.$plugin.$drawing.structure;e.setFrom.apply(e,Object(ui["a"])(e.$state.to)),[[r,a],[s,a],[s,c],[r,c]].forEach((function(t,e,i){var r=i[(e+1)%4];al(u,t,r,n)}))},Zl]]},{proxy:y.Proxy.Creator(th),data:function(t){var e,n=this,i=t.$createElement("Chamber"),r=[0,0],a=[0,0],o=(e={},Object(bt["a"])(e,Jl,(function(t,e){r[0]=t,r[1]=e,i.setFrom(t,e)})),Object(bt["a"])(e,Ql,(function(t,e){a[0]=t,a[1]=e,i.setTo(t,e)})),e);return t.$drawing.on("pointermove",(function(e){if(n.$state!==Zl){var i=e.virtualX,r=e.virtualY;o[n.$state].apply(o,Object(ui["a"])(t.$toGeometry(i,r)))}})),{indicator:i,thickness:200,from:r,to:a}},methods:{setThickness:function(t){this.$data.thickness=t}}}),nh=O.define({id:"com.3dnest.spoke.bricklayer",namespace:"bricklayer",version:ss["a"],plugin:qu,elements:{Builder:C.Indicator,Spliter:_.Indicator,Mover:A.Indicator,Extender:P.Indicator,Chamber:R.Indicator},tools:{Builder:C.Tool,Mover:A.Tool,Spliter:_.Tool,Extender:P.Tool,Chamber:R.Tool}}),ih=function(t){return t.$proxy},rh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"createBitmap",value:function(t,e,n){return Ro(this).createBitmap(t,e,n)}},{key:"getAllBitmapList",value:function(){return Ro(this).$getElementList("Bitmap").map(ih)}}]),n}(y.Proxy.Plugin),ah=w.define({proxy:y.Proxy.Creator(rh),methods:{createBitmap:function(t,e,n){var i=this;return Object(qo["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ra.Texture.fromURL(t);case 2:return a=r.sent,o=i.$drawing.scale,r.abrupt("return",i.$createElement("Bitmap",a,e||a.width*o,n||a.height*o).$proxy);case 5:case"end":return r.stop()}}),r)})))()}}}),oh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"url",get:function(){return Ro(this).url}},{key:"width",get:function(){return Ro(this).width}},{key:"height",get:function(){return Ro(this).height}},{key:"rotation",get:function(){return Ro(this).rotation}},{key:"x",get:function(){return Ro(this).x}},{key:"y",get:function(){return Ro(this).y}},{key:"alpha",get:function(){return Ro(this).alpha}},{key:"setWidth",value:function(t){Ro(this).setWidth(t)}},{key:"setHeight",value:function(t){Ro(this).setHeight(t)}},{key:"setRotation",value:function(t){Ro(this).setRotation(t)}},{key:"setPosition",value:function(t,e){Ro(this).setPosition(t,e)}},{key:"setAlpha",value:function(t){Ro(this).setAlpha(t)}},{key:"remove",value:function(){Ro(this).remove()}}]),n}(y.Proxy.Element),sh=ra,ch=w.Element.define({proxy:y.Proxy.Creator(oh),groupIndex:-100,interative:!0,focusable:!0,draggable:!0,state:function(){return{name:"Bitmap",texture:null,width:0,height:0,x:0,y:0,rotation:0,alpha:1,rendering:!1}},getters:{url:function(){return this.$state.texture.baseTexture.cacheId},width:function(){return this.$state.width},height:function(){return this.$state.height},rotation:function(){return this.$state.rotation},x:function(){return this.$state.x},y:function(){return this.$state.y},alpha:function(){return this.$state.alpha}},created:function(t,e,n){this.setTexture(t),this.setWidth(e),this.setHeight(n)},destroy:function(){},render:function(t){var e=this.$state,n=e.texture,i=e.width,r=e.height,a=e.x,o=e.y,s=e.rotation,c=e.alpha,u=e.rendering,l=this.$drawing.scale,h=i/l,f=r/l,d=h>0?h:n.width,p=f>0?f:n.height;t.pivot.x=h/2,t.pivot.y=f/2,t.beginTextureFill({texture:n,alpha:c,matrix:new sh.Matrix(d/n.width,0,0,p/n.height,0,0)}).drawRect(0,0,d,p);var v=this.$toCanvas(a,o),g=Object(tr["a"])(v,2);t.x=g[0],t.y=g[1],t.rotation=s,u&&(this.$emit("change",this.$proxy),this.setRendering(!1))},methods:{setTexture:function(t){this.$state.texture=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty(),this.setRendering(!0)},setHeight:function(t){this.$state.height=t,this.$setDirty(),this.setRendering(!0)},setRotation:function(t){this.$state.rotation=t,this.$setDirty(),this.setRendering(!0)},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty(),this.setRendering(!0)},setAlpha:function(t){this.$state.alpha=t,this.$setDirty()},setRendering:function(t){this.$state.rendering=t},remove:function(){this.$destroy()}}},ah),uh=n("3d1c"),lh=O.define({id:"com.3dnest.spoke.negative",namespace:"negative",version:uh["a"],plugin:ah,elements:{Bitmap:ch}}),hh=n("2c55"),fh=w.define({proxy:function(){var t=this;return{setPosition:function(e,n){t.setPosition(e,n)},setRotation:function(e){t.setRotation(e)},get rotation(){return t.$data.compass.$state.rotation},get element(){return t.$data.compass}}},data:function(){return{compass:null}},created:function(){this.$data.compass=this.$createElement("Element")},methods:{setPosition:function(t,e){this.$data.compass.setPosition(t,e)},setRotation:function(t){this.$data.compass.setRotation(t)}}}),dh=w.Element.define({groupIndex:3e3,interative:!0,state:function(){return{x:50,y:50,rotation:0,compassColor:16777215,northPointColor:14423100,southPointColor:4098301}},getters:{x:function(){return this.$state.x},y:function(){return this.$state.y},rotation:function(){return this.$state.rotation}},created:function(){var t=new ra.Text,e=new ra.Text;t.text="N",t.style.fontSize=12,t.transform.position.x=-4,t.transform.position.y=-34,e.text="S",e.style.fontSize=12,e.transform.position.x=-4,e.transform.position.y=19,this.$graphics.addChild(t),this.$graphics.addChild(e),window.p=this},render:function(t){var e,n,i,r,a,o,s,c,u,l,h=this.$state,f=h.x,d=h.y,p=h.rotation,v=h.compassColor,g=h.northPointColor,m=h.southPointColor,y=[0,0],b=[0,-20],x=[-6,0],$=[6,0],w=[0,20],O=(e=(n=(i=(r=(a=(o=(s=(c=(u=(l=t.beginFill(v)).moveTo.apply(l,y).lineStyle(0).drawCircle(0,0,35).beginFill(g)).moveTo.apply(u,y)).lineTo.apply(c,x)).lineTo.apply(s,b)).lineTo.apply(o,$)).lineTo.apply(a,y).beginFill(m)).lineTo.apply(r,x)).lineTo.apply(i,w)).lineTo.apply(n,$)).lineTo.apply(e,y).endFill().lineStyle(1,9082010).moveTo(0,-35).lineTo(0,-32).moveTo(0,35).lineTo(0,32).moveTo(-35,0).lineTo(-28,0).moveTo(35,0).lineTo(28,0);O.x=f,O.y=d,O.rotation=p},methods:{resetPosition:function(){this.$state.x=50,this.$state.y=50,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},setCompassColor:function(t){this.$state.compassColor=t,this.$setDirty()},setNorthPointColor:function(t){this.$state.northPointColor=t,this.$setDirty()},setSouthPointColor:function(t){this.$state.southPointColor=t,this.$setDirty()}}}),ph=O.define({id:"com.3dnest.spoke.compass",namespace:"compass",version:hh["a"],plugin:fh,elements:{Element:dh}}),vh=n("2bbc"),gh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"transformer",get:function(){return Ro(this).transformer}},{key:"selector",get:function(){return Ro(this).selector}},{key:"addTransformerAdapter",value:function(t,e){return Ro(this).addTransformerAdapter(t,e)}},{key:"addSelectorAdapter",value:function(t,e){return Ro(this).addSelectorAdapter(t,e)}},{key:"transformerAction",value:function(t){return Ro(this).transformerAction(t)}},{key:"selectorAction",value:function(t,e){return Ro(this).selectorAction(t,e)}},{key:"selectorAdd",value:function(t){return Ro(this).selectorAdd(t)}},{key:"getSelectedList",value:function(){return Ro(this).getSelectedList()}}]),n}(y.Proxy.Plugin),mh=w.define({proxy:y.Proxy.Creator(gh),data:function(){return{transformer:null,selector:null,transformerAdapter:new Map,selectorAdapter:new Map}},created:function(){this.$data.transformer=this.$createTool("Transformer"),this.$data.selector=this.$createTool("Selector")},getters:{transformer:function(){return this.$data.transformer},selector:function(){return this.$data.selector}},methods:{addTransformerAdapter:function(t,e){this.$data.transformerAdapter.set(t,e)},addSelectorAdapter:function(t,e){this.$data.selectorAdapter.set(t,e)},transformerAction:function(t){var e=t?this.$data.transformerAdapter.get(t.constructor):null;e?this.$data.transformer.pick():this.$data.transformer.drop()},selectorAction:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.$data.selectorAdapter.get(t.constructor):null;n?e?this.$data.selector.pick_multiple():this.$data.selector.pick_single():this.$data.selector.drop()},selectorAdd:function(t){var e=t?this.$data.selectorAdapter.get(t.constructor):null;e&&this.$data.selector.addSingleBounds(t)},getSelectedList:function(){return this.$data.selector.getElements()}}}),yh=function(t,e,n,i,r,a){return c.project.apply(c,[r,a].concat(Object(ui["a"])(s.fromSegment(t,e,n,i))))},bh=function(t,e,n,i,r,o){var s=yh(t,e,n,i,r,o);return a.length.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,[t,e].concat(Object(ui["a"])(s)))))},xh=function(t,e,n,i,r){var o=a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint(t,e,n,i))),s=Object(tr["a"])(o,2),u=s[0],l=s[1],h=c.translate.apply(c,[t,e].concat(Object(ui["a"])(a.multiply(u,l,r)))),f=Object(tr["a"])(h,2),d=f[0],p=f[1];return[d,p]},$h=w.Element.define({groupIndex:1300,interative:!0,state:function(){return{xStatus:0,yStatus:0,active:!1,x:0,y:0,width:0,height:0,rotation:0}},created:function(t,e){var n=this;this.$state.xStatus=t,this.$state.yStatus=e,this.$on("pointerdown",(function(t){t.stopPropagation(),n.beginAdjust()}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.xStatus,i=e.yStatus,r=e.x,a=e.y,o=e.width,s=e.height,c=e.rotation,u=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawRect(-5,-5,10,10),t.pivot.x=-n*o/2/u,t.pivot.y=i*s/2/u;var l=this.$toCanvas(r,a),h=Object(tr["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=c}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},updateState:function(t,e,n,i,r){this.setPosition(t,e),this.setWidth(n),this.setHeight(i),this.setRotation(r)},beginAdjust:function(){var t=this,e=this.$data.transformer.getElement(),n=this.$data.transformerAdapter.get(e.constructor),i=function(i){var r=t.$state,a=r.xStatus,o=r.yStatus,s=r.x,u=r.y,l=r.width,h=r.height,f=r.rotation,d=t.$toGeometry(i.pointerX,i.pointerY),p=s+a*l/2,v=u+o*h/2,g=c.rotate(p,v,-f,s,u),m=Object(tr["a"])(g,2),y=m[0],b=m[1],x=bh(s,u,y,b,y,b),$=bh.apply(void 0,[s,u,y,b].concat(Object(ui["a"])(d))),w=c.rotate.apply(c,Object(ui["a"])(xh(s,u,y,b,$)).concat([f,s,u])),O=Object(tr["a"])(w,2),j=O[0],k=O[1],T=a*(j-p),E=o*(k-v),S=l+T,C=h+E,L=xh(s,u,y,b,($-x)/2),P=Object(tr["a"])(L,2),F=P[0],A=P[1];t.setWidth(S),t.setHeight(C),n.setWidth(e,S),n.setHeight(e,C),n.setPosition(e,F,A),t.$emit("update",{x:F,y:A,width:S,height:C,rotation:f})},r=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",r)}}},mh),wh=30,Oh=w.Element.define({groupIndex:1300,interative:!0,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y,r=e.height,a=e.rotation,o=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).moveTo(0,5).lineTo(0,wh-5),t.pivot.x=0,t.pivot.y=r/o/2+wh;var s=this.$toCanvas(n,i),c=Object(tr["a"])(s,2);t.x=c[0],t.y=c[1],t.rotation=a}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},updateState:function(t,e,n,i,r){this.setPosition(t,e),this.setWidth(n),this.setHeight(i),this.setRotation(r)},beginAdjust:function(){var t=this,e=this.$data.transformer.getElement(),n=this.$data.transformerAdapter.get(e.constructor),i=function(i){var r=t.$state,o=r.x,s=r.y,c=r.width,u=r.height,l=t.$toGeometry(i.pointerX,i.pointerY),h=Math.atan2.apply(Math,Object(ui["a"])(a.fromBothPoint.apply(a,[o,s].concat(Object(ui["a"])(l)))));t.setRotation(h),n.setRotation(e,h),t.$emit("update",{x:o,y:s,width:c,height:u,rotation:h})},r=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",r)}}},mh),jh=w.Element.define({groupIndex:1200,interative:!0,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0,isCreating:!1}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.elementAdjust(e)}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y,r=e.width,a=e.height,o=e.rotation,s=this.$drawing.scale,c=r/s,u=a/s;t.lineStyle(1,16711680).beginFill(4096759,.01).drawRect(-c/2,-u/2,c,u).endFill(),t.pivot.x=0,t.pivot.y=0;var l=this.$toCanvas(n,i),h=Object(tr["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=o}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},setCreating:function(t){this.$state.isCreating=t,this.$setDirty()},updateState:function(t,e,n,i,r){this.setPosition(t,e),this.setWidth(n),this.setHeight(i),this.setRotation(r)},elementAdjust:function(t){var e=this,n=this.$drawing,i=this.$data.transformer.getElement(),r=this.$data.transformerAdapter.get(i.constructor),a=this.$state,o=a.width,s=a.height,c=a.rotation,u=a.isCreating,l=r.getPosition(i),h=Object(tr["a"])(l,2),f=h[0],d=h[1],p=t?this.$toGeometry(t.pointerX,t.pointerY):[f,d],v=p[0]-f,g=p[1]-d,m=r.adjustVerify,y=function(t){var n=e.$toGeometry(t.pointerX,t.pointerY),a=n[0]-v,u=n[1]-g,l=e.$drawing.structure.getRoomByPoint(a,u);if(e.setPosition(a,u),m){var h=m(i,e);if(li["g"].isArray(h))return r.setPosition.apply(r,[i].concat(Object(ui["a"])(h))),void e.$emit("update",{x:h[0],y:h[1],width:o,height:s,rotation:c});if(!h)return}r.setRoom&&r.setRoom(i,l),r.setPosition(i,a,u),e.$emit("update",{x:a,y:u,width:o,height:s,rotation:c})},b=function(){n.off("pointermove",y),window.removeEventListener("mouseup",x),window.removeEventListener("keydown",$),u&&(e.setCreating(!1),e.hide())},x=function(){var t=e.$data.element;t&&e.setPosition.apply(e,Object(ui["a"])(r.getPosition(t))),b()},$=function(t){"Escape"===t.code&&u&&(i.remove(),b())};n.on("pointermove",y),window.addEventListener("mouseup",x),window.addEventListener("keydown",$)}}},mh),kh=w.Element.define({groupIndex:1250,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y,r=e.width,a=e.height,o=e.rotation,s=this.$drawing.scale,c=r/s,u=a/s;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).endFill().beginFill(4096759,.2).drawRect(-c/2,-u/2,c,u).endFill(),t.pivot.x=0,t.pivot.y=0;var l=this.$toCanvas(n,i),h=Object(tr["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=o}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},updateState:function(t,e,n,i,r){this.$state.x=t,this.$state.y=e,this.$state.width=n,this.$state.height=i,this.$state.rotation=r,this.$setDirty()}}},mh),Th=w.Element.define({groupIndex:1300,state:function(){return{active:!1,x:0,y:0,width:0,height:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y,r=e.width,a=e.height,o=this.$drawing.scale,s=r/o,c=a/o;t.lineStyle(1,4096759).beginFill(4096759,.2).drawRect(-s/2,-c/2,s,c).endFill(),t.pivot.x=0,t.pivot.y=0;var u=this.$toCanvas(n,i),l=Object(tr["a"])(u,2);t.x=l[0],t.y=l[1]}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},updateState:function(t){var e=this.$drawing.scale,n=t.width*e,i=t.height*e,r=this.$toGeometry(t.x,t.y);this.$state.x=r[0]+n/2,this.$state.y=r[1]-i/2,this.$state.width=n,this.$state.height=i,this.$setDirty()},remove:function(){this.$destroy()}}},mh),Eh=w.Tool.READY,Sh=Symbol("Pick"),Ch=Symbol("Show"),Lh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"getElement",value:function(){return Ro(this).getElement()}},{key:"moveElement",value:function(t){return Ro(this).moveElement(t)}}]),n}(y.Proxy.ToolProvider(["open","pick","drop","close"])),Ph=[[-1,1],[0,1],[1,1],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1]],Fh=w.Tool.define(Object(bt["a"])({},Ch,(function(){this.updateState()})),{open:[[Eh,li["d"],Sh]],pick:[[Sh,function(){var t=this;this.$data.element=this.$plugin.$drawing.focusing;var e,n=Object(Ue["a"])(this.$data.handlers);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.show()}}catch(r){n.e(r)}finally{n.f()}this.$data.rotater.show(),this.$data.previewer.show(),this.$data.outline.show(),this.$data.element.on("change",this.$data.listener=function(){t.updateState()})},Ch],[Ch,function(){this.$data.element.off("change",this.$data.listener),this.$data.element=this.$plugin.$drawing.focusing,this.$data.element.on("change",this.$data.listener)},Ch],[Eh,li["d"],Eh]],drop:[[Ch,function(){var t,e=Object(Ue["a"])(this.$data.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hide()}}catch(i){e.e(i)}finally{e.f()}this.$data.rotater.hide(),this.$data.previewer.hide(),this.$data.outline.hide(),this.$data.element.off("change",this.$data.listener),this.$data.element=null},Sh],[Sh,li["d"],Sh],[Eh,li["d"],Eh]],close:[[Ch,function(){var t,e=Object(Ue["a"])(this.$data.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hide()}}catch(i){e.e(i)}finally{e.f()}this.$data.rotater.hide(),this.$data.previewer.hide(),this.$data.outline.hide(),this.$data.element.off("change",this.$data.listener),this.$data.element=null},Eh],[Sh,li["d"],Eh],[Eh,li["d"],Eh]]},{proxy:y.Proxy.Creator(Lh),data:function(t){var e=t.$createElement("Rotater"),n=t.$createElement("Previewer"),i=t.$createElement("Outline"),r=Ph.map((function(a){var o=t.$createElement.apply(t,["Handler"].concat(Object(ui["a"])(a)));return o.$on("update",(function(t){var a,o=t.x,s=t.y,c=t.width,u=t.height,l=t.rotation,h=Object(Ue["a"])(r);try{for(h.s();!(a=h.n()).done;){var f=a.value;f.updateState(o,s,c,u,l)}}catch(d){h.e(d)}finally{h.f()}e.updateState(o,s,c,u,l),n.updateState(o,s,c,u,l),i.updateState(o,s,c,u,l)})),o}));return e.$on("update",(function(t){var e,a=t.x,o=t.y,s=t.width,c=t.height,u=t.rotation,l=Object(Ue["a"])(r);try{for(l.s();!(e=l.n()).done;){var h=e.value;h.updateState(a,o,s,c,u)}}catch(f){l.e(f)}finally{l.f()}n.updateState(a,o,s,c,u),i.updateState(a,o,s,c,u)})),n.$on("update",(function(t){var n,a=t.x,o=t.y,s=t.width,c=t.height,u=t.rotation,l=Object(Ue["a"])(r);try{for(l.s();!(n=l.n()).done;){var h=n.value;h.updateState(a,o,s,c,u)}}catch(f){l.e(f)}finally{l.f()}e.updateState(a,o,s,c,u),i.updateState(a,o,s,c,u)})),{element:null,handlers:r,rotater:e,previewer:n,outline:i,listener:li["d"]}},methods:{updateState:function(){var t,e=this.$data.element,n=this.$plugin.$data.transformerAdapter.get(e.constructor),i=n.getPosition(e),r=Object(tr["a"])(i,2),a=r[0],o=r[1],s=n.getWidth(e),c=n.getHeight(e),u=n.getRotation(e),l=Object(Ue["a"])(this.$data.handlers);try{for(l.s();!(t=l.n()).done;){var h=t.value;h.updateState(a,o,s,c,u)}}catch(f){l.e(f)}finally{l.f()}this.$data.rotater.updateState(a,o,s,c,u),this.$data.previewer.updateState(a,o,s,c,u),this.$data.outline.updateState(a,o,s,c,u)},getElement:function(){return this.$data.element},moveElement:function(t){this.$data.element=t,this.updateState(),this.$data.previewer.setCreating(!0),this.$data.previewer.show(),this.$data.previewer.elementAdjust()}},reset:function(){this.close()}}),Ah=w.Tool.READY,Nh=Symbol("Pick"),_h=Symbol("Show"),Dh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"getElements",value:function(){return Ro(this).getElements()}},{key:"addSingleBounds",value:function(t){return Ro(this).addSingleBounds(t)}}]),n}(y.Proxy.ToolProvider(["open","pick_single","pick_multiple","drop","close"])),Rh=w.Tool.define({},{open:[[Ah,li["d"],Nh]],pick_single:[[Nh,function(){this.addSingleBounds(this.$plugin.$drawing.focusing)},_h],[_h,function(){this.addSingleBounds(this.$plugin.$drawing.focusing)},_h],[Ah,li["d"],Ah]],pick_multiple:[[Nh,function(){this.addMultipleBounds(this.$plugin.$drawing.focusing)},_h],[_h,function(){this.addMultipleBounds(this.$plugin.$drawing.focusing)},_h],[Ah,li["d"],Ah]],drop:[[_h,function(){this.clearBounds()},Nh],[Nh,li["d"],Nh],[Ah,li["d"],Ah]],close:[[_h,function(){this.clearBounds()},Ah],[Nh,li["d"],Ah],[Ah,li["d"],Ah]]},{proxy:y.Proxy.Creator(Dh),data:function(){return{boundsList:[],elementList:[],listenerList:[]}},methods:{addSingleBounds:function(t){var e=this,n=this.$plugin.$createElement("Bounds");this.clearBounds(),n.show(),this.updateState(n,t);var i=function(){e.updateState(n,t)};t.on("change",i),this.$data.boundsList.push(n),this.$data.elementList.push(t),this.$data.listenerList.push(i),this.$plugin.$emit("selector-add",this.$data.elementList)},addMultipleBounds:function(t){var e=this,n=this.$data,i=n.boundsList,r=n.elementList,a=n.listenerList,o=r.indexOf(t);if(o>-1){var s=i.splice(o,1),c=Object(tr["a"])(s,1),u=c[0];return r[o].off("change",a[o]),r.splice(o,1),void u.remove()}var l=this.$plugin.$createElement("Bounds");this.updateState(l,t),l.show();var h=function(){e.updateState(l,t)};t.on("change",h),i.push(l),r.push(t),a.push(h),this.$plugin.$emit("selector-add",this.$data.elementList)},clearBounds:function(){var t,e=this,n=Object(Ue["a"])(this.$data.boundsList);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.remove()}}catch(r){n.e(r)}finally{n.f()}this.$data.elementList.forEach((function(t,n){t.off("change",e.$data.listenerList[n])})),this.$data.boundsList=[],this.$data.elementList=[],this.$data.listenerList=[],this.$plugin.$emit("selector-clear")},updateState:function(t,e){var n=this.$plugin.$data.selectorAdapter.get(e.constructor),i=n.getBounds(e);t.updateState(i)},getElements:function(){return this.$data.elementList}},reset:function(){this.close()}}),Wh=O.define({id:"com.3dnest.spoke.common",namespace:"common",version:vh["a"],plugin:mh,elements:{Handler:$h,Rotater:Oh,Previewer:jh,Outline:kh,Bounds:Th},tools:{Transformer:Fh,Selector:Rh}}),Mh=n("0aa2"),Ih=y.Options.define,Hh=Ih({enabled:!0},{rectangular:Ih({enabled:!0,referenceUnit:15},{style:Ih({color:13421823,lineWidth:1}),snap:Ih({enabled:!0})})}),Bh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.Plugin),Vh=w.define({options:Hh,proxy:y.Proxy.Creator(Bh),data:function(){return{layerList:[]}},created:function(){var t=this.$createElement("RectangularGrid");this.$data.layerList.push(t)}}),zh=(n("6b93"),[5,2,1]),Uh=function(t,e,n){return t.moveTo(0,e).lineTo(n,e)},Yh=function(t,e,n){return t.moveTo(e,0).lineTo(e,n)},Gh=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.Element),Xh=w.Element.define({proxy:y.Proxy.Creator(Gh),groupIndex:0,render:function(t){var e=this.$plugin.$options,n=e.rectangular.style,i=this.$drawing,r=i.width,a=i.height,o=i.scale,s=i.origin,c=Object(tr["a"])(s,2),u=c[0],l=c[1],h=this.getUnitInMM(),f=function(t){return h*t/o};t.lineStyle(n.lineWidth,n.color,1,0);var d=0,p=0;for(d=1;(p=f(d))<u;d++)Yh(t,li["c"].round(u-p),a);for(d=1;(p=f(d))<r-u;d++)Yh(t,li["c"].round(u+p),a);for(d=1;(p=f(d))<l;d++)Uh(t,li["c"].round(l-p),r);for(d=1;(p=f(d))<a-l;d++)Uh(t,li["c"].round(l+p),r);t.lineStyle(1,16711680,1,0).moveTo(0,l).lineTo(r,l).moveTo(u,0).lineTo(u,a)},created:function(){var t=this,e=this.$plugin.$options;this.$drawing.registerSnap({name:"grid-point",priority:-1/0,get active(){return e.enabled&&e.rectangular.enabled&&e.rectangular.snap.enabled},handle:function(e,n,i){var r=t.getUnitInMM(),a=t.$toGeometry(e,n),o=a.map(Kh,r),s=t.$toCanvas.apply(t,Object(ui["a"])(o));i.apply(void 0,Object(ui["a"])(s))}})},methods:{getUnitInMM:function(){var t=this.$plugin.$options.rectangular.referenceUnit,e=t*this.$drawing.scale,n=li["c"].pow(10,li["c"].floor(li["c"].log10(e)));return zh.find(qh,li["c"].round(e/n))*n}}},Vh);function Kh(t){return li["c"].round(t/this)*this}function qh(t){return this>=t}var Jh,Qh=4,Zh=w.Element.define({groupIndex:1e4,created:function(){var t=this;this.$drawing.on("snap",(function(){return t.$setDirty()}))},render:function(t){t.lineStyle(1,13421772).moveTo(-Qh,-Qh).lineTo(Qh,Qh).moveTo(Qh,-Qh).lineTo(-Qh,Qh);var e=Object(tr["a"])(this.$drawing.virtual,2);t.x=e[0],t.y=e[1]}},Vh),tf=O.define({id:"com.3dnest.spoke.grid",namespace:"grid",version:Mh["a"],plugin:Vh,elements:{RectangularGrid:Xh,Crosshair:Zh}}),ef=n("c5c2"),nf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"adjuster",get:function(){return Ro(this).adjuster}}]),n}(y.Proxy.Plugin),rf=w.define({proxy:y.Proxy.Creator(nf),data:function(){return{adjuster:null}},created:function(){this.$data.adjuster=this.$createTool("Adjuster")},getters:{adjuster:function(){return this.$data.adjuster}}}),af=50,of=function(t,e){var n=t.corner,i=t.back.corner,r=a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint(n.x,n.y,i.x,i.y))),o=Object(tr["a"])(r,2),s=o[0],u=o[1],l=c.translate.apply(c,[n.x,n.y].concat(Object(ui["a"])(a.multiply(s,u,e)))),h=Object(tr["a"])(l,2),f=h[0],d=h[1];return[f,d]},sf=function(t,e,n){var i=t.corner,r=t.back.corner;return c.project.apply(c,[e,n].concat(Object(ui["a"])(s.fromSegment(i.x,i.y,r.x,r.y))))},cf=function(t,e,n){var i=t.corner,r=sf(t,e,n);return a.length.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,[i.x,i.y].concat(Object(ui["a"])(r)))))},uf=function(t,e,n,i,r){var o=null,s=null,u=0;if(t.forEach((function(t){var i=sf(t.thisSurface,e,n),r=Object(tr["a"])(i,2),o=r[0],c=r[1],l=Math.min(t.thisSurface.corner.x,t.thatSurface.corner.x),h=Math.max(t.thisSurface.corner.x,t.thatSurface.corner.x),f=Math.min(t.thisSurface.corner.y,t.thatSurface.corner.y),d=Math.max(t.thisSurface.corner.y,t.thatSurface.corner.y);if(!(o<l||o>h||c<f||c>d)){var p=a.length.apply(a,Object(ui["a"])(a.fromBothPoint(e,n,o,c)));(!s||p<u)&&(s=t,u=p)}})),!s||u/i>af)r.corner.x=e,r.corner.y=n,r.back.corner.x=e+10,r.back.corner.y=n,o=r;else{var l=s.thisSurface,h=s.thatSurface;o=c.toLeftOfSegment(e,n,h.corner.x,h.corner.y,l.corner.x,l.corner.y)?h:l}return o},lf=w.Element.define({groupIndex:1200,interative:!0,hoverable:!0,state:function(){return{active:!1,surface:null,offset:0,width:0}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},destroy:function(){},render:function(t){if(this.$state.active){var e=this.$state,n=e.surface,i=e.offset,r=e.width,a=this.$toCanvas.apply(this,Object(ui["a"])(of(n,i-r/2))),o=Object(tr["a"])(a,2),s=o[0],c=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawCircle(s,c,5)}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},updateState:function(t,e,n){this.setSurface(t),this.setOffset(e),this.setWidth(n)},beginAdjust:function(){var t=this,e=this.$data.adjuster.getElement(),n=this.$state,i=n.surface,r=n.offset,a=n.width,o=function(n){var o=t.$toGeometry(n.pointerX,n.pointerY),s=cf.apply(void 0,[i].concat(Object(ui["a"])(o))),c=r-a/2-s,u=r-c/2,l=a+c;t.setOffset(u),t.setWidth(l),e.setOffset(u),e.setWidth(l),t.$emit("update",{surface:i,offset:u,width:l})},s=function e(){t.$drawing.off("pointermove",o),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",o),window.addEventListener("mouseup",s)}}},rf),hf=w.Element.define({groupIndex:1200,interative:!0,hoverable:!0,state:function(){return{active:!1,surface:null,offset:0,width:0}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},destroy:function(){},render:function(t){if(this.$state.active){var e=this.$state,n=e.surface,i=e.offset,r=e.width,a=this.$toCanvas.apply(this,Object(ui["a"])(of(n,i+r/2))),o=Object(tr["a"])(a,2),s=o[0],c=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawRect(s-5,c-5,10,10)}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},updateState:function(t,e,n){this.setSurface(t),this.setOffset(e),this.setWidth(n)},beginAdjust:function(){var t=this,e=this.$data.adjuster.getElement(),n=this.$state,i=n.surface,r=n.offset,a=n.width,o=function(n){var o=t.$toGeometry(n.pointerX,n.pointerY),s=cf.apply(void 0,[i].concat(Object(ui["a"])(o))),c=s-r-a/2,u=r+c/2,l=a+c;t.setOffset(u),t.setWidth(l),e.setOffset(u),e.setWidth(l),t.$emit("update",{surface:i,offset:u,width:l})},s=function e(){t.$drawing.off("pointermove",o),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",o),window.addEventListener("mouseup",s)}}},rf),ff=w.Element.define({groupIndex:1200,interative:!0,state:function(){return{surface:null,offset:0,width:0,listener:null,isCreating:!1}},methods:{show:function(){var t=this,e=this.$data.adjuster.getElement();e.on("pointerdown",this.$state.listener=function(n){t.$state.isCreating||t.hollowAdjust(e,n)}),this.$setDirty()},hide:function(){var t=this.$data.adjuster.getElement();t&&t.off("pointerdown",this.$state.listener),this.$setDirty()},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setCreating:function(t){this.$state.isCreating=t,this.$setDirty()},updateState:function(t,e,n){this.setSurface(t),this.setOffset(e),this.setWidth(n)},adjustAction:function(t,e,n,i){this.setSurface(e),this.setOffset(n),t.setSurface(e),t.setOffset(n),this.$emit("update",{surface:e,offset:n,width:i})},hollowAdjust:function(t,e){var n=this,i=this.$state,r=i.surface,a=i.offset,o=i.width,s=i.isCreating,c=this.$drawing,u=e?cf.apply(void 0,[r].concat(Object(ui["a"])(this.$toGeometry(e.pointerX,e.pointerY))))-a:0,l=r,h=a,f=c.structure.getAllWallList(),d=function(e){var i=n.$toGeometry(e.pointerX,e.pointerY),r=uf.apply(void 0,[f].concat(Object(ui["a"])(i),[n.$drawing.scale,t.virtualSurface]));if("virtual"!==r.name){var a=cf.apply(void 0,[r].concat(Object(ui["a"])(i)))-u,s=cf.apply(void 0,[r].concat(Object(ui["a"])(r.originSafe))),c=cf.apply(void 0,[r].concat(Object(ui["a"])(r.targetSafe))),l=cf.apply(void 0,[r].concat(Object(ui["a"])(r.back.originSafe))),h=cf.apply(void 0,[r].concat(Object(ui["a"])(r.back.targetSafe))),d=Math.max(s,h)+o/2,p=Math.min(c,l)-o/2,v=a<d?d:a>p?p:a;n.adjustAction(t,r,v,o)}else n.adjustAction(t,r,0,o)},p=function(){c.off("pointermove",d),window.removeEventListener("mouseup",v),window.removeEventListener("keydown",g),s&&n.setCreating(!1)},v=function(){"virtual"===t.surface.name&&(s?t.remove():n.adjustAction(t,l,h,o)),p()},g=function(e){"Escape"===e.code&&s&&(t.remove(),p())};c.on("pointermove",d),window.addEventListener("mouseup",v),window.addEventListener("keydown",g)}}},rf),df=w.Tool.READY,pf=Symbol("Pick"),vf=Symbol("Show"),gf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"getElement",value:function(){return Ro(this).getElement()}},{key:"moveElement",value:function(t){return Ro(this).moveElement(t)}}]),n}(y.Proxy.ToolProvider(["open","pick","drop","close"])),mf=w.Tool.define(Object(bt["a"])({},vf,(function(){this.updateState()})),{open:[[df,li["d"],pf]],pick:[[pf,function(){var t=this;this.$data.element=this.$plugin.$drawing.focusing,this.$data.element.on("change",this.$data.listener=function(){t.updateState()}),this.$data.headHandler.show(),this.$data.rearHandler.show(),this.$data.mover.show()},vf],[vf,function(){var t=this;this.$data.element!==this.$plugin.$drawing.focusing&&(this.$data.element.off("change",this.$data.listener),this.$data.mover.hide(),this.$data.element=this.$plugin.$drawing.focusing,this.$data.element.on("change",this.$data.listener=function(){t.updateState()}),this.$data.mover.show())},vf],[df,li["d"],df]],drop:[[vf,function(){this.$data.headHandler.hide(),this.$data.rearHandler.hide(),this.$data.mover.hide(),this.$data.element.off("change",this.$data.listener),this.$data.element=null},pf],[pf,li["d"],pf],[df,li["d"],df]],close:[[vf,function(){this.$data.headHandler.hide(),this.$data.rearHandler.hide(),this.$data.mover.hide()},df],[pf,li["d"],df],[df,li["d"],df]]},{proxy:y.Proxy.Creator(gf),data:function(t){var e=t.$createElement("HeadHandler"),n=t.$createElement("RearHandler"),i=t.$createElement("Mover");return e.$on("update",(function(t){var e=t.surface,r=t.offset,a=t.width;n.updateState(e,r,a),i.updateState(e,r,a)})),n.$on("update",(function(t){var n=t.surface,r=t.offset,a=t.width;e.updateState(n,r,a),i.updateState(n,r,a)})),i.$on("update",(function(t){var i=t.surface,r=t.offset,a=t.width;n.updateState(i,r,a),e.updateState(i,r,a)})),{element:null,headHandler:e,rearHandler:n,mover:i,listener:li["d"]}},methods:{updateState:function(){var t=this.$data.element,e=t.surface,n=t.offset,i=t.width;this.$data.headHandler.updateState(e,n,i),this.$data.rearHandler.updateState(e,n,i),this.$data.mover.updateState(e,n,i)},getElement:function(){return this.$data.element},moveElement:function(t){this.$data.element=t,this.drop(),this.$data.mover.setCreating(!0),this.$data.mover.hollowAdjust(t)}},reset:function(){this.close()}}),yf=O.define({id:"com.3dnest.spoke.hammer",namespace:"hammer",version:ef["a"],plugin:rf,elements:{HeadHandler:lf,RearHandler:hf,Mover:ff},tools:{Adjuster:mf}}),bf=n("7612"),xf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"from",get:function(){return li["b"].throwError("The `.from` getter MUST be implemented.")}},{key:"to",get:function(){return li["b"].throwError("The `.to` getter MUST be implemented.")}}]),n}(ia["a"].Emitter),$f=function(t){return li["b"].instanceOf(t,xf)},wf=$f,Of=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"createDimension",value:function(t){return wf(t)||li["b"].Throw.TypeError("Invalid adaptor, a adaptor expected."),Ro(this).createDimension(t).$proxy}},{key:"setFontsizer",value:function(t){Ro(this).setFontsizer(t)}},{key:"setTextOffsetYModifier",value:function(t){Ro(this).setTextOffsetYModifier(t)}},{key:"removeAll",value:function(){Ro(this).removeAll()}},{key:"dimensions",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).dimensions()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}]),n}(y.Proxy.Plugin),jf=function(t){return 360/t},kf=function(t){return-t},Tf=w.define({proxy:y.Proxy.Creator(Of),data:function(){return{fontsizer:jf,textOffsetYModifier:kf}},created:function(){var t=this;this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}))},methods:{createDimension:function(t){return this.$createElement("Dimension",t)},setFontsizer:function(t){this.$data.fontsizer=t,this.$forceUpdate()},setTextOffsetYModifier:function(t){this.$data.textOffsetYModifier=t,this.$forceUpdate()},removeAll:function(){this.$getElementList("Dimension").forEach((function(t){return t.$proxy.remove()}))},dimensions:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$elements("Dimension")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}}),Ef=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"offset",get:function(){return Ro(this).$state.offset},set:function(t){li["g"].Not.Number(t)&&li["b"].Throw.TypeError("Invalid value, a number expected."),Ro(this).setOffset(t)}},{key:"hide",value:function(){Ro(this).$hide()}},{key:"show",value:function(){Ro(this).$show()}},{key:"remove",value:function(){Ro(this).$destroy()}}]),n}(y.Proxy.Element),Sf=200,Cf=200,Lf=0,Pf=100,Ff=30,Af=li["c"].PI,Nf=Af/2,_f=function(t){return t>Nf&&t<=Af||t>-Af&&t<=-Nf},Df=w.Element.define({proxy:y.Proxy.Creator(Ef),groupIndex:2e3,interative:!0,focusable:!0,state:function(){return{element:null,offset:Sf,valueText:null}},render:function(t){var e=this.$state,n=e.element,i=e.offset,o=e.valueText,s=this.$drawing.scale,u=this.$data,h=u.fontsizer,f=u.textOffsetYModifier,d=Cf/s,p=Lf/s,v=Pf/s,g=Ff/s,m=h(s),y=n.from,b=n.to,x=a.length.apply(a,Object(ui["a"])(a.from.apply(a,Object(ui["a"])(y).concat(Object(ui["a"])(b)))));o.style.fontSize=m,o.text=li["c"].round(x),o.y=f(m),o.pivot.set(o.width/2,o.height/2);var $=r.Segment.apply(r,Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(y))).concat(Object(ui["a"])(this.$toCanvas.apply(this,Object(ui["a"])(b))))),w=a.fromSegment.apply(a,Object(ui["a"])($)),O=Object(tr["a"])(w,2),j=O[0],k=O[1],T=a.length(j,k)/2;t.lineStyle(1,0),i<0?t.moveTo(-T,v).lineTo(-T,-d).moveTo(T,v).lineTo(T,-d):t.moveTo(-T,d).lineTo(-T,-v).moveTo(T,d).lineTo(T,-v),t.moveTo(-T-p,0).lineTo(T+p,0).lineStyle(3).moveTo(-T-g,g).lineTo(-T+g,-g).moveTo(T-g,g).lineTo(T+g,-g);var E=l.middle.apply(l,Object(ui["a"])($)),S=a.invert.apply(a,Object(ui["a"])(a.rotate90.apply(a,Object(ui["a"])(a.normalize(j,k))))),C=a.multiply.apply(a,Object(ui["a"])(S).concat([i/s])),L=c.translate.apply(c,Object(ui["a"])(E).concat(Object(ui["a"])(C))),P=Object(tr["a"])(L,2);t.x=P[0],t.y=P[1],_f(t.rotation=li["c"].atan2(k,j))&&(o.rotation=li["c"].PI)},created:function(t){var e=this,n=this.$state.valueText=new ra.Text;li["e"].assign(n.style,{stroke:16777215,strokeThickness:2}),t.on("change",(function(){return e.$setDirty()})),t.on("destroy",(function(){return e.$destroy()})),this.$state.element=t,this.$graphics.addChild(n)},methods:{setOffset:function(t){this.$state.offset=t,this.$setDirty()}}},Tf),Rf=O.define({id:"com.3dnest.spoke.measure",namespace:"measure",version:bf["a"],plugin:Tf,elements:{Dimension:Df}}),Wf=n("c394"),Mf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"LineLabeler",get:function(){return Ro(this).$data.lineLabeler}},{key:"TextLabeler",get:function(){return Ro(this).$data.textLabeler}},{key:"LabelTransformer",get:function(){return Ro(this).$data.labelTransformer}},{key:"open",value:function(){return Ro(this).open()}},{key:"openTextLabeler",value:function(){return Ro(this).openTextLabeler()}},{key:"openLineLabeler",value:function(){return Ro(this).openLineLabeler()}},{key:"close",value:function(){return Ro(this).close()}},{key:"createLabelText",value:function(t,e,n){return Ro(this).createLabelText(t,e,n).$proxy}},{key:"createLabelLine",value:function(t,e,n){return Ro(this).createLabelLine(t,e,n).$proxy}},{key:"getAllLabelTextList",value:function(){return Array.from(this.textLabels())}},{key:"getAllLabelLineList",value:function(){return Array.from(this.lineLabels())}},{key:"textLabels",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).textLabels()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"lineLabels",value:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(Ro(this).lineLabels()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.$proxy;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}]),n}(y.Proxy.Plugin),If=w.define({proxy:y.Proxy.Creator(Mf),data:function(){return{lineLabeler:null,textLabeler:null,labelTransformer:null}},created:function(){this.$data.lineLabeler=this.$createTool("LineLabeler"),this.$data.textLabeler=this.$createTool("TextLabeler"),this.$data.labelTransformer=this.$createTool("LabelTransformer")},methods:{open:function(){this.openTextLabeler()},openTextLabeler:function(){this.$data.lineLabeler.close(),this.$data.textLabeler.open()},openLineLabeler:function(){this.$data.textLabeler.close(),this.$data.lineLabeler.open()},close:function(){this.$data.textLabeler.close(),this.$data.lineLabeler.close()},createLabelText:function(t,e,n){var i=this.$createElement("LabelText");return i.setPosition(t,e),i.setText(n),i},createLabelLine:function(t,e,n){var i=this.$createElement("LabelLine");return i.setOrigin(t),i.setTarget(e),i.setText(n),i},lineLabels:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$elements("LabelLine")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})),textLabels:regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(Ue["a"])(this.$elements("LabelText")),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))}}),Hf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"origin",get:function(){return Ro(this).origin}},{key:"target",get:function(){return Ro(this).target}},{key:"text",get:function(){return Ro(this).text}},{key:"setOrigin",value:function(t){return Ro(this).setOrigin(t)}},{key:"setTarget",value:function(t){return Ro(this).setTarget(t)}},{key:"setText",value:function(t){return Ro(this).setText(t)}},{key:"setFontsize",value:function(t){return Ro(this).fontSize(t)}},{key:"remove",value:function(){Ro(this).remove()}}]),n}(y.Proxy.Element),Bf=1500,Vf=w.Element.define({proxy:y.Proxy.Creator(Hf),groupIndex:1400,interative:!0,focusable:!0,state:function(){return{pixiText:null,origin:null,target:null,text:"",fontSize:200,rendering:!1}},getters:{origin:function(){return this.$state.origin},target:function(){return this.$state.target},text:function(){return this.$state.text}},render:function(t){var e,n,i=this.$state,r=i.origin,o=i.target,s=i.pixiText,c=i.text,u=i.fontSize,l=i.rendering,h=this.$drawing.scale;if(r&&o){var f=this.$toCanvas.apply(this,Object(ui["a"])(r)),d=this.$toCanvas.apply(this,Object(ui["a"])(o)),p=a.fromBothPoint.apply(a,Object(ui["a"])(r).concat(Object(ui["a"])(o))),v=li["c"].atan2(p[1],p[0]);s.text=c||"No Text",s.style.fontSize=u/h,s.transform.pivot.y=s.height,s.transform.position.x=d[0],s.transform.position.y=d[1];var g=s.width>Bf/h?s.width:Bf/h;(e=(n=t.lineStyle(1,0)).moveTo.apply(n,Object(ui["a"])(f))).lineTo.apply(e,Object(ui["a"])(d)),v<li["c"].PI/2&&v>-li["c"].PI/2?(s.transform.pivot.x=0,t.lineTo(d[0]+g,d[1])):(s.transform.pivot.x=s.width,t.lineTo(d[0]-g,d[1])),l&&(this.$emit("change",this.$proxy),this.setRendering(!1))}},created:function(){var t=this.$state.pixiText=new ra.Text;Object.assign(t.style,{stroke:16777215,strokeThickness:2}),this.$graphics.addChild(t)},methods:{setOrigin:function(t){this.$state.origin=t,this.$setDirty(),this.setRendering(!0)},setTarget:function(t){this.$state.target=t,this.$setDirty(),this.setRendering(!0)},setText:function(t){this.$state.text=t,this.$setDirty(),this.setRendering(!0)},setFontSize:function(t){this.$state.fontSize=t,this.$setDirty(),this.setRendering(!0)},setRendering:function(t){this.$state.rendering=t},remove:function(){this.$destroy()}}},If),zf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"text",get:function(){return Ro(this).text}},{key:"x",get:function(){return Ro(this).x}},{key:"y",get:function(){return Ro(this).y}},{key:"room",get:function(){return Ro(this).room}},{key:"setPosition",value:function(t,e){return Ro(this).setPosition(t,e)}},{key:"setText",value:function(t){return Ro(this).setText(t)}},{key:"setFontSize",value:function(t){return Ro(this).setFontSize(t)}},{key:"setRoom",value:function(t){return Ro(this).setRoom(t)}},{key:"remove",value:function(){Ro(this).remove()}}]),n}(y.Proxy.Element),Uf=w.Element.define({proxy:y.Proxy.Creator(zf),groupIndex:1500,interative:!0,focusable:!0,state:function(){return{pixiText:null,text:"",fontSize:200,x:0,y:0,room:null,rendering:!1}},getters:{text:function(){return this.$state.text},x:function(){return this.$state.x},y:function(){return this.$state.y},room:function(){return this.$state.room}},render:function(t){var e=this.$state,n=e.pixiText,i=e.text,r=e.fontSize,a=e.x,o=e.y,s=e.rendering,c=this.$drawing.scale;n.text=i||"No Text",n.style.fontSize=r/c,t.pivot.x=t.width/2,t.pivot.y=t.height/2;var u=this.$toCanvas(a,o),l=Object(tr["a"])(u,2);t.x=l[0],t.y=l[1],s&&(this.$emit("change",this.$proxy),this.setRendering(!1))},created:function(){var t=this.$state.pixiText=new ra.Text;Object.assign(t.style,{stroke:16777215,strokeThickness:2,align:"center"}),this.$graphics.addChild(t)},methods:{setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty(),this.setRendering(!0)},setText:function(t){this.$state.text=t,this.$setDirty(),this.setRendering(!0)},setFontSize:function(t){this.$state.fontSize=t,this.$setDirty(),this.setRendering(!0)},setRoom:function(t){this.$state.room=t,this.$setDirty()},setRendering:function(t){this.$state.rendering=t},remove:function(){this.$destroy()}}},If),Yf=w.Element.define({groupIndex:1600,interative:!0,hoverable:!0,state:function(){return{active:!1,x:0,y:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y;this.$hovering?t.beginFill(16711680):t.beginFill(65280),t.drawCircle(0,0,3).endFill();var r=this.$toCanvas(n,i),a=Object(tr["a"])(r,2);t.x=a[0],t.y=a[1]}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.labelTransformer.getElement(),n=function(n){var i=t.$toGeometry(n.pointerX,n.pointerY);t.setPosition.apply(t,Object(ui["a"])(i)),e.setOrigin(Object(ui["a"])(i)),t.$emit("update")},i=function e(){t.$drawing.off("pointermove",n),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",n),window.addEventListener("mouseup",i)}}},If),Gf=w.Element.define({groupIndex:1600,interative:!0,hoverable:!0,state:function(){return{active:!1,x:0,y:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y;this.$hovering?t.beginFill(16711680):t.beginFill(65280),t.drawCircle(0,0,3).endFill();var r=this.$toCanvas(n,i),a=Object(tr["a"])(r,2);t.x=a[0],t.y=a[1]}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.labelTransformer.getElement(),n=function(n){var i=t.$toGeometry(n.pointerX,n.pointerY);t.setPosition.apply(t,Object(ui["a"])(i)),e.setTarget(Object(ui["a"])(i)),t.$emit("update")},i=function e(){t.$drawing.off("pointermove",n),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",n),window.addEventListener("mouseup",i)}}},If),Xf=w.Element.define({groupIndex:1550,interative:!0,state:function(){return{active:!1,x:0,y:0,width:0,height:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,i=e.y,r=e.width,a=e.height,o=this.$drawing.scale,s=r/o,c=a/o;t.lineStyle(1,4096759).beginFill(4096759,.2).drawRect(-s/2,-c/2,s,c).endFill(),t.pivot.x=0,t.pivot.y=0;var u=this.$toCanvas(n,i),l=Object(tr["a"])(u,2);t.x=l[0],t.y=l[1]}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust(e)}))},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},updateState:function(t,e,n,i){this.setPosition(t,e),this.setWidth(n),this.setHeight(i)},beginAdjust:function(t){var e=this,n=this.$drawing,i=this.$data.labelTransformer.getElement(),r=this.$state,a=r.x,o=r.y,s=this.$toGeometry(t.pointerX,t.pointerY),c={x:s[0]-a,y:s[1]-o};li["b"].instanceOf(i,Hf)&&(c.originX=s[0]-i.origin[0],c.originY=s[1]-i.origin[1],c.targetX=s[0]-i.target[0],c.targetY=s[1]-i.target[1]);var u=function(t){var n=e.$toGeometry(t.pointerX,t.pointerY),r=n[0]-c.x,a=n[1]-c.y;if(li["b"].instanceOf(i,zf))if(i.room){var o=e.$state,s=o.width,u=o.height,l=[{x:r-s/2,y:a+u/2},{x:r+s/2,y:a+u/2},{x:r-s/2,y:a-u/2},{x:r+s/2,y:a-u/2}],f=i.room.getOuterSurfaceList().map((function(t){return{x:t.origin[0],y:t.origin[1]}})),d=l.find((function(t){return!h.containsPoint(f,t)}));d||i.setPosition(r,a)}else i.setPosition(r,a);else i.setOrigin([n[0]-c.originX,n[1]-c.originY]),i.setTarget([n[0]-c.targetX,n[1]-c.targetY]);e.setPosition(r,a),e.$emit("update")},l=function t(){n.off("pointermove",u),window.removeEventListener("mouseup",t)};n.on("pointermove",u),window.addEventListener("mouseup",l)}}},If),Kf=w.Tool.READY,qf=Symbol("PickOrigin"),Jf=Symbol("PickTarget"),Qf={PICK_ORIGIN:qf,PICK_TARGET:Jf},Zf=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.ToolProvider(["open","pick","close"])),td=w.Tool.define({},{open:[[Kf,li["d"],qf]],pick:[[qf,function(){var t=this.$plugin,e=this.$data.labelLine=this.$plugin.$createElement("LabelLine");e.setOrigin(t.$toGeometry.apply(t,Object(ui["a"])(t.$drawing.pointer))),t.$drawing.on("pointermove",this.$data.listener=function(n){var i=n.pointerX,r=n.pointerY;e.setTarget(t.$toGeometry(i,r))})},Jf],[Jf,function(){var t=this.$plugin;t.$drawing.off("pointermove",this.$data.listener),this.$emit("pick-target",this.$data.labelLine.$proxy)},Kf]],close:[[qf,li["d"],Kf],[Jf,li["d"],Kf],[Kf,li["d"],Kf]]},{proxy:y.Proxy.Creator(Zf),data:function(){return{labelLine:null,listener:li["d"]}},methods:{},reset:function(){this.close()}}),ed=w.Tool.READY,nd=Symbol("Pick"),id={PICK:nd},rd=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.ToolProvider(["open","pick","close"])),ad=w.Tool.define({},{open:[[ed,li["d"],nd]],pick:[[nd,function(){var t,e=this.$plugin.$drawing,n=this.$plugin.$createElement("LabelText");n.setPosition.apply(n,Object(ui["a"])((t=this.$plugin).$toGeometry.apply(t,Object(ui["a"])(e.pointer)))),this.$emit("pick",n.$proxy)},ed]],close:[[nd,li["d"],ed],[ed,li["d"],ed]]},{proxy:y.Proxy.Creator(rd),data:function(){return{}},methods:{},reset:function(){this.close()}}),od=w.Tool.READY,sd=Symbol("Pick"),cd=Symbol("Show"),ud=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"getElement",value:function(){return Ro(this).getElement()}}]),n}(y.Proxy.ToolProvider(["open","pick","drop","close"])),ld=w.Tool.define(Object(bt["a"])({},cd,(function(){this.updateState()})),{open:[[od,li["d"],sd],[sd,li["d"],sd]],pick:[[sd,function(){this.showTool()},cd],[cd,function(){this.$data.label!==this.$plugin.$drawing.focusing&&this.showTool()},cd],[od,li["d"],od]],drop:[[cd,function(){this.hideTool()},sd],[sd,li["d"],sd],[od,li["d"],od]],close:[[cd,function(){this.hideTool()},od],[sd,li["d"],od],[od,li["d"],od]]},{proxy:y.Proxy.Creator(ud),data:function(t){var e=this,n=t.$createElement("OriginHandler"),i=t.$createElement("TargetHandler"),r=t.$createElement("LabelMover");return n.$on("update",(function(){e.updateState()})),i.$on("update",(function(){e.updateState()})),r.$on("update",(function(){e.updateState()})),{label:null,originHandler:n,targetHandler:i,labelMover:r}},methods:{showTool:function(){this.$data.label=this.$plugin.$drawing.focusing,this.$data.originHandler.show(),this.$data.targetHandler.show(),this.$data.labelMover.show()},hideTool:function(){this.$data.originHandler.hide(),this.$data.targetHandler.hide(),this.$data.labelMover.hide(),this.$data.label=null},updateState:function(){var t,e,n,i=this.$data.label,r=this.$plugin.$drawing.scale,a=i.$bounds,o=a.width,s=a.height,c=a.top,u=a.left,l=this.$plugin.$toGeometry(u+o/2,c+s/2);((t=this.$data.labelMover).updateState.apply(t,Object(ui["a"])(l).concat([o*r,s*r])),li["b"].instanceOf(i,Hf))?((e=this.$data.originHandler).setPosition.apply(e,Object(ui["a"])(i.origin)),(n=this.$data.targetHandler).setPosition.apply(n,Object(ui["a"])(i.target))):(this.$data.originHandler.hide(),this.$data.targetHandler.hide())},getElement:function(){return this.$data.label}},reset:function(){this.close()}}),hd=O.define({id:"com.3dnest.spoke.label",namespace:"label",version:Wf["a"],plugin:If,elements:{LabelLine:Vf,LabelText:Uf,OriginHandler:Yf,TargetHandler:Gf,LabelMover:Xf},tools:{LineLabeler:td,TextLabeler:ad,LabelTransformer:ld}}),fd=n("7c09"),dd=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n,[{key:"ViewAdjuster",get:function(){return Ro(this).$data.viewAdjuster}}]),n}(y.Proxy.Plugin),pd=w.define({proxy:y.Proxy.Creator(dd),data:function(){return{viewAdjuster:null}},created:function(){this.$data.viewAdjuster=this.$createTool("ViewAdjuster")},methods:{}}),vd=w.Element.define({groupIndex:2e3,interative:!0,state:function(){return{origin:null,target:null}},getters:{origin:function(){return this.$state.origin},target:function(){return this.$state.target}},render:function(t){var e=this.$state,n=e.origin,i=e.target;if(n&&i){var r=this.$toCanvas.apply(this,Object(ui["a"])(n)),a=Object(tr["a"])(r,2),o=a[0],s=a[1],c=this.$toCanvas.apply(this,Object(ui["a"])(i)),u=Object(tr["a"])(c,2),l=u[0],h=u[1];t.lineStyle(1,4096759).beginFill(4096759,.2).drawRect(o,s,l-o,h-s).endFill()}},created:function(){},methods:{setOrigin:function(t,e){this.$state.origin=t&&e?[t,e]:null,this.$setDirty()},setTarget:function(t,e){this.$state.target=t&&e?[t,e]:null,this.$setDirty()},remove:function(){this.$destroy()}}},pd),gd=5,md=w.Tool.READY,yd=Symbol("Pick"),bd=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(){return Object(si["a"])(this,n),e.apply(this,arguments)}return Object(ci["a"])(n)}(y.Proxy.ToolProvider(["open","pick","close"])),xd=w.Tool.define(Object(bt["a"])({},md,(function(){var t=this.$plugin;t.$drawing.off("pointerdown",this.$data.pointerdownListener),t.$drawing.off("pointermove",this.$data.pointermoveListener),t.$drawing.off("pointerup",this.$data.pointerupListener)})),{open:[[md,function(){var t=this.$plugin;t.$drawing.on("pointerdown",this.$data.pointerdownListener),t.$drawing.on("pointermove",this.$data.pointermoveListener),t.$drawing.on("pointerup",this.$data.pointerupListener)},yd]],close:[[yd,li["d"],md],[md,li["d"],md]]},{proxy:y.Proxy.Creator(bd),data:function(t){var e=this,n=t.$drawing.scale,i=t.$createElement("Field"),r=function(e){if(0===e.button&&!i.origin){var n=e.pointerX,r=e.pointerY;i.setOrigin.apply(i,Object(ui["a"])(t.$toGeometry(n,r)))}},a=function(e){var n=e.pointerX,r=e.pointerY;i.setTarget.apply(i,Object(ui["a"])(t.$toGeometry(n,r)))},o=function(t){if(0===t.button){var r=i.origin,a=i.target,o=[(r[0]+a[0])/2,(r[1]+a[1])/2],s=li["c"].abs(r[0]-a[0])/n,c=li["c"].abs(r[1]-a[1])/n;s>gd&&c>gd&&(e.areaZoomToView.apply(e,Object(ui["a"])(r).concat(Object(ui["a"])(a))),e.pointBackToCenter.apply(e,o)),i.setOrigin(null)}};return{field:i,pointerdownListener:r,pointermoveListener:a,pointerupListener:o}},methods:{pointBackToCenter:function(t,e){var n=this.$plugin.$drawing,i=n.width,r=n.height,a=n.origin,o=this.$plugin.$toCanvas(t,e),s=i/2-o[0],c=r/2-o[1];this.$plugin.$drawing.setOrigin(a[0]+s,a[1]+c)},areaZoomToView:function(t,e,n,i){var r=this.$plugin.$drawing,a=r.width,o=r.height,s=r.scale,c=li["c"].abs(t-n)/s,u=li["c"].abs(e-i)/s,l=s*c/a,h=s*u/o;this.$plugin.$drawing.setScale(li["c"].ceil(li["c"].max(l,h)))}},reset:function(){this.close()}}),$d=O.define({id:"com.3dnest.spoke.viewport",namespace:"viewport",version:fd["a"],plugin:pd,elements:{Field:vd},tools:{ViewAdjuster:xd}}),wd=Math.PI,Od=60,jd=15,kd=10,Td={stateless:{line:0,arcLine:14145753,fill:16777215,windowFill:13421772},hover:{line:8053503,arcLine:15464441,fill:16777215,windowFill:13421772},select:{line:4096759,arcLine:15068665,fill:16777215,windowFill:13421772}},Ed=function(t){var e=t.hover,n=t.focus,i=t.select;return i||n?Td.select:e?Td.hover:Td.stateless},Sd={width:800,render:function(t,e){var n=e.width,i=e.height,r=e.fliped,a=e.scale,o=r?1:0,s=jd/a,c=Od/a,u=Ed(e);return t.lineStyle(s,u.arcLine).beginFill(u.fill,.1).arc(n*o,i/2,n,-wd/2*o-wd/2,-wd*o/2).lineTo(n*o,i/2).lineTo(0,i/2-n+o*n).endFill().beginFill(u.fill).lineStyle(s,u.fill).drawRect(0,0,n,i).lineStyle(s,u.line).moveTo(0,0).lineTo(0,i).moveTo(n,0).lineTo(n,i).lineStyle(s,u.line).drawRect((n-c)*o,i/2,c,-n),t.pivot.x=n/2,t.pivot.y=i/2,t}},Cd={width:1500,render:function(t,e){var n=e.width,i=e.height,r=e.scale,a=jd/r,o=Od/r,s=Ed(e);return t.lineStyle(a,s.arcLine).beginFill(s.fill,.1).arc(0,i/2,n/2,-wd/2,0).lineTo(0,i/2).lineTo(0,(i-n)/2).endFill().beginFill(s.fill,.1).lineStyle(a,s.arcLine).arc(n,i/2,n/2,wd,-wd/2).lineTo(n,i/2).lineTo(n/2,i/2).endFill().beginFill(s.fill).lineStyle(a,s.fill).drawRect(0,0,n,i).lineStyle(a,s.line).moveTo(0,0).lineTo(0,i).moveTo(n,0).lineTo(n,i).drawRect(0,i/2,o,-n/2).drawRect(n,i/2,-o,-n/2),t.pivot.x=n/2,t.pivot.y=i/2,t}},Ld={width:1500,render:function(t,e){var n=e.width,i=e.height,r=e.scale,a=e.fliped,o=a?-1:1,s=jd/r,c=kd/r,u=Ed(e);return t.lineStyle(s,u.line).beginFill(u.fill).drawRect(0,0,n,i).drawRect(0+s+c,i/2,2*n/3,i/4*o).drawRect(n-s-c,i/2,-2*n/3,-i/4*o),t.pivot.x=n/2,t.pivot.y=i/2,t}},Pd={width:1450,render:function(t,e){var n=e.width,i=e.height,r=e.fliped,a=e.scale,o=r?1:0,s=jd/a,c=Ed(e);return t.lineStyle(s,c.line).beginFill(c.fill).drawRect(0,0,n,i).moveTo(0,i/3).lineTo(n,i/3).moveTo(0,2*i/3).lineTo(n,2*i/3).moveTo(n/4+o*n/2,i/3).lineTo(n/4+o*n/2,2*i/3).endFill(),t.pivot.x=n/2,t.pivot.y=i/2,t}},Fd={width:2e3,render:function(t,e){var n=e.width,i=e.height,r=e.scale,a=jd/r,o=Ed(e);return t.lineStyle(a,o.fill).beginFill(o.fill).drawRect(0,0,n,i).endFill().lineStyle(a,o.line).drawRect(0,0,n,i/3).drawRect(0,2*i/3,n,i/3),t.pivot.x=n/2,t.pivot.y=i/2,t}},Ad={width:800,render:function(t,e){var n=e.width,i=e.height,r=e.scale,a=jd/r,o=Ed(e);return t.lineStyle(a,o.line).beginFill(o.fill).drawRect(0,0,n,i).moveTo(0,i/2).lineTo(n,i/2).endFill(),t.pivot.x=n/2,t.pivot.y=i/2,t}},Nd={width:1500,render:function(t,e){var n=e.width,i=e.scale,r=e.sillThickness,a=void 0===r?500/i:r,o=e.height,s=jd/i,c=o,u=Ed(e);return t.lineStyle(s,u.line).beginFill(u.windowFill).drawRect(0,-a,n,a).endFill().beginFill(u.fill).moveTo(0,-o).lineTo(0,-a).lineTo(n,-a).lineTo(n,-o).lineTo(n+c,-o).lineTo(n+c,-(a+c)).lineTo(-c,-(a+c)).lineTo(-c,-o).lineTo(0,-o).endFill().moveTo(-c/2,-o).lineTo(-c/2,-(a+c/2)).lineTo(n+c/2,-(a+c/2)).lineTo(n+c/2,-o),t.pivot.x=n/2,t.pivot.y=-o/2,t}},_d={width:1500,render:function(t,e){var n=e.width,i=e.height,r=e.scale,a=jd/r,o=Ed(e);return t.lineStyle(a,o.line).beginFill(o.fill).drawRect(0,0,n,i).endFill().moveTo(0,i/2).lineTo(n,i/2).moveTo(0,i/3).lineTo(n,i/3).moveTo(0,2*i/3).lineTo(n,2*i/3).moveTo(n/2,i/3).lineTo(n/2,2*i/3),t.pivot.x=n/2,t.pivot.y=i/2,t}},Dd={render:function(t,e){var n=e.leftWidth,i=e.rightWidth,r=e.leftWallThickness,a=e.rightWallThickness,o=e.scale,s=jd/o,c=Ed(e);return t.lineStyle(s,c.line).beginFill(c.fill).moveTo(0,0).lineTo(i,0).lineTo(i,a).lineTo(r,a).lineTo(r,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(r/2,n).lineTo(r/2,a/2).lineTo(i,a/2),t.pivot.x=i/2,t.pivot.y=a/2,t}},Rd={render:function(t,e){var n=e.leftWidth,i=e.centerWidtn,r=e.rightWidth,a=e.leftWallThickness,o=e.centerWallThickness,s=e.rightWallThickness,c=e.scale,u=jd/c,l=Ed(e);return t.lineStyle(u,l.line).beginFill(l.fill).moveTo(0,0).lineTo(i,0).lineTo(i,r).lineTo(i-s,r).lineTo(i-s,o).lineTo(a,o).lineTo(a,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(a/2,n).lineTo(a/2,o/2).lineTo(i-s/2,o/2).lineTo(i-s/2,r),t.pivot.x=i/2,t.pivot.y=o/2,t}},Wd={render:function(t,e){var n=e.leftWidth,i=e.rightWidth,r=e.leftWindowThickness,a=e.rightWindowThickness,o=e.leftWallThickness,s=e.rightWallThickness,c=e.scale,u=jd/c,l=Ed(e);return t.lineStyle(u,l.line).beginFill(l.windowFill).moveTo(o,s).lineTo(i,s).lineTo(i,s-a).lineTo(o-r,s-a).lineTo(o-r,n).lineTo(o,n).lineTo(o,s).endFill().beginFill(l.fill).moveTo(o-r,s-a).lineTo(i,s-a).lineTo(i,0).lineTo(i+s,0).lineTo(i+s,-a).lineTo(-r,-a).lineTo(-r,n+o).lineTo(0,n+o).lineTo(0,n).lineTo(o-r,n).lineTo(o-r,s-a).endFill().moveTo(0,n+o/2).lineTo(o/2-r,n+o/2).lineTo(o/2-r,s/2-a).lineTo(i+s/2,s/2-a).lineTo(i+s/2,0),t.pivot.x=i/2,t.pivot.y=s/2,t}},Md={render:function(t,e){var n=e.leftWidth,i=e.centerWidtn,r=e.rightWidth,a=e.leftWindowThinkness,o=e.centerWindowThinkness,s=e.rightWindowThinkness,c=e.leftWallThickness,u=e.centerWallThickness,l=e.rightWallThickness,h=e.scale,f=jd/h,d=Ed(e);return t.lineStyle(f,d.line).beginFill(d.windowFill).moveTo(c,u).lineTo(i-l,u).lineTo(i-l,r).lineTo(i-l+s,r).lineTo(i-l+s,u-o).lineTo(c-a,u-o).lineTo(c-a,n).lineTo(c,n).lineTo(c,u).endFill().beginFill(d.fill).moveTo(c-a,u-o).lineTo(i+s-l,u-o).lineTo(i+s-l,r).lineTo(i,r).lineTo(i,r+l).lineTo(i+s,r+l).lineTo(i+s,-o).lineTo(-a,-o).lineTo(-a,n+c).lineTo(0,n+c).lineTo(0,n).lineTo(c-a,n).lineTo(c-a,u-o).endFill().moveTo(0,n+c/2).lineTo(c/2-a,n+c/2).lineTo(c/2-a,u/2-o).lineTo(i+s-l/2,u/2-o).lineTo(i+s-l/2,r+l/2).lineTo(i,r+l/2),t.pivot.x=i/2,t.pivot.y=u/2,t}},Id=[{value:"singleDoor",content:U.SingleDoor},{value:"doubleDoor",content:U.DoubleDoor},{value:"slidingDoor",content:U.SlidingDoor},{value:"parentDoor",content:U.ParentDoor},{value:"bealock",content:U.Bealock},{value:"basicWindow",content:Y.BasicWindow},{value:"boilerWindow",content:Y.BoilerWindow},{value:"floorWindow",content:Y.FloorWindow}],Hd=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Id,n=Object(Ue["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;j.register(i.value,i.content)}}catch(r){n.e(r)}finally{n.f()}return e.map((function(t){return t.value}))},Bd=function(){return j.getAllNameList()},Vd=function(t){t.canvasElement.addEventListener("contextmenu",na["b"].preventDefault)},zd=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t.on("pointerdown",(function(n){if(n.button===e){var i=Object(tr["a"])(t.origin,2),r=i[0],a=i[1],o=n.pointerX,s=n.pointerY,c=function(e){var n=e.pointerX,i=e.pointerY;t.setOrigin(r+n-o,a+i-s)},u=function e(){t.off("pointermove",c),na["a"].removeEventListener(na["c"].WINDOW,"mouseup",e)};t.on("pointermove",c),na["a"].addEventListener(na["c"].WINDOW,"mouseup",u)}}))},Ud=function(t){na["a"].addEventListener(t.canvasElement,"wheel",(function(e){e.deltaY>0?t.setScaleInMode(t.scale+1,1):t.setScaleInMode(t.scale-1,1)}))},Yd=function(t,e){t.structure.on("room-created",(function(t){t.setFloor(e)}))},Gd=function(t){t.compass.element.$on("pointerdown",(function(e){Xd(t,e)}))},Xd=function(t,e){var n=t.compass.element,i=n.x,r=n.y,o=n.rotation,s=e.pointerX,c=e.pointerY,u=li["c"].atan2.apply(li["c"],Object(ui["a"])(a.from(i,r,s,c))),l=function(t){var e=li["c"].atan2.apply(li["c"],Object(ui["a"])(a.from(i,r,t.pointerX,t.pointerY))),s=(o-e+u)%(2*li["c"].PI);n.setRotation(s),n.$emit("rotate",s)},h=function e(){t.off("pointermove",l),window.removeEventListener("mouseup",e)};t.on("pointermove",l),window.addEventListener("mouseup",h)},Kd=Symbol(),qd=Symbol(),Jd=Symbol(),Qd=Symbol(),Zd=Symbol(),tp=Symbol(),ep=Symbol(),np=(Jh={},Object(bt["a"])(Jh,Kd,{open:function(t){t.hammer.adjuster.open(),t.common.transformer.open(),t.bricklayer.Mover.open(),t.bricklayer.Extender.open(),t.label.LabelTransformer.open()},close:function(t){t.hammer.adjuster.close(),t.common.transformer.close(),t.bricklayer.Mover.close(),t.bricklayer.Extender.close(),t.label.LabelTransformer.close()}}),Object(bt["a"])(Jh,qd,{open:function(t){t.common.selector.open()},close:function(t){t.common.selector.close()}}),Object(bt["a"])(Jh,Jd,{open:function(t){t.bricklayer.Builder.pick()},close:function(t){t.bricklayer.Builder.drop().drop()}}),Object(bt["a"])(Jh,Qd,{open:function(t){t.bricklayer.Spliter.open()},close:function(t){t.bricklayer.Spliter.close()}}),Object(bt["a"])(Jh,Zd,{open:function(t){t.bricklayer.Chamber.pick()},close:function(t){t.bricklayer.Chamber.drop().drop()}}),Object(bt["a"])(Jh,tp,{open:function(t){t.viewport.ViewAdjuster.open()},close:function(t){t.viewport.ViewAdjuster.close()}}),Object(bt["a"])(Jh,ep,{open:function(t){t.label.open()},close:function(t){t.label.close()}}),Jh),ip=function(){function t(e){Object(si["a"])(this,t),li["b"].instanceOf(e,Fo)||li["b"].Throw.TypeError("The `drawing` MUST be a DrawingProxy."),this.drawing=e,this.current=null,this.activeDefault()}return Object(ci["a"])(t,[{key:"active",value:function(t){this.current!==t&&(this.current&&np[this.current].close(this.drawing),np[t].open(this.drawing),this.current=t)}},{key:"activeDefault",value:function(){this.active(qd)}},{key:"deactiveAllTool",value:function(){this.current&&(np[this.current].close(this.drawing),this.current=null)}}]),t}(),rp=Object(ci["a"])((function t(){Object(si["a"])(this,t)})),ap=function(t){var e=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;return Object(si["a"])(this,n),i=e.call(this),i.drawing=t,i}return Object(ci["a"])(n,[{key:"execute",value:function(){var t=this.drawing.structure.getAllWallList(),e=this.drawing.structure.getAllCornerList(),n=this.drawing.windoor.getAllHollowList(),i=this.drawing.furniture.getAllStuffList(),r=this.drawing.negative.getAllBitmapList(),a=this.drawing.label.getAllLabelTextList(),o=this.drawing.label.getAllLabelLineList(),s=t.map((function(t){var n=[];return n.push(e.indexOf(t.thisSurface.corner)),n.push(e.indexOf(t.thatSurface.corner)),n.push(t.thickness),n})),c=n.filter((function(t){return"virtual"!==t.surface.name})).map((function(t){var n=t.materialName,i=t.width,r=t.fliped,a=t.offset,o=t.surface,s=e.indexOf(o.corner),c=e.indexOf(o.back.corner);return{materialName:n,width:i,fliped:r,offset:a,surface:[s,c]}})),u=i.map((function(t){var e=t.fill,n=t.x,i=t.y,r=t.width,a=t.height;return{fill:e,x:n,y:i,width:r,height:a}})),l=r.map((function(t){var e=t.url,n=t.width,i=t.height,r=t.x,a=t.y,o=t.rotation;return{url:e,width:n,height:i,x:r,y:a,rotation:o}})),h=a.filter((function(t){return!t.room})).map((function(t){var e=t.x,n=t.y,i=t.text;return{x:e,y:n,text:i}})),f=o.map((function(t){var e=t.origin,n=t.target,i=t.text;return{origin:e,target:n,text:i}}));return{cornerList:e.map((function(t){return[t.x,t.y]})),wallList:s,hollowList:c,stuffList:u,bitmapList:l,labelTextList:h,labelLineList:f}}}]),n}(rp);return new e(t)},op=function(t){var e=function(){function e(t){Object(si["a"])(this,e),this.drawing=t}return Object(ci["a"])(e,[{key:"execute",value:function(e){var n=e.cornerList,i=e.wallList,r=e.hollowList,a=e.stuffList,o=e.bitmapList,s=e.labelTextList,c=e.labelLineList,u=n.map((function(e){var n;return(n=t.structure).createCorner.apply(n,Object(ui["a"])(e))}));i.forEach((function(e){var n=t.structure.createWall(u[e[0]],u[e[1]]);n.thickness=e[2]})),r&&r.length&&r.forEach((function(e){var n=u[e.surface[0]],i=u[e.surface[1]],r=n.getWallByToCorner(i),a=t.windoor.createHollow(e.materialName,r.thisSurface.corner===n?r.thisSurface:r.thatSurface,e.offset);a.setWidth(e.width),a.fliped!==e.fliped&&a.flip()})),a&&a.length&&a.forEach((function(e){var n=e.fill,i=e.x,r=e.y,a=e.width,o=e.height;t.furniture.createStuff(n,i,r,a,o)})),o&&o.length&&o.forEach((function(e){var n=e.url,i=e.width,r=e.height,a=e.x,o=e.y,s=e.rotation;t.negative.createBitmap(n,i,r).then((function(t){t.setPosition(a,o),t.setRotation(s)}))})),s&&s.length&&s.forEach((function(e){var n=e.x,i=e.y,r=e.text;t.label.createLabelText(n,i,r)})),c&&c.length&&c.forEach((function(e){var n=e.origin,i=e.target,r=e.text;t.label.createLabelLine(n,i,r)}))}}]),e}();return new e(t)},sp=(n("bf64"),{w:[0,-1],a:[-1,0],s:[0,1],d:[1,0]}),cp=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;window.addEventListener("keydown",(function(n){var i=Object(tr["a"])(t.origin,2),r=i[0],a=i[1],o=sp[n.key];o&&t.setOrigin(r+e*o[0],a+e*o[1])}))},up=function(t){Object(Ur["a"])(n,t);var e=Object(Yr["a"])(n);function n(t){var i;return Object(si["a"])(this,n),i=e.call(this),i.surface=t,t.on("dirty",(function(){return i.emit("change")})),t.on("destroy",(function(){return i.emit("destroy")})),i}return Object(ci["a"])(n,[{key:"from",get:function(){return this.surface.origin}},{key:"to",get:function(){return this.surface.target}}]),n}(H.BaseAdaptor);function lp(t){var e=t.structure,n=t.measure;n.setFontsizer((function(t){return 200/t})),n.setTextOffsetYModifier((function(t){return-2*t/3})),e.on("surface-created",(function(t){n.createDimension(new up(t))}))}var hp=lp,fp=function(t,e,n,i,r){var a=[[t-n/2,e+i/2],[t+n/2,e+i/2],[t+n/2,e-i/2],[t-n/2,e-i/2]];return a.map((function(n){return c.rotate.apply(c,Object(ui["a"])(n).concat([r,t,e])).slice(0)}))},dp=function(t,e,n,i,r){var a=fp(t,e,n,i,r);return[[a[0],a[1]],[a[1],a[2]],[a[2],a[3]],[a[3],a[0]]]},pp=function(t,e,n,i,r,a){return c.project.apply(c,[t,e].concat(Object(ui["a"])(s.fromSegment(n,i,r,a))))},vp=function(t,e,n){var i=null,r=-1;return t.forEach((function(t){var a=c.distanceToSegment.apply(c,[e,n].concat(Object(ui["a"])(t.origin),Object(ui["a"])(t.target)));(!i||a<r)&&(i=t,r=a)})),i},gp=function(t,e,n,i,r){var a=t.map((function(t){return c.distanceToSegment.apply(c,Object(ui["a"])(t).concat([e,n,i,r]))}));return Math.max.apply(Math,Object(ui["a"])(a))},mp=function(t,e,n,i,r,a){return((n-t)*(a-e)-(r-t)*(i-e))/2},yp=function(t){if(!(t.length<3)){for(var e=t[0],n=0,i=0,r=0,a=t[1],o=2;o<t.length;o++){var s=t[o],c=mp.apply(void 0,Object(ui["a"])(e).concat(Object(ui["a"])(a),Object(ui["a"])(s)));r+=c,n+=(e[0]+a[0]+s[0])*c,i+=(e[1]+a[1]+s[1])*c,a=s}return[n/r/3,i/r/3]}},bp={getPosition:function(t){return[t.x,t.y]},setPosition:function(t,e,n){t.setPosition(e,n)},getWidth:function(t){return t.width},setWidth:function(t,e){t.setWidth(e)},getHeight:function(t){return t.height},setHeight:function(t,e){t.setHeight(e)},getRotation:function(t){return t.rotation},setRotation:function(t,e){t.setRotation(e)}},xp=[{proxy:is,bounds:"$bounds"},{proxy:Yo,bounds:"$bounds"},{proxy:zf,bounds:"$bounds"},{proxy:Hf,bounds:"$bounds"},{proxy:ls,bounds:"$bounds"},{proxy:fs,bounds:"$bounds"},{proxy:Hu,bounds:"$bounds"},{proxy:oh,bounds:"$bounds"}],$p=function(t){t.common.addTransformerAdapter(is,Object.assign({adjustVerify:function(e,n){var i=n.$state,r=i.x,o=i.y,s=e.x,u=e.y,h=t.structure.getAllWallList(),f=h.map((function(t){return t.thisSurface})),d=h.map((function(t){return t.thatSurface})),p=f.concat(d),v=fp(r,o,e.width,e.height,e.rotation),g=dp(r,o,e.width,e.height,e.rotation),m=p.filter((function(t){return g.find((function(e){return l.intersectSegment.apply(l,Object(ui["a"])(e[0]).concat(Object(ui["a"])(e[1]),Object(ui["a"])(t.origin),Object(ui["a"])(t.target)))}))}));if(m.length){if(m.length>2)return!1;if(2===m.length&&m[0].back!==m[1])return!1;var y=vp(m,s,u),b=c.toLeftOfSegment.apply(c,[s,u].concat(Object(ui["a"])(y.origin),Object(ui["a"])(y.target))),x=c.toLeftOfSegment.apply(c,[r,o].concat(Object(ui["a"])(y.origin),Object(ui["a"])(y.target))),$=v.filter((function(t){return c.toLeftOfSegment.apply(c,Object(ui["a"])(t).concat(Object(ui["a"])(y.origin),Object(ui["a"])(y.target)))!==b})),w=gp.apply(void 0,[$].concat(Object(ui["a"])(y.origin),Object(ui["a"])(y.target))),O=pp.apply(void 0,[r,o].concat(Object(ui["a"])(y.origin),Object(ui["a"])(y.target))),j=b===x?a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,Object(ui["a"])(O).concat([r,o])))):a.normalize.apply(a,Object(ui["a"])(a.fromBothPoint.apply(a,[r,o].concat(Object(ui["a"])(O))))),k=Object(tr["a"])(j,2),T=k[0],E=k[1],S=c.translate.apply(c,[r,o].concat(Object(ui["a"])(a.multiply(T,E,w+1)))),C=Object(tr["a"])(S,2),L=C[0],P=C[1],F=dp(L,P,e.width,e.height,e.rotation),A=F.find((function(t){var e=f.find((function(e){return l.intersectSegment.apply(l,Object(ui["a"])(t[0]).concat(Object(ui["a"])(t[1]),Object(ui["a"])(e.origin),Object(ui["a"])(e.target)))})),n=d.find((function(e){return l.intersectSegment.apply(l,Object(ui["a"])(t[0]).concat(Object(ui["a"])(t[1]),Object(ui["a"])(e.origin),Object(ui["a"])(e.target)))}));return e||n}));return A?null:[L,P]}return!0},setRoom:function(t,e){t.setRoom(e)}},bp)),t.common.addTransformerAdapter(oh,bp);var e,n=Object(Ue["a"])(xp);try{var i=function(){var n=e.value;t.common.addSelectorAdapter(n.proxy,{getBounds:function(t){return t[n.bounds]}})};for(n.s();!(e=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}},wp=(n("b680"),function(t){return(t/1e6).toFixed(2)}),Op=function(t){var e,n=t.drawing,i=t.tool,r=n.bricklayer.Builder,a=n.label.TextLabeler,o=n.label.LineLabeler;n.on("pointerup",(function(t){if(0===t.button){var e=n.focusing;n.common.selectorAction(e,t.ctrlKey),n.common.transformerAction(e),li["b"].instanceOf(e,j.HollowProxy)?n.hammer.adjuster.pick():n.hammer.adjuster.drop(),li["b"].instanceOf(e,V.LabelTextProxy)||li["b"].instanceOf(e,V.LabelLineProxy)?n.label.LabelTransformer.pick():n.label.LabelTransformer.drop()}})),n.on("pointerdown",(function(t){var e=t.button;if(r.$state===M.STATE.Builder.PICKUP_TO){if(0===e)return void r.build().pick().pick();2===e&&r.drop()}else r.$state===M.STATE.Builder.PICKUP_FROM&&0===e&&r.pick()})),n.on("pointerdown",(function(t){var e=t.button;0===e&&(a.$state===V.STATE.TextLabeler.PICK&&a.pick().open(),o.$state===V.STATE.LineLabeler.PICK_ORIGIN?o.pick():o.$state===V.STATE.LineLabeler.PICK_TARGET&&o.pick().open())}));var s=n.bricklayer.Chamber,c=(e={},Object(bt["a"])(e,M.STATE.Chamber.PICKUP_FROM,(function(t){0===t&&s.pick()})),Object(bt["a"])(e,M.STATE.Chamber.PICKUP_TO,(function(t){0===t?s.build().pick():2===t&&s.drop()})),e);n.on("pointerdown",(function(t){s.$state!==w.Tool.READY&&c[s.$state](t.button)})),n.structure.on("room-created",(function(t){setTimeout((function(){var e,i=t.getOuterSurfaceList().map((function(t){return[t.corner.x,t.corner.y]})),a=(e=n.label).createLabelText.apply(e,Object(ui["a"])(yp(i)).concat(["未命名\n面积: ".concat(wp(t.area),"m²")]));a.setRoom(t);var o=t.area;t.on("dirty",(function(){if(t.area!==o){var e=t.getOuterSurfaceList().map((function(t){return[t.corner.x,t.corner.y]})),n=a.text,i=n.slice(0,n.indexOf("\n"));a.setPosition.apply(a,Object(ui["a"])(yp(e))),a.setText("".concat(i,"\n面积: ").concat(wp(t.area),"m²")),o=t.area}})),t.on("destroy",(function(){a.remove()}));var s=M.STATE.Builder;r.$state===s.PICKUP_TO&&1!==r.from.size&&r.drop()}))})),window.addEventListener("keydown",(function(t){if("Escape"===t.code){if(i.activated===q.Symbol.WALL_BUILDER&&r.$state===M.STATE.Builder.PICKUP_TO)return void r.drop();i.openDefault()}}))},jp=new WeakMap,kp=function(t){return jp.get(t)},Tp=function(){function t(e){Object(si["a"])(this,t),jp.set(this,new q.Constructor(e))}return Object(ci["a"])(t,[{key:"activated",get:function(){return kp(this).current}},{key:"openDefault",value:function(){kp(this).activeDefault()}},{key:"closeAllTool",value:function(){kp(this).deactiveAllTool()}},{key:"openTransformer",value:function(){kp(this).active(q.Symbol.TRANSFORMER)}},{key:"openSelector",value:function(){kp(this).active(q.Symbol.SELECTOR)}},{key:"openWallBuilder",value:function(){kp(this).active(q.Symbol.WALL_BUILDER)}},{key:"openChamber",value:function(){kp(this).active(q.Symbol.CHAMBER)}},{key:"openSpliter",value:function(){kp(this).active(q.Symbol.SPLITER)}},{key:"openViewport",value:function(){kp(this).active(q.Symbol.VIEWPORT)}},{key:"openLabel",value:function(){kp(this).active(q.Symbol.LABEL)}}]),t}(),Ep=function(t,e,n){var i=function(){function t(e){Object(si["a"])(this,t),li["b"].instanceOf(e,Fo)||li["b"].Throw.TypeError("The `drawing` MUST be a DrawingProxy."),this.drawing=e}return Object(ci["a"])(t,[{key:"changeFloor",value:function(t){var i=e.execute();return Sp(this.drawing),n.execute(t),i}}]),t}();return new i(t)},Sp=function(t){var e=t.windoor.getAllHollowList(),n=t.furniture.getAllStuffList(),i=t.structure.getAllCornerList(),r=t.negative.getAllBitmapList();e.forEach((function(t){return t.remove()})),n.forEach((function(t){return t.remove()})),i.forEach((function(t){return t.remove()})),r.forEach((function(t){return t.remove()}))},Cp="https://qhcmsoss.kujiale.com/ttex/L2HNXEIKN4FT2AABAAAAAAY8.jpg",Lp=Object(ci["a"])((function t(e){Object(si["a"])(this,t),this.drawing=e,this.tool=new Tp(e),this.serializer=J.Provider(e),this.deserializer=Q.Provider(e),this.floor=nt.Provider(e,this.serializer,this.deserializer)})),Pp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Fo,n=new Lp(e);return t.element&&e.mount(t.element),et.Surface.all(e),X.AdjustViewportByPointerButton(e),X.PreventDefaultContextMenu(e),X.AdjustZoomByWheel(e),X.SetDefaultFloor(e,Cp),X.rotateCompassByDrag(e),Z.MovingByWASD(e,10),$p(e),Op(n),n};[Yu,Ko,os,nh,Wh,yf,tf,lh,ph,Rf,hd,$d].forEach((function(t){return to(t)}));var Fp,Ap,Np=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.copyStuff}},[t._v("复制")]),n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.defaultWidthHeight}},[t._v("恢复默认")]),n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteStuff}},[t._v("删除")])],1)],2)},_p=[],Dp=[{name:"横坐标",value:"x",method:"setPosition"},{name:"纵坐标",value:"y",method:"setPosition"},{name:"宽度",value:"width",append:"mm",method:"setWidth",min:10},{name:"高度",value:"height",append:"mm",method:"setHeight",min:10},{name:"角度",value:"rotation",append:"degrees",method:"setRotation",min:-360,max:360}],Rp=function(t){return t/Math.PI/2*360},Wp=function(t){return t/360*2*Math.PI},Mp=function(t){return 10*t},Ip=null,Hp={name:"FeatureElementStuff",data:function(){return{state:{width:10,height:10,rotation:0,x:0,y:0}}},computed:{propertyList:function(){return Dp}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),Ip&&Ip.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},Ip=n.common.getSelectedList()[0],this.updateState(Ip),Ip.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==Ip&&n.constructor===Ip.constructor&&(Ip.off("change",t._changelistener),n.on("change",t._changelistener),Ip=n,t.updateState(n))})},updateState:function(t){var e=t.width,n=t.height,i=t.rotation,r=t.x,a=t.y;Object.assign(this.state,{width:e.toFixed(),height:n.toFixed(),rotation:Rp(i).toFixed(),x:r.toFixed(),y:a.toFixed()})},propertyAction:function(t){this[t]()},setWidth:function(){Ip.setWidth(Number(this.state.width))},setHeight:function(){Ip.setHeight(Number(this.state.height))},setRotation:function(){Ip.setRotation(Wp(this.state.rotation))},setPosition:function(){Ip.setPosition(Number(this.state.x),Number(this.state.y))},copyStuff:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing,n=Ip,i=n.fill,r=n.width,a=n.height,o=n.rotation;e.furniture.createMovingStuff(i,r,a,o)},defaultWidthHeight:function(){var t=this.$spoke.getFurnitureList().find((function(t){return t.id===Ip.fill}));Ip.setWidth(Mp(t.dWidth)),Ip.setHeight(Mp(t.dHeight)),Ip.setRotation(0)},deleteStuff:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),Ip.off("change",this._changelistener),Ip.remove(),Ip=null}}},Bp=Hp,Vp=Object(pt["a"])(Bp,Np,_p,!1,null,null,null),zp=Vp.exports,Up=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.flip}},[t._v("翻转")]),n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.copyHollow}},[t._v("复制")]),n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.defaultWidth}},[t._v("恢复默认")]),n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteHollow}},[t._v("删除")])],1)],2)},Yp=[],Gp=[{name:"宽度",value:"width",append:"mm",method:"setWidth",min:100}],Xp=null,Kp={name:"FeatureElementHollow",data:function(){return{state:{width:10}}},computed:{propertyList:function(){return Gp}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),Xp&&Xp.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},Xp=n.common.getSelectedList()[0],this.updateState(Xp),Xp.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==Xp&&n.constructor===Xp.constructor&&(Xp.off("change",t._changelistener),n.on("change",t._changelistener),Xp=n,t.updateState(n))})},updateState:function(t){var e=t.width;Object.assign(this.state,{width:e.toFixed()})},propertyAction:function(t){this[t]()},setWidth:function(){Xp.setWidth(Number(this.state.width))},flip:function(){Xp.flip()},copyHollow:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing,n=Xp,i=n.materialName,r=n.width;e.windoor.createMovingHollow(i,r)},defaultWidth:function(){Xp.setWidth(Xp.defaultWidth)},deleteHollow:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),Xp.off("change",this._changelistener),Xp.remove(),Xp=null}}},qp=Kp,Jp=Object(pt["a"])(qp,Up,Yp,!1,null,null,null),Qp=Jp.exports,Zp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),t.state.isRoomLabel?t._e():n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.openLabelModal}},[t._v("修改文字")]),n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteLabel}},[t._v("删除")])],1),n("b-modal",{ref:"label-text-modal",attrs:{size:"sm","hide-footer":"",title:"标注内容"}},[n("div",{staticClass:"d-block text-center"},[n("b-form-input",{attrs:{placeholder:"No Text"},model:{value:t.state.text,callback:function(e){t.$set(t.state,"text",e)},expression:"state.text"}}),n("b-button",{staticClass:"mt-3",attrs:{variant:"info",block:""},on:{click:t.setText}},[t._v("确定")])],1)])],2)},tv=[],ev=(n("5319"),n("5b81"),[{name:"横坐标",value:"x",method:"setPosition"},{name:"纵坐标",value:"y",method:"setPosition"}]),nv=null,iv={name:"FeatureElementLabelText",data:function(){return{state:{x:0,y:0,text:"",isRoomLabel:!1}}},computed:{propertyList:function(){return ev}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),nv&&nv.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},nv=n.common.getSelectedList()[0],this.updateState(nv),nv.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==nv&&n.constructor===nv.constructor&&(nv.off("change",t._changelistener),n.on("change",t._changelistener),nv=n,t.updateState(n))})},updateState:function(t){var e=t.x,n=t.y,i=t.text,r=t.room;Object.assign(this.state,{x:e.toFixed(),y:n.toFixed(),isRoomLabel:!!r,text:i})},propertyAction:function(t){this[t]()},setPosition:function(){nv.setPosition(Number(this.state.x),Number(this.state.y))},openLabelModal:function(){this.state.text=nv.text.replaceAll("\n","\\n"),this.$refs["label-text-modal"].show()},setText:function(){nv.setText(this.state.text.replaceAll("\\n","\n")),this.$refs["label-text-modal"].hide()},deleteLabel:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),nv.off("change",this._changelistener),nv.remove(),nv=null}}},rv=iv,av=Object(pt["a"])(rv,Zp,tv,!1,null,null,null),ov=av.exports,sv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button mr-1",on:{click:t.openLabelModal}},[t._v("修改文字")]),n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteLabel}},[t._v("删除")])],1),n("b-modal",{ref:"label-line-modal",attrs:{size:"sm","hide-footer":"",title:"标注内容"}},[n("div",{staticClass:"d-block text-center"},[n("b-form-input",{attrs:{placeholder:"No Text"},model:{value:t.state.text,callback:function(e){t.$set(t.state,"text",e)},expression:"state.text"}}),n("b-button",{staticClass:"mt-3",attrs:{variant:"info",block:""},on:{click:t.setText}},[t._v("确定")])],1)])],2)},cv=[],uv=[{name:"起点横坐标",value:"originX",method:"setOrigin"},{name:"起点纵坐标",value:"originY",method:"setOrigin"},{name:"终点横坐标",value:"targetX",method:"setTarget"},{name:"终点纵坐标",value:"targetY",method:"setTarget"}],lv=null,hv={name:"FeatureElementLabelLine",data:function(){return{state:{originX:0,originY:0,targetX:0,targetY:0,text:""}}},computed:{propertyList:function(){return uv}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),lv&&lv.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},lv=n.common.getSelectedList()[0],this.updateState(lv),lv.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==lv&&n.constructor===lv.constructor&&(lv.off("change",t._changelistener),n.on("change",t._changelistener),lv=n,t.updateState(n))})},updateState:function(t){var e=t.origin,n=t.target,i=t.text;Object.assign(this.state,{originX:e[0].toFixed(),originY:e[1].toFixed(),targetX:n[0].toFixed(),targetY:n[1].toFixed(),text:i})},propertyAction:function(t){this[t]()},setOrigin:function(){lv.setOrigin([Number(this.state.originX),Number(this.state.originY)])},setTarget:function(){lv.setTarget([Number(this.state.targetX),Number(this.state.targetY)])},openLabelModal:function(){this.state.text=lv.text.replaceAll("\n","\\n"),this.$refs["label-line-modal"].show()},setText:function(){lv.setText(this.state.text.replaceAll("\\n","\n")),this.$refs["label-line-modal"].hide()},deleteLabel:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),lv.off("change",this._changelistener),lv.remove(),lv=null}}},fv=hv,dv=Object(pt["a"])(fv,sv,cv,!1,null,null,null),pv=dv.exports,vv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteCorner}},[t._v("删除")])],1)],2)},gv=[],mv=[{name:"横坐标",value:"x",method:"move"},{name:"纵坐标",value:"y",method:"move"}],yv=null,bv={name:"FeatureElementWall",data:function(){return{state:{x:0,y:0}}},computed:{propertyList:function(){return mv}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),yv&&yv.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},yv=n.common.getSelectedList()[0],this.updateState(yv),yv.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==yv&&n.constructor===yv.constructor&&(yv.off("change",t._changelistener),n.on("change",t._changelistener),yv=n,t.updateState(n))})},updateState:function(t){var e=t.x,n=t.y;Object.assign(this.state,{x:e.toFixed(),y:n.toFixed()})},propertyAction:function(t){this[t]()},move:function(){yv.move(Number(this.state.x),Number(this.state.y))},deleteCorner:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),yv.off("change",this._changelistener),yv.remove(),yv=null}}},xv=bv,$v=Object(pt["a"])(xv,vv,gv,!1,null,null,null),wv=$v.exports,Ov=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteWall}},[t._v("删除")])],1)],2)},jv=[],kv=[{name:"墙厚",value:"thickness",method:"setThickness"}],Tv=null,Ev={name:"FeatureElementWall",data:function(){return{state:{thickness:0}}},computed:{propertyList:function(){return kv}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),Tv&&Tv.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},Tv=n.common.getSelectedList()[0],this.updateState(Tv),Tv.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==Tv&&n.constructor===Tv.constructor&&(Tv.off("change",t._changelistener),n.on("change",t._changelistener),Tv=n,t.updateState(n))})},updateState:function(t){var e=t.thickness;Object.assign(this.state,{thickness:e.toFixed()})},propertyAction:function(t){this[t]()},setThickness:function(){Tv.thickness=Number(this.state.thickness)},deleteWall:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),Tv.off("change",this._changelistener),Tv.remove(),Tv=null}}},Sv=Ev,Cv=Object(pt["a"])(Sv,Ov,jv,!1,null,null,null),Lv=Cv.exports,Pv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[n("b-form-group",{staticClass:"px-1 mb-2",attrs:{label:"房间类型","label-class":"app-text-tiny"}},[n("b-input-group",[n("b-input",{staticClass:"app-text-tiny",attrs:{autocomplete:"off",list:"room-name-id"},on:{change:t.setRoomName},model:{value:t.state.name,callback:function(e){t.$set(t.state,"name",e)},expression:"state.name"}}),n("datalist",{attrs:{id:"room-name-id"}},t._l(t.roomNameOptions,(function(e,i){return n("option",{key:i},[t._v(t._s(e))])})),0)],1)],1),n("b-form-group",{staticClass:"px-1 mb-2",attrs:{label:"地板","label-class":"app-text-tiny"}},[n("div",{staticClass:"d-flex flex-wrap py-1 pl-1"},t._l(t.floorList,(function(e,i){return n("div",{key:i,staticClass:"d-flex flex-column align-items-center mr-1",on:{click:function(n){return t.setFloor(e.url)}}},[n("span",{staticStyle:{width:"60px",height:"60px",cursor:"pointer"}},[n("b-img",{staticClass:"h-100 w-100",attrs:{src:e.url}})],1),n("span",{staticClass:"app-text-tiny"},[t._v(t._s(e.name))])])})),0)])],1)},Fv=[],Av=["客厅","卧室","厨房","餐厅","卫生间","储物间"],Nv=[{name:"空",url:null},{name:"地板1",url:"https://qhcmsoss.kujiale.com/ttex/L2HNXEIKN4FT2AABAAAAAAY8.jpg"},{name:"地板2",url:"https://file.t8tcdn.com/d/flash/567a/6b/bd/a3/567a6bbda31066a932cf1b80.jpg"},{name:"地板3",url:"https://file.t8tcdn.com/d/flash/2020/11/13/16/20201113165143610211605256703196.jpg"},{name:"地板4",url:"https://spriteoss.kujiale.com/tile/preview/2019/06/26/XRMsCApvBfEAAQAAAA0-large.jpg"},{name:"地板5",url:"https://spriteoss.kujiale.com/tile/preview/2019/06/13/XQIWNApvCEwAAQAAAAA-large.jpg"}],_v=null,Dv=null,Rv={name:"FeatureElementRoom",data:function(){return{state:{name:""}}},computed:{roomNameOptions:function(){return Av},floorList:function(){return Nv}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;_v=n.common.getSelectedList()[0],Dv=this.getRoomLabel(n.label.textLabels(),_v),this.updateState(),n.common.on("selector-add",this._addlistener=function(e){var i=e[0];i!==_v&&i.constructor===_v.constructor&&(_v=i,Dv=t.getRoomLabel(n.label.textLabels(),i),t.updateState())})},getRoomLabel:function(t,e){var n,i=Object(Ue["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.room===e)return r}}catch(a){i.e(a)}finally{i.f()}},updateState:function(){var t=Dv.text;Object.assign(this.state,{name:t.slice(0,t.indexOf("\n"))})},setRoomName:function(){var t=Dv.text;this.state.name||(this.state.name="未命名"),Dv.setText("".concat(this.state.name).concat(t.slice(t.indexOf("\n"))))},setFloor:function(t){_v.setFloor(t)}}},Wv=Rv,Mv=Object(pt["a"])(Wv,Pv,Fv,!1,null,null,null),Iv=Mv.exports,Hv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pt-1"},[t._l(t.propertyList,(function(e,i){return n("b-form-group",{key:i,staticClass:"px-1 mb-2",attrs:{label:e.name,"label-class":"app-text-tiny"}},[n("b-input-group",{attrs:{append:e.append}},[n("b-input",{staticClass:"app-text-tiny",attrs:{type:"number",min:e.min,max:e.max,autocomplete:"off"},on:{change:function(n){return t.propertyAction(e.method)}},model:{value:t.state[e.value],callback:function(n){t.$set(t.state,e.value,t._n(n))},expression:"state[property.value]"}})],1)],1)})),n("b-button-group",{staticClass:"px-1"},[n("b-button",{staticClass:"app-collapse-button",on:{click:t.deleteBitmap}},[t._v("删除")])],1)],2)},Bv=[],Vv=[{name:"横坐标",value:"x",method:"setPosition"},{name:"纵坐标",value:"y",method:"setPosition"},{name:"宽度",value:"width",append:"mm",method:"setWidth",min:10},{name:"高度",value:"height",append:"mm",method:"setHeight",min:10},{name:"角度",value:"rotation",append:"degrees",method:"setRotation",min:-360,max:360}],zv=function(t){return t/Math.PI/2*360},Uv=function(t){return t/360*2*Math.PI},Yv=function(t){return 10*t},Gv=null,Xv={name:"FeatureElementBitmap",data:function(){return{state:{width:10,height:10,rotation:0,x:0,y:0}}},computed:{propertyList:function(){return Vv}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),Gv&&Gv.off("change",this._changelistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing;this._changelistener=function(e){return t.updateState(e)},Gv=n.common.getSelectedList()[0],this.updateState(Gv),Gv.on("change",this._changelistener),n.common.on("selector-add",this._addlistener=function(e){var n=e[0];n!==Gv&&n.constructor===Gv.constructor&&(Gv.off("change",t._changelistener),n.on("change",t._changelistener),Gv=n,t.updateState(n))})},updateState:function(t){var e=t.width,n=t.height,i=t.rotation,r=t.x,a=t.y;Object.assign(this.state,{width:e.toFixed(),height:n.toFixed(),rotation:zv(i).toFixed(),x:r.toFixed(),y:a.toFixed()})},propertyAction:function(t){this[t]()},setWidth:function(){Gv.setWidth(Number(this.state.width))},setHeight:function(){Gv.setHeight(Number(this.state.height))},setRotation:function(){Gv.setRotation(Uv(this.state.rotation))},setPosition:function(){Gv.setPosition(Number(this.state.x),Number(this.state.y))},defaultWidthHeight:function(){var t=this.$spoke.getFurnitureList().find((function(t){return t.id===Gv.fill}));Gv.setWidth(Yv(t.dWidth)),Gv.setHeight(Yv(t.dHeight)),Gv.setRotation(0)},deleteBitmap:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.selector.drop(),Gv.off("change",this._changelistener),Gv.remove(),Gv=null}}},Kv=Xv,qv=Object(pt["a"])(Kv,Hv,Bv,!1,null,null,null),Jv=qv.exports,Qv=new Map([[z.Furniture.StuffProxy,zp],[z.Windoor.HollowProxy,Qp],[z.Label.LabelTextProxy,ov],[z.Label.LabelLineProxy,pv],[z.Structure.CornerProxy,wv],[z.Structure.WallProxy,Lv],[z.Structure.RoomProxy,Iv],[z.Negative.BitmapProxy,Jv]]),Zv={name:"FeatureElementProperty",data:function(){return{component:null}},mounted:function(){this.init()},destroyed:function(){var t=this.$spoke.getEditor("primary"),e=t.drawing;e.common.off("selector-add",this._addlistener),e.common.off("selector-clear",this._clearlistener)},methods:{init:function(){var t=this,e=this.$spoke.getEditor("primary"),n=e.drawing,i=n.common.getSelectedList();1===i.length&&(this.component=Qv.get(i[0].constructor)),n.common.on("selector-add",this._addlistener=function(e){1===e.length?t.component=Qv.get(e[0].constructor):t.component=null}),n.common.on("selector-clear",this._clearlistener=function(){t.component=null})}}},tg=Zv,eg=Object(pt["a"])(tg,ai,oi,!1,null,null,null),ng=eg.exports,ig={id:"element",icon:"braces",title:"Element Property",component:ng},rg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column",attrs:{id:"app-feature-overview-panel"}},t._l(t.itemList,(function(e,i){return n("b-card",{key:e,staticClass:"border-0",class:{"h-100":"furniture"===e},attrs:{"no-body":""}},[n("b-card-header",{attrs:{"header-class":"p-0"}},[n("b-button",{staticClass:"py-0 px-1 text-sm-left font-weight-bold app-collapse-button",attrs:{block:"",variant:"dark"},on:{click:function(e){return t.toggle(i)}}},[n("b-icon",{staticClass:"mr-1",attrs:{icon:t.visibleList[i]?"chevron-down":"chevron-right"}}),t._v(t._s(e))],1)],1),n("b-collapse",{staticClass:"overflow-auto",model:{value:t.visibleList[i],callback:function(e){t.$set(t.visibleList,i,e)},expression:"visibleList[index]"}},[n(t.itemMap[e].component,{tag:"component"})],1)],1)})),1)},ag=[],og=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-wrap py-1 pl-1"},t._l(t.doorList,(function(e){return n("div",{key:e.id,staticClass:"d-flex flex-column align-items-center mr-1",on:{click:function(n){return t.createDoor(e.id)}}},[n("span",{staticStyle:{width:"60px",height:"60px",cursor:"pointer"}},[n("b-img",{staticClass:"h-100 w-100",attrs:{src:"img/"+e.img+".png"}})],1),n("span",{staticClass:"app-text-tiny"},[t._v(t._s(e.title))])])})),0)},sg=[],cg=[{id:"singleDoor",title:"单开门",img:"SingleDoor"},{id:"doubleDoor",title:"双开门",img:"DoubleDoor"},{id:"slidingDoor",title:"移门",img:"SlidingDoor"},{id:"parentDoor",title:"子母门",img:"ParentDoor"}],ug=[{id:"basicWindow",title:"窗",img:"BasicWindow"},{id:"boilerWindow",title:"飘窗",img:"BoilerWindow"},{id:"floorWindow",title:"落地窗",img:"FloorWindow"}],lg={name:"FeatureResourceDoor",data:function(){return{doorList:cg}},methods:{createDoor:function(t){var e=this.$spoke.getEditor("primary"),n=e.drawing,i=e.tool;i.closeAllTool(),n.windoor.createMovingHollow(t)}}},hg=lg,fg=Object(pt["a"])(hg,og,sg,!1,null,null,null),dg=fg.exports,pg={id:"door",title:"door",component:dg},vg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-wrap py-1 pl-1"},t._l(t.windowList,(function(e){return n("div",{key:e.id,staticClass:"d-flex flex-column align-items-center mr-1",on:{click:function(n){return t.createWindow(e.id)}}},[n("span",{staticStyle:{width:"60px",height:"60px",cursor:"pointer"}},[n("img",{staticClass:"h-100 w-100",attrs:{src:"img/"+e.img+".png"}})]),n("span",{staticClass:"app-text-tiny"},[t._v(t._s(e.title))])])})),0)},gg=[],mg={name:"FeatureResourceWindow",data:function(){return{windowList:ug}},methods:{createWindow:function(t){var e=this.$spoke.getEditor("primary"),n=e.drawing;n.windoor.createMovingHollow(t)}}},yg=mg,bg=Object(pt["a"])(yg,vg,gg,!1,null,null,null),xg=bg.exports,$g={id:"window",title:"window",component:xg},wg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-wrap py-1 pl-1"},t._l(t.furnitureList,(function(e,i){return n("div",{key:e.id+i,staticClass:"d-flex flex-column align-items-center mr-1",on:{click:function(n){return t.createFurniture(e.id,e.dWidth,e.dHeight)}}},[n("span",{staticStyle:{width:"60px",height:"60px",cursor:"pointer"}},[n("b-img",{staticClass:"h-100 w-100",attrs:{src:e.img}})],1),n("span",{staticClass:"app-text-tiny"},[t._v(t._s(e.title))])])})),0)},Og=[],jg=function(t){return 10*t},kg={name:"FeatureResourceFurniture",data:function(){return{furnitureList:this.$spoke.getFurnitureList()}},methods:{createFurniture:function(t,e,n){var i=this.$spoke.getEditor("primary"),r=i.drawing,a=i.tool;a.closeAllTool(),r.furniture.createMovingStuff(t,jg(e),jg(n))}}},Tg=kg,Eg=Object(pt["a"])(Tg,wg,Og,!1,null,null,null),Sg=Eg.exports,Cg={id:"furniture",title:"furniture",component:Sg},Lg=(Fp={},Object(bt["a"])(Fp,pg.id,pg),Object(bt["a"])(Fp,$g.id,$g),Object(bt["a"])(Fp,Cg.id,Cg),Fp),Pg=[pg.id,$g.id,Cg.id],Fg={name:"FeatureResourcePanel",data:function(){return{visibleList:Pg.map((function(){return!0})),itemList:Pg.slice(0)}},computed:{itemMap:function(){return Lg}},methods:{toggle:function(t){this.$set(this.visibleList,t,!this.visibleList[t])}}},Ag=Fg,Ng=(n("5eac"),Object(pt["a"])(Ag,rg,ag,!1,null,null,null)),_g=Ng.exports,Dg={id:"resource",icon:"inboxes",title:"Resource Manager",component:_g},Rg=[Bn.id,ig.id,Kn.id,ri.id,Dg.id],Wg=(Ap={},Object(bt["a"])(Ap,Bn.id,Bn),Object(bt["a"])(Ap,Kn.id,Kn),Object(bt["a"])(Ap,ri.id,ri),Object(bt["a"])(Ap,ig.id,ig),Object(bt["a"])(Ap,Dg.id,Dg),Ap),Mg={data:function(){return{current:Rg[0],floorState:{floorList:[],currentFloor:0}}},computed:{idList:function(){return Rg},features:function(){return Wg},currentFeature:function(){return this.features[this.current]}},mounted:function(){this.floorInit()},methods:{floorInit:function(){var t=this.floorState.floorList;0===t.length&&t.push({floorName:"未命名",isFirst:!0})}}},Ig=Mg,Hg=(n("7096"),Object(pt["a"])(Ig,Me,Ie,!1,null,null,null)),Bg=Hg.exports,Vg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{size:"lg",title:"Uncaught Error:"}},[n("b-textarea",{staticStyle:{height:"30em"},attrs:{value:t.stack,readonly:"","no-resize":""}})],1)},zg=[],Ug={data:function(){return{stack:""}},mounted:function(){var t=this;window.addEventListener("error",(function(e){t.stack=e.error.stack,t.$refs.modal.show()}))}},Yg=Ug,Gg=Object(pt["a"])(Yg,Vg,zg,!1,null,null,null),Xg=Gg.exports,Kg={components:{AppMenu:gt,AppToolGroupBar:xe,AppToolGroupSetting:Te,AppStatusBar:We,AppFeaturePanel:Bg,AppError:Xg},data:function(){return{layout:{consoleHeight:200}}},mounted:function(){var t=this;this.$nextTick((function(){return t.layout.consoleHeight=200})),this.$spoke.getEditor("primary").drawing.mount(this.$refs.drawing)}},qg=Kg,Jg=Object(pt["a"])(qg,st,ct,!1,null,null,null),Qg=Jg.exports,Zg=n("22d0"),tm=n("c8ae"),em=n("5f5b"),nm=n("b1e0"),im=(n("d9e2"),[{id:"bed",title:"床",img:"https://qhyxpicoss.kujiale.com/r/2020/03/30/L4D1111ENDDVAXSVUGEJKFNNVCQD3WKVY8_199x225.png",dWidth:180,dHeight:200},{id:"sofa",title:"沙发",img:"https://qhrenderpicoss.kujiale.com/r/2021/04/15/L4D1111ENDDV7Y72IBEJKVNWMVXL3WKVY8_303x104.png",dWidth:200,dHeight:100}]),rm={},am=Object.freeze({getEditor:function(t){var e=rm[t];if(!e)throw new Error("id ".concat(t," is not existed"));return e},createEditor:function(t,e){var n=rm[t];if(n)throw new Error("Duplicated id '".concat(t,"'"));return rm[t]=it.Editor(e)},resourceRegister:function(){G.windoorRegistry();var t,e=Object(Ue["a"])(im);try{for(e.s();!(t=e.n()).done;){var n=t.value;z.Furniture.registerUrl(n.id,n.img)}}catch(i){e.e(i)}finally{e.f()}},getFurnitureList:function(){return im}}),om={install:function(t){t.prototype.$spoke=am}},sm=(am.getEditor,am.createEditor),cm=am.resourceRegister,um=n("8f9c");ot["default"].use(om),ot["default"].use(Zg["a"]),ot["default"].use(tm["a"]),ot["default"].use(em["a"],um),ot["default"].use(nm["a"]),window.d=sm("primary"),cm(),new ot["default"]({render:function(t){return t(Qg)},mounted:function(){}}).$mount("#app"),window.addEventListener("keydown",(function(t){t.altKey&&t.preventDefault()}))},"5d77":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"5eac":function(t,e,n){"use strict";n("d781")},6354:function(t,e,n){},"6c89":function(t,e,n){},7096:function(t,e,n){"use strict";n("73d0")},"73d0":function(t,e,n){},7612:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"7c09":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"8f9c":function(t){t.exports=JSON.parse('{"breakpoints":["xs","sm","md","lg","xl","xxl"],"formControls":{"size":"sm"},"BLink":{"activeClass":"active"},"BButton":{"variant":"primary","size":"sm"},"BToast":{"toaster":"b-toaster-top-center","autoHideDelay":3000,"variant":"primary","toastClass":null,"headerClass":null,"bodyClass":null},"BModal":{"cancelVariant":"secondary","okVariant":"primary"},"BFormGroup":{"labelSize":"sm"},"BInputGroup":{"size":"sm"},"BNavItem":{"linkClasses":["p-0","px-1"]}}')},bf64:function(t,e){},c394:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},c5c2:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},c6f4:function(t,e,n){"use strict";n("6354")},d1d1:function(t,e,n){"use strict";n("ef4d")},d607:function(t,e,n){"use strict";n("6c89")},d781:function(t,e,n){},e07e:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},ef4d:function(t,e,n){}});